/*! For license information please see main.min.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WXMiniGameTs=e():t.WXMiniGameTs=e()}(this,(()=>(()=>{var t={170:(t,e,i)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}var n=function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}var a=n((function(t,i){!function(t){var e=t.Promise,n=e&&"resolve"in e&&"reject"in e&&"all"in e&&"race"in e&&function(){var t;return new e((function(e){t=e})),"function"==typeof t}();i?(i.Promise=n?e:E,i.Polyfill=E):n||(t.Promise=E);var a="pending",s="sealed",o="fulfilled",h="rejected",l=function(){};function u(t){return"[object Array]"===Object.prototype.toString.call(t)}var c,f="undefined"!=typeof setImmediate?setImmediate:setTimeout,p=[];function d(){for(var t=0;t<p.length;t++)p[t][0](p[t][1]);p=[],c=!1}function _(t,e){p.push([t,e]),c||(c=!0,f(d,0))}function m(t){var e=t.owner,i=e.state_,r=e.data_,n=t[i],a=t.then;if("function"==typeof n){i=o;try{r=n(r)}catch(t){b(a,t)}}y(a,r)||(i===o&&g(a,r),i===h&&b(a,r))}function y(t,e){var i;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==r(e))){var n=e.then;if("function"==typeof n)return n.call(e,(function(r){i||(i=!0,e!==r?g(t,r):v(t,r))}),(function(e){i||(i=!0,b(t,e))})),!0}}catch(e){return i||b(t,e),!0}return!1}function g(t,e){t!==e&&y(t,e)||v(t,e)}function v(t,e){t.state_===a&&(t.state_=s,t.data_=e,_(x,t))}function b(t,e){t.state_===a&&(t.state_=s,t.data_=e,_(P,t))}function T(t){var e=t.then_;t.then_=void 0;for(var i=0;i<e.length;i++)m(e[i])}function x(t){t.state_=o,T(t)}function P(t){t.state_=h,T(t)}function E(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof E==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function i(t){b(e,t)}try{t((function(t){g(e,t)}),i)}catch(t){i(t)}}(t,this)}E.prototype={constructor:E,state_:a,then_:null,data_:void 0,then:function(t,e){var i={owner:this,then:new this.constructor(l),fulfilled:t,rejected:e};return this.state_===o||this.state_===h?_(m,i):this.then_.push(i),i.then},catch:function(t){return this.then(null,t)}},E.all=function(t){if(!u(t))throw new TypeError("You must pass an array to Promise.all().");return new this((function(e,i){var r=[],n=0;function a(t){return n++,function(i){r[t]=i,--n||e(r)}}for(var s,o=0;o<t.length;o++)(s=t[o])&&"function"==typeof s.then?s.then(a(o),i):r[o]=s;n||e(r)}))},E.race=function(t){if(!u(t))throw new TypeError("You must pass an array to Promise.race().");return new this((function(e,i){for(var r,n=0;n<t.length;n++)(r=t[n])&&"function"==typeof r.then?r.then(e,i):e(r)}))},E.resolve=function(t){return t&&"object"==r(t)&&t.constructor===this?t:new this((function(e){e(t)}))},E.reject=function(t){return new this((function(e,i){i(t)}))}}("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:e)})),s=(a.Promise,a.Polyfill),o=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,u=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,r,n=arguments,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),s=1;s<arguments.length;s++){for(var u in i=Object(n[s]))h.call(i,u)&&(a[u]=i[u]);if(o){r=o(i);for(var c=0;c<r.length;c++)l.call(i,r[c])&&(a[r[c]]=i[r[c]])}}return a};if(window.Promise||(window.Promise=s),Object.assign||(Object.assign=u),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!window.performance||!window.performance.now){var c=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-c}}for(var f=Date.now(),p=["ms","moz","webkit","o"],d=0;d<p.length&&!window.requestAnimationFrame;++d){var _=p[d];window.requestAnimationFrame=window[_+"RequestAnimationFrame"],window.cancelAnimationFrame=window[_+"CancelAnimationFrame"]||window[_+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+f-e;return i<0&&(i=0),f=e,window.setTimeout((function(){f=Date.now(),t(performance.now())}),i)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var m=/iPhone/i,y=/iPod/i,g=/iPad/i,v=/\biOS-universal(?:.+)Mac\b/i,b=/\bAndroid(?:.+)Mobile\b/i,T=/Android/i,x=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,P=/Silk/i,E=/Windows Phone/i,A=/\bWindows(?:.+)ARM\b/i,S=/BlackBerry/i,w=/BB10/i,D=/Opera Mini/i,O=/\b(CriOS|Chrome)(?:.+)Mobile/i,I=/Mobile(?:.+)Firefox\b/i,M=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},C=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,r=i.split("[FBAN");void 0!==r[1]&&(i=r[0]),void 0!==(r=i.split("Twitter"))[1]&&(i=r[0]);var n=function(t){return function(e){return e.test(t)}}(i),a={apple:{phone:n(m)&&!n(E),ipod:n(y),tablet:!n(m)&&(n(g)||M(e))&&!n(E),universal:n(v),device:(n(m)||n(y)||n(g)||n(v)||M(e))&&!n(E)},amazon:{phone:n(x),tablet:!n(x)&&n(P),device:n(x)||n(P)},android:{phone:!n(E)&&n(x)||!n(E)&&n(b),tablet:!n(E)&&!n(x)&&!n(b)&&(n(P)||n(T)),device:!n(E)&&(n(x)||n(P)||n(b)||n(T))||n(/\bokhttp\b/i)},windows:{phone:n(E),tablet:n(A),device:n(E)||n(A)},other:{blackberry:n(S),blackberry10:n(w),opera:n(D),firefox:n(I),chrome:n(O),device:n(S)||n(w)||n(D)||n(I)||n(O)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}(window.navigator),R={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e,i=!0;return(C.tablet||C.phone)&&(C.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(i=!1),C.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(i=!1)),i?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:C.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!C.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},F=n((function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(t,e,r,a,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new n(r,a||t,s),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],o]:t._events[h].push(o):(t._events[h]=o,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,s=new Array(a);n<a;n++)s[n]=r[n].fn;return s},o.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,e,r,n,a,s){var o=arguments,h=i?i+t:t;if(!this._events[h])return!1;var l,u,c=this._events[h],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,r),!0;case 4:return c.fn.call(c.context,e,r,n),!0;case 5:return c.fn.call(c.context,e,r,n,a),!0;case 6:return c.fn.call(c.context,e,r,n,a,s),!0}for(u=1,l=new Array(f-1);u<f;u++)l[u-1]=o[u];c.fn.apply(c.context,l)}else{var p,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),f){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,r);break;case 4:c[u].fn.call(c[u].context,e,r,n);break;default:if(!l)for(p=1,l=new Array(f-1);p<f;p++)l[p-1]=o[p];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(t,e,i){return a(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return a(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,r,n){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||s(this,a);else{for(var h=0,l=[],u=o.length;h<u;h++)(o[h].fn!==e||n&&!o[h].once||r&&o[h].context!==r)&&l.push(o[h]);l.length?this._events[a]=1===l.length?l[0]:l:s(this,a)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o})),B=L,N=L;function L(t,e,i){i=i||2;var r,n,a,s,o,h,l,u=e&&e.length,c=u?e[0]*i:t.length,f=k(t,0,c,i,!0),p=[];if(!f||f.next===f.prev)return p;if(u&&(f=function(t,e,i,r){var n,a,s,o=[];for(n=0,a=e.length;n<a;n++)(s=k(t,e[n]*r,n<a-1?e[n+1]*r:t.length,r,!1))===s.next&&(s.steiner=!0),o.push(Z(s));for(o.sort(H),n=0;n<o.length;n++)i=U(i=z(o[n],i),i.next);return i}(t,e,f,i)),t.length>80*i){r=a=t[0],n=s=t[1];for(var d=i;d<c;d+=i)(o=t[d])<r&&(r=o),(h=t[d+1])<n&&(n=h),o>a&&(a=o),h>s&&(s=h);l=0!==(l=Math.max(a-r,s-n))?1/l:0}return j(f,p,i,r,n,l),p}function k(t,e,i,r,n){var a,s;if(n===ht(t,e,i,r)>0)for(a=e;a<i;a+=r)s=at(a,t[a],t[a+1],s);else for(a=i-r;a>=e;a-=r)s=at(a,t[a],t[a+1],s);return s&&$(s,s.next)&&(st(s),s=s.next),s}function U(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!$(r,r.next)&&0!==J(r.prev,r,r.next))r=r.next;else{if(st(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function j(t,e,i,r,n,a,s){if(t){!s&&a&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=q(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,a,s,o,h,l=1;do{for(i=t,t=null,a=null,s=0;i;){for(s++,r=i,o=0,e=0;e<l&&(o++,r=r.nextZ);e++);for(h=l;o>0||h>0&&r;)0!==o&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,o--):(n=r,r=r.nextZ,h--),a?a.nextZ=n:t=n,n.prevZ=a,a=n;i=r}a.nextZ=null,l*=2}while(s>1)}(n)}(t,r,n,a);for(var o,h,l=t;t.prev!==t.next;)if(o=t.prev,h=t.next,a?Y(t,r,n,a):X(t))e.push(o.i/i),e.push(t.i/i),e.push(h.i/i),st(t),t=h.next,l=h.next;else if((t=h)===l){s?1===s?j(t=G(U(t),e,i),e,i,r,n,a,2):2===s&&V(t,e,i,r,n,a):j(U(t),e,i,r,n,a,1);break}}}function X(t){var e=t.prev,i=t,r=t.next;if(J(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(K(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&J(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Y(t,e,i,r){var n=t.prev,a=t,s=t.next;if(J(n,a,s)>=0)return!1;for(var o=n.x<a.x?n.x<s.x?n.x:s.x:a.x<s.x?a.x:s.x,h=n.y<a.y?n.y<s.y?n.y:s.y:a.y<s.y?a.y:s.y,l=n.x>a.x?n.x>s.x?n.x:s.x:a.x>s.x?a.x:s.x,u=n.y>a.y?n.y>s.y?n.y:s.y:a.y>s.y?a.y:s.y,c=q(o,h,e,i,r),f=q(l,u,e,i,r),p=t.prevZ,d=t.nextZ;p&&p.z>=c&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&K(n.x,n.y,a.x,a.y,s.x,s.y,p.x,p.y)&&J(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&K(n.x,n.y,a.x,a.y,s.x,s.y,d.x,d.y)&&J(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&K(n.x,n.y,a.x,a.y,s.x,s.y,p.x,p.y)&&J(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&K(n.x,n.y,a.x,a.y,s.x,s.y,d.x,d.y)&&J(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function G(t,e,i){var r=t;do{var n=r.prev,a=r.next.next;!$(n,a)&&tt(n,r,r.next,a)&&rt(n,a)&&rt(a,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(a.i/i),st(r),st(r.next),r=t=a),r=r.next}while(r!==t);return U(r)}function V(t,e,i,r,n,a){var s=t;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&Q(s,o)){var h=nt(s,o);return s=U(s,s.next),h=U(h,h.next),j(s,e,i,r,n,a),void j(h,e,i,r,n,a)}o=o.next}s=s.next}while(s!==t)}function H(t,e){return t.x-e.x}function z(t,e){var i=function(t,e){var i,r=e,n=t.x,a=t.y,s=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var o=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=n&&o>s){if(s=o,o===n){if(a===r.y)return r;if(a===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===s)return i;var h,l=i,u=i.x,c=i.y,f=1/0;r=i;do{n>=r.x&&r.x>=u&&n!==r.x&&K(a<c?n:s,a,u,c,a<c?s:n,a,r.x,r.y)&&(h=Math.abs(a-r.y)/(n-r.x),rt(r,t)&&(h<f||h===f&&(r.x>i.x||r.x===i.x&&W(i,r)))&&(i=r,f=h)),r=r.next}while(r!==l);return i}(t,e);if(!i)return e;var r=nt(i,t),n=U(i,i.next);return U(r,r.next),e===i?n:e}function W(t,e){return J(t.prev,t,e.prev)<0&&J(e.next,t,t.next)<0}function q(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Z(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function K(t,e,i,r,n,a,s,o){return(n-s)*(e-o)-(t-s)*(a-o)>=0&&(t-s)*(r-o)-(i-s)*(e-o)>=0&&(i-s)*(a-o)-(n-s)*(r-o)>=0}function Q(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&tt(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(rt(t,e)&&rt(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,a=(t.y+e.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(J(t.prev,t,e.prev)||J(t,e.prev,e))||$(t,e)&&J(t.prev,t,t.next)>0&&J(e.prev,e,e.next)>0)}function J(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function $(t,e){return t.x===e.x&&t.y===e.y}function tt(t,e,i,r){var n=it(J(t,e,i)),a=it(J(t,e,r)),s=it(J(i,r,t)),o=it(J(i,r,e));return n!==a&&s!==o||!(0!==n||!et(t,i,e))||!(0!==a||!et(t,r,e))||!(0!==s||!et(i,t,r))||!(0!==o||!et(i,e,r))}function et(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function it(t){return t>0?1:t<0?-1:0}function rt(t,e){return J(t.prev,t,t.next)<0?J(t,e,t.next)>=0&&J(t,t.prev,e)>=0:J(t,e,t.prev)<0||J(t,t.next,e)<0}function nt(t,e){var i=new ot(t.i,t.x,t.y),r=new ot(e.i,e.x,e.y),n=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function at(t,e,i,r){var n=new ot(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function st(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ot(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ht(t,e,i,r){for(var n=0,a=e,s=i-r;a<i;a+=r)n+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return n}L.deviation=function(t,e,i,r){var n=e&&e.length,a=n?e[0]*i:t.length,s=Math.abs(ht(t,0,a,i));if(n)for(var o=0,h=e.length;o<h;o++){var l=e[o]*i,u=o<h-1?e[o+1]*i:t.length;s-=Math.abs(ht(t,l,u,i))}var c=0;for(o=0;o<r.length;o+=3){var f=r[o]*i,p=r[o+1]*i,d=r[o+2]*i;c+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},L.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++)for(var s=0;s<e;s++)i.vertices.push(t[n][a][s]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i},B.default=N;var lt=n((function(t,i){!function(n){var a=i&&!i.nodeType&&i,s=t&&!t.nodeType&&t,o="object"==r(e)&&e;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var h,l,u=2147483647,c=36,f=26,p=38,d=700,_=/^xn--/,m=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=c-1,b=Math.floor,T=String.fromCharCode;function x(t){throw RangeError(g[t])}function P(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function E(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+P((t=t.replace(y,".")).split("."),e).join(".")}function A(t){for(var e,i,r=[],n=0,a=t.length;n<a;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<a?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function S(t){return P(t,(function(t){var e="";return t>65535&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+T(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function D(t,e,i){var r=0;for(t=i?b(t/d):t>>1,t+=b(t/e);t>v*f>>1;r+=c)t=b(t/v);return b(r+(v+1)*t/(t+p))}function O(t){var e,i,r,n,a,s,o,h,l,p,d,_=[],m=t.length,y=0,g=128,v=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&x("not-basic"),_.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<m;){for(a=y,s=1,o=c;n>=m&&x("invalid-input"),((h=(d=t.charCodeAt(n++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:c)>=c||h>b((u-y)/s))&&x("overflow"),y+=h*s,!(h<(l=o<=v?1:o>=v+f?f:o-v));o+=c)s>b(u/(p=c-l))&&x("overflow"),s*=p;v=D(y-a,e=_.length+1,0==a),b(y/e)>u-g&&x("overflow"),g+=b(y/e),y%=e,_.splice(y++,0,g)}return S(_)}function I(t){var e,i,r,n,a,s,o,h,l,p,d,_,m,y,g,v=[];for(_=(t=A(t)).length,e=128,i=0,a=72,s=0;s<_;++s)(d=t[s])<128&&v.push(T(d));for(r=n=v.length,n&&v.push("-");r<_;){for(o=u,s=0;s<_;++s)(d=t[s])>=e&&d<o&&(o=d);for(o-e>b((u-i)/(m=r+1))&&x("overflow"),i+=(o-e)*m,e=o,s=0;s<_;++s)if((d=t[s])<e&&++i>u&&x("overflow"),d==e){for(h=i,l=c;!(h<(p=l<=a?1:l>=a+f?f:l-a));l+=c)g=h-p,y=c-p,v.push(T(w(p+g%y,0))),h=b(g/y);v.push(T(w(h,0))),a=D(i,m,r==n),i=0,++r}++i,++e}return v.join("")}if(h={version:"1.3.2",ucs2:{decode:A,encode:S},decode:O,encode:I,toASCII:function(t){return E(t,(function(t){return m.test(t)?"xn--"+I(t):t}))},toUnicode:function(t){return E(t,(function(t){return _.test(t)?O(t.slice(4).toLowerCase()):t}))}},a&&s)if(t.exports==a)s.exports=h;else for(l in h)h.hasOwnProperty(l)&&(a[l]=h[l]);else n.punycode=h}(e)})),ut=function(t){return"string"==typeof t},ct=function(t){return"object"==r(t)&&null!==t},ft=function(t){return null===t};function pt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var dt=function(t,e,i,r){e=e||"&",i=i||"=";var n={};if("string"!=typeof t||0===t.length)return n;var a=/\+/g;t=t.split(e);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var o=t.length;s>0&&o>s&&(o=s);for(var h=0;h<o;++h){var l,u,c,f,p=t[h].replace(a,"%20"),d=p.indexOf(i);d>=0?(l=p.substr(0,d),u=p.substr(d+1)):(l=p,u=""),c=decodeURIComponent(l),f=decodeURIComponent(u),pt(n,c)?Array.isArray(n[c])?n[c].push(f):n[c]=[n[c],f]:n[c]=f}return n},_t=function(t){switch(r(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},mt=function(t,e,i,n){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==r(t)?Object.keys(t).map((function(r){var n=encodeURIComponent(_t(r))+i;return Array.isArray(t[r])?t[r].map((function(t){return n+encodeURIComponent(_t(t))})).join(e):n+encodeURIComponent(_t(t[r]))})).join(e):n?encodeURIComponent(_t(n))+i+encodeURIComponent(_t(t)):""},yt=n((function(t,e){e.decode=e.parse=dt,e.encode=e.stringify=mt})),gt=(yt.decode,yt.parse,yt.encode,yt.stringify,Rt),vt=bt;function bt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Tt=/^([a-z0-9.+-]+:)/i,xt=/:[0-9]*$/,Pt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Et=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),At=["'"].concat(Et),St=["%","/","?",";","#"].concat(At),wt=["/","?","#"],Dt=/^[+a-z0-9A-Z_-]{0,63}$/,Ot=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,It={javascript:!0,"javascript:":!0},Mt={javascript:!0,"javascript:":!0},Ct={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Rt(t,e,i){if(t&&ct(t)&&t instanceof bt)return t;var r=new bt;return r.parse(t,e,i),r}bt.prototype.parse=function(t,e,i){if(!ut(t))throw new TypeError("Parameter 'url' must be a string, not "+r(t));var n=t.indexOf("?"),a=-1!==n&&n<t.indexOf("#")?"?":"#",s=t.split(a);s[0]=s[0].replace(/\\/g,"/");var o=t=s.join(a);if(o=o.trim(),!i&&1===t.split("#").length){var h=Pt.exec(o);if(h)return this.path=o,this.href=o,this.pathname=h[1],h[2]?(this.search=h[2],this.query=e?yt.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=Tt.exec(o);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,o=o.substr(l.length)}if(i||l||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var c="//"===o.substr(0,2);!c||l&&Mt[l]||(o=o.substr(2),this.slashes=!0)}if(!Mt[l]&&(c||l&&!Ct[l])){for(var f,p,d=-1,_=0;_<wt.length;_++)-1!==(m=o.indexOf(wt[_]))&&(-1===d||m<d)&&(d=m);for(-1!==(p=-1===d?o.lastIndexOf("@"):o.lastIndexOf("@",d))&&(f=o.slice(0,p),o=o.slice(p+1),this.auth=decodeURIComponent(f)),d=-1,_=0;_<St.length;_++){var m;-1!==(m=o.indexOf(St[_]))&&(-1===d||m<d)&&(d=m)}-1===d&&(d=o.length),this.host=o.slice(0,d),o=o.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var g=this.hostname.split(/\./),v=(_=0,g.length);_<v;_++){var b=g[_];if(b&&!b.match(Dt)){for(var T="",x=0,P=b.length;x<P;x++)b.charCodeAt(x)>127?T+="x":T+=b[x];if(!T.match(Dt)){var E=g.slice(0,_),A=g.slice(_+1),S=b.match(Ot);S&&(E.push(S[1]),A.unshift(S[2])),A.length&&(o="/"+A.join(".")+o),this.hostname=E.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=lt.toASCII(this.hostname));var w=this.port?":"+this.port:"",D=this.hostname||"";this.host=D+w,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!It[u])for(_=0,v=At.length;_<v;_++){var O=At[_];if(-1!==o.indexOf(O)){var I=encodeURIComponent(O);I===O&&(I=escape(O)),o=o.split(O).join(I)}}var M=o.indexOf("#");-1!==M&&(this.hash=o.substr(M),o=o.slice(0,M));var C=o.indexOf("?");if(-1!==C?(this.search=o.substr(C),this.query=o.substr(C+1),e&&(this.query=yt.parse(this.query)),o=o.slice(0,C)):e&&(this.search="",this.query={}),o&&(this.pathname=o),Ct[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){w=this.pathname||"";var R=this.search||"";this.path=w+R}return this.href=this.format(),this},bt.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,a="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&ct(this.query)&&Object.keys(this.query).length&&(a=yt.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||Ct[e])&&!1!==n?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+n+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},bt.prototype.resolve=function(t){return this.resolveObject(Rt(t,!1,!0)).format()},bt.prototype.resolveObject=function(t){if(ut(t)){var e=new bt;e.parse(t,!1,!0),t=e}for(var i=new bt,r=Object.keys(this),n=0;n<r.length;n++){var a=r[n];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),o=0;o<s.length;o++){var h=s[o];"protocol"!==h&&(i[h]=t[h])}return Ct[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!Ct[t.protocol]){for(var l=Object.keys(t),u=0;u<l.length;u++){var c=l[u];i[c]=t[c]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||Mt[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var p=i.pathname||"",d=i.search||"";i.path=p+d}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),y=m||_||i.host&&t.pathname,g=y,v=i.pathname&&i.pathname.split("/")||[],b=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!Ct[i.protocol]);if(b&&(i.hostname="",i.port=null,i.host&&(""===v[0]?v[0]=i.host:v.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),y=y&&(""===f[0]||""===v[0])),m)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,v=f;else if(f.length)v||(v=[]),v.pop(),v=v.concat(f),i.search=t.search,i.query=t.query;else if(!function(t){return null==t}(t.search))return b&&(i.hostname=i.host=v.shift(),(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift())),i.search=t.search,i.query=t.query,ft(i.pathname)&&ft(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!v.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var T=v.slice(-1)[0],x=(i.host||t.host||v.length>1)&&("."===T||".."===T)||""===T,P=0,E=v.length;E>=0;E--)"."===(T=v[E])?v.splice(E,1):".."===T?(v.splice(E,1),P++):P&&(v.splice(E,1),P--);if(!y&&!g)for(;P--;P)v.unshift("..");!y||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),x&&"/"!==v.join("/").substr(-1)&&v.push("");var A,S=""===v[0]||v[0]&&"/"===v[0].charAt(0);return b&&(i.hostname=i.host=S?"":v.length?v.shift():"",(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift())),(y=y||i.host&&v.length)&&!S&&v.unshift(""),v.length?i.pathname=v.join("/"):(i.pathname=null,i.path=null),ft(i.pathname)&&ft(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},bt.prototype.parseHost=function(){var t=this.host,e=xt.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var Ft={parse:gt,resolve:function(t,e){return Rt(t,!1,!0).resolve(e)},resolveObject:function(t,e){return t?Rt(t,!1,!0).resolveObject(e):e},format:function(t){return ut(t)&&(t=Rt(t)),t instanceof bt?t.format():bt.prototype.format.call(t)},Url:vt};!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(t.ENV||(t.ENV={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(t.RENDERER_TYPE||(t.RENDERER_TYPE={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(t.BUFFER_BITS||(t.BUFFER_BITS={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(t.BLEND_MODES||(t.BLEND_MODES={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(t.DRAW_MODES||(t.DRAW_MODES={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(t.FORMATS||(t.FORMATS={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(t.TARGETS||(t.TARGETS={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(t.TYPES||(t.TYPES={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(t.SCALE_MODES||(t.SCALE_MODES={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(t.WRAP_MODES||(t.WRAP_MODES={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(t.MIPMAP_MODES||(t.MIPMAP_MODES={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(t.ALPHA_MODES||(t.ALPHA_MODES={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(t.CLEAR_MODES||(t.CLEAR_MODES={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(t.GC_MODES||(t.GC_MODES={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(t.PRECISION||(t.PRECISION={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(t.MASK_TYPES||(t.MASK_TYPES={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(t.MSAA_QUALITY||(t.MSAA_QUALITY={})),R.RETINA_PREFIX=/@([0-9\.]+)x/,R.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var Bt,Nt=!1,Lt="5.3.12";function kt(t){var e;if(!Nt){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS "+Lt+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=window.console).log.apply(e,i)}else window.console&&window.console.log("PixiJS "+Lt+" - "+t+" - http://www.pixijs.com/");Nt=!0}}function Ut(){return void 0===Bt&&(Bt=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:R.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!!i;if(i){var n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,r}catch(t){return!1}}()),Bt}function jt(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function Xt(t){var e=t.toString(16);return"#"+("000000".substr(0,6-e.length)+e)}function Yt(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}var Gt=function(){for(var e=[],i=[],r=0;r<32;r++)e[r]=r,i[r]=r;e[t.BLEND_MODES.NORMAL_NPM]=t.BLEND_MODES.NORMAL,e[t.BLEND_MODES.ADD_NPM]=t.BLEND_MODES.ADD,e[t.BLEND_MODES.SCREEN_NPM]=t.BLEND_MODES.SCREEN,i[t.BLEND_MODES.NORMAL]=t.BLEND_MODES.NORMAL_NPM,i[t.BLEND_MODES.ADD]=t.BLEND_MODES.ADD_NPM,i[t.BLEND_MODES.SCREEN]=t.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(i),n.push(e),n}();function Vt(t,e){return Gt[e?1:0][t]}function Ht(t,e,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function zt(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+((255&t)*e+.5|0)}function Wt(t,e,i,r){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function qt(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var r=0,n=0;r<i;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e}function Zt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Kt={Float32Array,Uint32Array,Int32Array,Uint8Array};function Qt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,1+((t|=t>>>8)|t>>>16)}function Jt(t){return!(t&t-1||!t)}function $t(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function te(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var a=n-(i=e+i>n?n-e:i);for(r=e;r<a;++r)t[r]=t[r+i];t.length=a}}function ee(t){return 0===t?0:t<0?-1:1}var ie=0;function re(){return++ie}var ne={};function ae(t,e,i){if(void 0===i&&(i=3),!ne[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),ne[e]=!0}}var se={},oe=Object.create(null),he=Object.create(null),le=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||R.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),t}();function ue(t){var e,i,r,n=t.width,a=t.height,s=t.getContext("2d"),o=s.getImageData(0,0,n,a).data,h=o.length,l={top:null,left:null,right:null,bottom:null},u=null;for(e=0;e<h;e+=4)0!==o[e+3]&&(i=e/4%n,r=~~(e/4/n),null===l.top&&(l.top=r),(null===l.left||i<l.left)&&(l.left=i),(null===l.right||l.right<i)&&(l.right=i+1),(null===l.bottom||l.bottom<r)&&(l.bottom=r));return null!==l.top&&(n=l.right-l.left,a=l.bottom-l.top+1,u=s.getImageData(l.left,l.top,n,a)),{height:a,width:n,data:u}}var ce,fe=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function pe(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,ce||(ce=document.createElement("a")),ce.href=t;var i=gt(ce.href),r=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&r&&i.protocol===e.protocol?"":"anonymous"}function de(t,e){var i=R.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}var _e,me={BaseTextureCache:he,CanvasRenderTarget:le,DATA_URI:fe,ProgramCache:se,TextureCache:oe,clearTextureCache:function(){var t;for(t in oe)delete oe[t];for(t in he)delete he[t]},correctBlendMode:Vt,createIndicesForQuads:qt,decomposeDataUri:function(t){var e=fe.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}},deprecation:ae,destroyTextureCache:function(){var t;for(t in oe)oe[t].destroy();for(t in he)he[t].destroy()},determineCrossOrigin:pe,getBufferType:Zt,getResolutionOfUrl:de,hex2rgb:jt,hex2string:Xt,interleaveTypedArrays:function(t,e){for(var i=0,r=0,n={},a=0;a<t.length;a++)r+=e[a],i+=t[a].length;var s=new ArrayBuffer(4*i),o=null,h=0;for(a=0;a<t.length;a++){var l=e[a],u=t[a],c=Zt(u);n[c]||(n[c]=new Kt[c](s)),o=n[c];for(var f=0;f<u.length;f++)o[(f/l|0)*r+h+f%l]=u[f];h+=l}return new Float32Array(s)},isPow2:Jt,isWebGLSupported:Ut,log2:$t,nextPow2:Qt,premultiplyBlendMode:Gt,premultiplyRgba:Ht,premultiplyTint:zt,premultiplyTintToRgba:Wt,removeItems:te,rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},sayHello:kt,sign:ee,skipHello:function(){Nt=!0},string2hex:Yt,trimCanvas:ue,uid:re,isMobile:C,EventEmitter:F,earcut:B,url:Ft},ye=2*Math.PI,ge=180/Math.PI,ve=Math.PI/180;(_e=t.SHAPES||(t.SHAPES={}))[_e.POLY=0]="POLY",_e[_e.RECT=1]="RECT",_e[_e.CIRC=2]="CIRC",_e[_e.ELIP=3]="ELIP",_e[_e.RREC=4]="RREC";var be=function(){function e(e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=Number(e),this.y=Number(i),this.width=Number(r),this.height=Number(n),this.type=t.SHAPES.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},e.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},e.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},e.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},e.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this},e.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},e.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this},e}(),Te=function(){function e(e,i,r){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=e,this.y=i,this.radius=r,this.type=t.SHAPES.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},e.prototype.getBounds=function(){return new be(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}(),xe=function(){function e(e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=e,this.y=i,this.width=r,this.height=n,this.type=t.SHAPES.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},e.prototype.getBounds=function(){return new be(this.x-this.width,this.y-this.height,this.width,this.height)},e}(),Pe=function(){function e(){for(var e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];var n=Array.isArray(i[0])?i[0]:i;if("number"!=typeof n[0]){for(var a=[],s=0,o=n.length;s<o;s++)a.push(n[s].x,n[s].y);n=a}this.points=n,this.type=t.SHAPES.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var t=new e(this.points.slice());return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,a=r-1;n<r;a=n++){var s=this.points[2*n],o=this.points[2*n+1],h=this.points[2*a],l=this.points[2*a+1];o>e!=l>e&&t<(e-o)/(l-o)*(h-s)+s&&(i=!i)}return i},e}(),Ee=function(){function e(e,i,r,n,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===a&&(a=20),this.x=e,this.y=i,this.width=r,this.height=n,this.radius=a,this.type=t.SHAPES.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),r=e-(this.y+this.radius),n=this.radius*this.radius;if(i*i+r*r<=n)return!0;if((i=t-(this.x+this.width-this.radius))*i+r*r<=n)return!0;if(i*i+(r=e-(this.y+this.height-this.radius))*r<=n)return!0;if((i=t-(this.x+this.radius))*i+r*r<=n)return!0}return!1},e}(),Ae=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t}(),Se=function(){function t(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this._x=i,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),we=function(){function t(t,e,i,r,n,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===a&&(a=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=a}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,a){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=a,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new Ae;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new Ae;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,a=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=a*e-this.ty*i,this.ty=a*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,a,s,o,h){return this.a=Math.cos(s+h)*n,this.b=Math.sin(s+h)*n,this.c=-Math.sin(s-o)*a,this.d=Math.cos(s-o)*a,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,a=-Math.atan2(-r,n),s=Math.atan2(i,e),o=Math.abs(a+s);return o<1e-5||Math.abs(ye-o)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,a=t*r-e*i;return this.a=r/a,this.b=-e/a,this.c=-i/a,this.d=t/a,this.tx=(i*this.ty-r*n)/a,this.ty=-(t*this.ty-e*n)/a,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),De=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Oe=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ie=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Me=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ce=[],Re=[],Fe=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];Ce.push(e);for(var i=0;i<16;i++)for(var r=Fe(De[t]*De[i]+Ie[t]*Oe[i]),n=Fe(Oe[t]*De[i]+Me[t]*Oe[i]),a=Fe(De[t]*Ie[i]+Ie[t]*Me[i]),s=Fe(Oe[t]*Ie[i]+Me[t]*Me[i]),o=0;o<16;o++)if(De[o]===r&&Oe[o]===n&&Ie[o]===a&&Me[o]===s){e.push(o);break}}for(t=0;t<16;t++){var h=new we;h.set(De[t],Oe[t],Ie[t],Me[t],0,0),Re.push(h)}}();var Be={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return De[t]},uY:function(t){return Oe[t]},vX:function(t){return Ie[t]},vY:function(t){return Me[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return Ce[t][e]},sub:function(t,e){return Ce[t][Be.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?Be.S:Be.N:2*Math.abs(e)<=Math.abs(t)?t>0?Be.E:Be.W:e>0?t>0?Be.SE:Be.SW:t>0?Be.NE:Be.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=Re[Be.inv(e)];n.tx=i,n.ty=r,t.append(n)}},Ne=function(){function t(){this.worldTransform=new we,this.localTransform=new we,this.position=new Se(this.onChange,this,0,0),this.scale=new Se(this.onChange,this,1,1),this.pivot=new Se(this.onChange,this,0,0),this.skew=new Se(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();R.SORTABLE_CHILDREN=!1;var Le=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?be.EMPTY:((t=t||new be(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,a=t[0],s=t[1];e=a<e?a:e,i=s<i?s:i,r=a>r?a:r,n=s>n?s:n,e=(a=t[2])<e?a:e,i=(s=t[3])<i?s:i,r=a>r?a:r,n=s>n?s:n,e=(a=t[4])<e?a:e,i=(s=t[5])<i?s:i,r=a>r?a:r,n=s>n?s:n,e=(a=t[6])<e?a:e,i=(s=t[7])<i?s:i,r=a>r?a:r,n=s>n?s:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},t.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},t.prototype.addFrameMatrix=function(t,e,i,r,n){var a=t.a,s=t.b,o=t.c,h=t.d,l=t.tx,u=t.ty,c=this.minX,f=this.minY,p=this.maxX,d=this.maxY,_=a*e+o*i+l,m=s*e+h*i+u;c=_<c?_:c,f=m<f?m:f,p=_>p?_:p,d=m>d?m:d,c=(_=a*r+o*i+l)<c?_:c,f=(m=s*r+h*i+u)<f?m:f,p=_>p?_:p,d=m>d?m:d,c=(_=a*e+o*n+l)<c?_:c,f=(m=s*e+h*n+u)<f?m:f,p=_>p?_:p,d=m>d?m:d,c=(_=a*r+o*n+l)<c?_:c,f=(m=s*r+h*n+u)<f?m:f,p=_>p?_:p,d=m>d?m:d,this.minX=c,this.minY=f,this.maxX=p,this.maxY=d},t.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,a=this.maxX,s=this.maxY,o=e;o<i;o+=2){var h=t[o],l=t[o+1];r=h<r?h:r,n=l<n?l:n,a=h>a?h:a,s=l>s?l:s}this.minX=r,this.minY=n,this.maxX=a,this.maxY=s},t.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},t.prototype.addVerticesMatrix=function(t,e,i,r,n,a){void 0===n&&(n=0),void 0===a&&(a=n);for(var s=t.a,o=t.b,h=t.c,l=t.d,u=t.tx,c=t.ty,f=this.minX,p=this.minY,d=this.maxX,_=this.maxY,m=i;m<r;m+=2){var y=e[m],g=e[m+1],v=s*y+h*g+u,b=l*g+o*y+c;f=Math.min(f,v-n),d=Math.max(d,v+n),p=Math.min(p,b-a),_=Math.max(_,b+a)}this.minX=f,this.minY=p,this.maxX=d,this.maxY=_},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,a=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=a){var s=this.minX,o=this.minY,h=this.maxX,l=this.maxY;this.minX=i<s?i:s,this.minY=r<o?r:o,this.maxX=n>h?n:h,this.maxY=a>l?a:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=a){var s=this.minX,o=this.minY,h=this.maxX,l=this.maxY;this.minX=i<s?i:s,this.minY=r<o?r:o,this.maxX=n>h?n:h,this.maxY=a>l?a:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,i,r,n,a){t-=n,e-=a,i+=n,r+=a,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),ke=function(t,e){return(ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Ue(t,e){function i(){this.constructor=t}ke(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var je=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Ne,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Le,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return Ue(e,t),e.mixin=function(t){for(var i=Object.keys(t),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new be),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new be),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Le);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,n=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-n,a},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,r,n,a,s,o,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=a,this.skew.y=s,this.pivot.x=o,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Xe),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*ge},set:function(t){this.transform.rotation=t*ve},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e}(F),Xe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return Ue(e,t),e}(je);function Ye(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}je.prototype.displayObjectUpdateTransform=je.prototype.updateTransform;var Ge=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=R.SORTABLE_CHILDREN,e.sortDirty=!1,e}return Ue(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);te(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var n=e[0],a=this.children.indexOf(n);if(-1===a)return null;n.parent=null,n.transform._parentID=-1,te(this.children,a,1),this._boundsID++,this.onChildrenChange(a),n.emit("removed",this),this.emit("childRemoved",n,this,a)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,te(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i,r=t,n=e-r;if(n>0&&n<=e){i=this.children.splice(r,n);for(var a=0;a<i.length;++a)i[a].parent=null,i[a].transform&&(i[a].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),a=0;a<i.length;++a)i[a].emit("removed",this),this.emit("childRemoved",i[a],this,a);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(Ye),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,i){void 0===i&&(i=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!i)for(var n=0,a=this.children.length;n<a;++n){var s=this.children[n];s.visible&&s.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t),r=0;for(var n=this.children.length;r<n;r++)this.children[r].render(t);t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(je);Ge.prototype.containerUpdateTransform=Ge.prototype.updateTransform;var Ve={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};je.mixin(Ve);var He,ze=100,We=function(){function t(t){this._hookDiv=null,(C.tablet||C.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=ze+"px",e.style.height=ze+"px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){var t=performance.now();if(!(C.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=this.renderer.resolution,r=e.width/this.renderer.width*i,n=e.height/this.renderer.height*i,a=this.div;a.style.left=e.left+"px",a.style.top=e.top+"px",a.style.width=this.renderer.width+"px",a.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var o=this.children[s];if(o.renderId!==this.renderId)o._accessibleActive=!1,te(this.children,s,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,s--;else{a=o._accessibleDiv;var h=o.hitArea,l=o.worldTransform;o.hitArea?(a.style.left=(l.tx+h.x*l.a)*r+"px",a.style.top=(l.ty+h.y*l.d)*n+"px",a.style.width=h.width*l.a*r+"px",a.style.height=h.height*l.d*n+"px"):(h=o.getBounds(),this.capHitArea(h),a.style.left=h.x*r+"px",a.style.top=h.y*n+"px",a.style.width=h.width*r+"px",a.style.height=h.height*n+"px",a.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(a.title=o.accessibleTitle),a.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&a.setAttribute("aria-label",o.accessibleHint)),o.accessibleTitle===a.title&&o.tabIndex===a.tabIndex||(a.title=o.accessibleTitle,a.tabIndex=o.tabIndex,this.debug&&this.updateDebugHTML(a))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=ze+"px",e.style.height=ze+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();R.TARGET_FPMS=.06,(He=t.UPDATE_PRIORITY||(t.UPDATE_PRIORITY={}))[He.INTERACTION=50]="INTERACTION",He[He.HIGH=25]="HIGH",He[He.NORMAL=0]="NORMAL",He[He.LOW=-25]="LOW",He[He.UTILITY=-50]="UTILITY";var qe=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.fn=t,this.context=e,this.priority=i,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),Ze=function(){function e(){var t=this;this._head=new qe(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/R.TARGET_FPMS,this.elapsedMS=1/R.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,i,r){return void 0===r&&(r=t.UPDATE_PRIORITY.NORMAL),this._addListener(new qe(e,i,r))},e.prototype.addOnce=function(e,i,r){return void 0===r&&(r=t.UPDATE_PRIORITY.NORMAL),this._addListener(new qe(e,i,r,!0))},e.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},e.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*R.TARGET_FPMS;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,R.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),Ke=function(){function e(){}return e.init=function(e){var i=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,t.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}}),this.stop=function(){i._ticker.stop()},this.start=function(){i._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Ze.shared:new Ze,e.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},e}(),Qe=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Ae,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),Je=function(t,e){return(Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},$e=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),ti=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),ei=function(){function t(){this._tempPoint=new Ae}return t.prototype.recursiveFindHit=function(t,e,i,r,n){if(!e||!e.visible)return!1;var a=t.data.global,s=!1,o=n=e.interactive||n,h=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(a,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(r=!1,h=!1)),o=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(a)||(r=!1)),h&&e.interactiveChildren&&e.children)for(var l=e.children,u=l.length-1;u>=0;u--){var c=l[u],f=this.recursiveFindHit(t,c,i,r,o);if(f){if(!c.parent)continue;o=!1,f&&(t.target&&(r=!1),s=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(a)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},t.prototype.findHit=function(t,e,i,r){this.recursiveFindHit(t,e,i,r,!1)},t}(),ii={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};je.mixin(ii);var ri={target:null,data:{global:null}},ni=function(e){function i(t,i){var r=e.call(this)||this;return i=i||{},r.renderer=t,r.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,r.interactionFrequency=i.interactionFrequency||10,r.mouse=new Qe,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new $e,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new ei,r._tempDisplayObject=new Xe,r._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function i(){this.constructor=t}Je(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(i,e),Object.defineProperty(i.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),i.prototype.hitTest=function(t,e){return ri.target=null,ri.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(ri,e,null,!0),ri.target},i.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},i.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(Ze.system.add(this.tickerUpdate,this,t.UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},i.prototype.removeTickerListener=function(){this.tickerAdded&&(Ze.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},i.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},i.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},i.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},i.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},i.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(r(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},i.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},i.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},i.prototype.mapPositionToPoint=function(t,e,i){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},i.prototype.processInteractive=function(t,e,i,r){var n=this.search.findHit(t,e,i,r),a=this.delayedEvents;if(!a.length)return n;t.stopPropagationHint=!1;var s=a.length;this.delayedEvents=[];for(var o=0;o<s;o++){var h=a[o],l=h.displayObject,u=h.eventString,c=h.eventData;c.stopsPropagatingAt===l&&(c.stopPropagationHint=!0),this.dispatchEvent(l,u,c)}return n},i.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],a=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,a);if(s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType)this.emit("touchstart",s);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;this.emit(o?"rightdown":"mousedown",this.eventData)}}}},i.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new ti(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;a?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,a?"rightdown":"mousedown",t)}},i.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,a=t.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var o=r[s],h=this.getInteractionDataForPointerId(o),l=this.configureInteractionEventForDOMEvent(this.eventData,o,h);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,i,e||!a),this.emit(e?"pointercancel":"pointerup"+a,l),"mouse"===o.pointerType||"pen"===o.pointerType){var u=2===o.button;this.emit(u?"rightup"+a:"mouseup"+a,l)}else"touch"===o.pointerType&&(this.emit(e?"touchcancel":"touchend"+a,l),this.releaseInteractionDataForPointerId(o.pointerId))}},i.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},i.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},i.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},i.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,a=e.trackedPointers[n],s="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType,h=!1;if(o){var l=2===r.button,u=ti.FLAGS,c=l?u.RIGHT_DOWN:u.LEFT_DOWN,f=void 0!==a&&a.flags&c;i?(this.dispatchEvent(e,l?"rightup":"mouseup",t),f&&(this.dispatchEvent(e,l?"rightclick":"click",t),h=!0)):f&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),a&&(l?a.rightDown=!1:a.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),a&&(o&&!h||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),a.over=!1))):a&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),a&&a.none&&delete e.trackedPointers[n]},i.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],a=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,a);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},i.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType;a&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),a&&this.dispatchEvent(e,"mousemove",t))},i.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},i.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,a="mouse"===r.pointerType||"pen"===r.pointerType,s=e.trackedPointers[n];i&&!s&&(s=e.trackedPointers[n]=new ti(n)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),a&&this.delayDispatchEvent(e,"mouseover",t)),a&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),a&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[n]))},i.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},i.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new Qe).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},i.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},i.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},i.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else if(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent)e.push(t);else{var a=t;void 0===a.isPrimary&&(a.isPrimary=!0),void 0===a.width&&(a.width=1),void 0===a.height&&(a.height=1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="mouse"),void 0===a.pointerId&&(a.pointerId=1),void 0===a.pressure&&(a.pressure=.5),void 0===a.twist&&(a.twist=0),void 0===a.tangentialPressure&&(a.tangentialPressure=0),a.isNormalized=!0,e.push(a)}return e},i.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},i}(F),ai=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,r,n,a,s,o){if(arguments.length>8)throw new Error("max arguments reached");var h=this.name,l=this.items;this._aliasCount++;for(var u=0,c=l.length;u<c;u++)l[u][h](t,e,i,r,n,a,s,o);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(ai.prototype,{dispatch:{value:ai.prototype.emit},run:{value:ai.prototype.emit}}),R.PREFER_ENV=C.any?t.ENV.WEBGL:t.ENV.WEBGL2,R.STRICT_TEXTURE_CACHE=!1;var si=[];function oi(t,e){if(!t)return null;var i="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(i=r[1].toLowerCase())}for(var n=si.length-1;n>=0;--n){var a=si[n];if(a.test&&a.test(t,i))return new a(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var hi=function(t,e){return(hi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function li(t,e){function i(){this.constructor=t}hi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var ui=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new ai("setRealSize"),this.onUpdate=new ai("update"),this.onError=new ai("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),ci=function(e){function i(t,i){var r=this,n=i||{},a=n.width,s=n.height;if(!a||!s)throw new Error("BufferResource width or height invalid");return(r=e.call(this,a,s)||this).data=t,r}return li(i,e),i.prototype.upload=function(e,i,r){var n=e.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===t.ALPHA_MODES.UNPACK),r.width===i.width&&r.height===i.height?n.texSubImage2D(i.target,0,0,0,i.width,i.height,i.format,i.type,this.data):(r.width=i.width,r.height=i.height,n.texImage2D(i.target,0,r.internalFormat,i.width,i.height,0,i.format,r.type,this.data)),!0},i.prototype.dispose=function(){this.data=null},i.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},i}(ui),fi={scaleMode:t.SCALE_MODES.NEAREST,format:t.FORMATS.RGBA,alphaMode:t.ALPHA_MODES.NPM},pi=function(e){function i(i,r){void 0===i&&(i=null),void 0===r&&(r=null);var n=e.call(this)||this,a=(r=r||{}).alphaMode,s=r.mipmap,o=r.anisotropicLevel,h=r.scaleMode,l=r.width,u=r.height,c=r.wrapMode,f=r.format,p=r.type,d=r.target,_=r.resolution,m=r.resourceOptions;return!i||i instanceof ui||((i=oi(i,m)).internal=!0),n.width=l||0,n.height=u||0,n.resolution=_||R.RESOLUTION,n.mipmap=void 0!==s?s:R.MIPMAP_TEXTURES,n.anisotropicLevel=void 0!==o?o:R.ANISOTROPIC_LEVEL,n.wrapMode=c||R.WRAP_MODE,n.scaleMode=void 0!==h?h:R.SCALE_MODE,n.format=f||t.FORMATS.RGBA,n.type=p||t.TYPES.UNSIGNED_BYTE,n.target=d||t.TARGETS.TEXTURE_2D,n.alphaMode=void 0!==a?a:t.ALPHA_MODES.UNPACK,void 0!==r.premultiplyAlpha&&(n.premultiplyAlpha=r.premultiplyAlpha),n.uid=re(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=l>0&&u>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(i),n}return li(i,e),Object.defineProperty(i.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),i.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},i.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},i.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},i.prototype._refreshPOT=function(){this.isPowerOfTwo=Jt(this.realWidth)&&Jt(this.realHeight)},i.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},i.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},i.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},i.prototype.onError=function(t){this.emit("error",this,t)},i.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete he[this.cacheId],delete oe[this.cacheId],this.cacheId=null),this.dispose(),i.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},i.prototype.dispose=function(){this.emit("dispose",this)},i.prototype.castToBaseTexture=function(){return this},i.from=function(t,e,r){void 0===r&&(r=R.STRICT_TEXTURE_CACHE);var n="string"==typeof t,a=null;n?a=t:(t._pixiId||(t._pixiId="pixiid_"+re()),a=t._pixiId);var s=he[a];if(n&&r&&!s)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return s||((s=new i(t,e)).cacheId=a,i.addToCache(s,a)),s},i.fromBuffer=function(e,r,n,a){e=e||new Float32Array(r*n*4);var s=new ci(e,{width:r,height:n}),o=e instanceof Float32Array?t.TYPES.FLOAT:t.TYPES.UNSIGNED_BYTE;return new i(s,Object.assign(fi,a||{width:r,height:n,type:o}))},i.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),he[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),he[e]=t)},i.removeFromCache=function(t){if("string"==typeof t){var e=he[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete he[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete he[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},i._globalBatch=0,i}(F),di=function(t){function e(e,i){var r=this,n=i||{},a=n.width,s=n.height;(r=t.call(this,a,s)||this).items=[],r.itemDirtyIds=[];for(var o=0;o<e;o++){var h=new pi;r.items.push(h),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return li(e,t),e.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof ui?this.addResourceAt(t[i],i):this.addResourceAt(oi(t[i],e),i))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],i=e.realWidth,r=e.realHeight;return t.resize(i,r),Promise.resolve(t)})),this._load},e}(ui),_i=function(e){function i(t,i){var r,n,a=this,s=i||{},o=s.width,h=s.height;return Array.isArray(t)?(r=t,n=t.length):n=t,a=e.call(this,n,{width:o,height:h})||this,r&&a.initFromArray(r,i),a}return li(i,e),i.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},i.prototype.bind=function(i){e.prototype.bind.call(this,i),i.target=t.TARGETS.TEXTURE_2D_ARRAY},i.prototype.upload=function(t,e,i){var r=this.length,n=this.itemDirtyIds,a=this.items,s=t.gl;i.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,r,0,e.format,e.type,null);for(var o=0;o<r;o++){var h=a[o];n[o]<h.dirtyId&&(n[o]=h.dirtyId,h.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,o,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},i}(di),mi=function(e){function i(t){var i=this,r=t,n=r.naturalWidth||r.videoWidth||r.width,a=r.naturalHeight||r.videoHeight||r.height;return(i=e.call(this,n,a)||this).source=t,i.noSubImage=!1,i}return li(i,e),i.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=pe(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},i.prototype.upload=function(e,i,r,n){var a=e.gl,s=i.realWidth,o=i.realHeight;return n=n||this.source,a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===t.ALPHA_MODES.UNPACK),this.noSubImage||i.target!==a.TEXTURE_2D||r.width!==s||r.height!==o?(r.width=s,r.height=o,a.texImage2D(i.target,0,i.format,i.format,i.type,n)):a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,i.type,n),!0},i.prototype.update=function(){if(!this.destroyed){var t=this.source,i=t.naturalWidth||t.videoWidth||t.width,r=t.naturalHeight||t.videoHeight||t.height;this.resize(i,r),e.prototype.update.call(this)}},i.prototype.dispose=function(){this.source=null},i}(ui),yi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return li(e,t),e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(mi),gi=function(e){function i(r,n){var a=this,s=n||{},o=s.width,h=s.height,l=s.autoLoad,u=s.linkBaseTexture;if(r&&r.length!==i.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");a=e.call(this,6,{width:o,height:h})||this;for(var c=0;c<i.SIDES;c++)a.items[c].target=t.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+c;return a.linkBaseTexture=!1!==u,r&&a.initFromArray(r,n),!1!==l&&a.load(),a}return li(i,e),i.prototype.bind=function(i){e.prototype.bind.call(this,i),i.target=t.TARGETS.TEXTURE_CUBE_MAP},i.prototype.addBaseTextureAt=function(e,i,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,i)}else e.target=t.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+i,e.parentTextureArray=this.baseTexture,this.items[i]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[i]=e,this},i.prototype.upload=function(t,e,r){for(var n=this.itemDirtyIds,a=0;a<i.SIDES;a++){var s=this.items[a];n[a]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),n[a]=s.dirtyId):n[a]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),n[a]=-1))}return!0},i.test=function(t){return Array.isArray(t)&&t.length===i.SIDES},i.SIDES=6,i}(di),vi=function(e){function i(t,i){var r=this;if(i=i||{},!(t instanceof HTMLImageElement)){var n=new Image;mi.crossOrigin(n,t,i.crossorigin),n.src=t,t=n}return r=e.call(this,t)||this,!t.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=t.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==i.createBitmap?i.createBitmap:R.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,r.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,void 0!==i.premultiplyAlpha&&(r.premultiplyAlpha=i.premultiplyAlpha),r.bitmap=null,r._load=null,!1!==i.autoLoad&&r.load(),r}return li(i,e),i.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,i){var r=e.source;e.url=r.src;var n=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?n():(r.onload=n,r.onerror=function(t){i(t),e.onError.emit(t)})}))),this._load},i.prototype.process=function(){var e=this,i=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(i,0,0,i.width,i.height,{premultiplyAlpha:this.alphaMode===t.ALPHA_MODES.UNPACK?"premultiply":"none"}).then((function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})),this._process):Promise.resolve(this)},i.prototype.upload=function(t,i,r){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,i,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,i,r,this.bitmap),!this.preserveBitmap){var n=!0,a=i._glTextures;for(var s in a){var o=a[s];if(o!==r&&o.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},i.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},i.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},i}(mi),bi=function(t){function e(e,i){var r=this;return i=i||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=i.scale||1,r._overrideWidth=i.width,r._overrideHeight=i.height,r._resolve=null,r._crossorigin=i.crossorigin,r._load=null,!1!==i.autoLoad&&r.load(),r}return li(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;mi.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){t._resolve&&(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,r=e.height;if(!i||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=i*t.scale,a=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(n=t._overrideWidth||t._overrideHeight/r*i,a=t._overrideHeight||t._overrideWidth/i*r),n=Math.round(n),a=Math.round(a);var s=t.source;s.width=n,s.height=a,s._pixiId="canvas_"+re(),s.getContext("2d").drawImage(e,0,0,i,r,0,0,n,a),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),r={};return i&&(r[i[1]]=Math.round(parseFloat(i[3])),r[i[5]]=Math.round(parseFloat(i[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(mi),Ti=function(t){function e(i,r){var n=this;if(r=r||{},!(i instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),"string"==typeof i&&(i=[i]);var s=i[0].src||i[0];mi.crossOrigin(a,s,r.crossorigin);for(var o=0;o<i.length;++o){var h=document.createElement("source"),l=i[o],u=l.src,c=l.mime,f=(u=u||i[o]).split("?").shift().toLowerCase(),p=f.substr(f.lastIndexOf(".")+1);c=c||e.MIME_TYPES[p]||"video/"+p,h.src=u,h.type=c,a.appendChild(h)}i=a}return(n=t.call(this,i)||this).noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=!1!==r.autoPlay,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),!1!==r.autoLoad&&n.load(),n}return li(e,t),e.prototype.update=function(e){if(void 0===e&&(e=0),!this.destroyed){var i=Ze.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ze.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Ze.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&Ze.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ze.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ze.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(mi),xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return li(e,t),e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(mi);si.push(vi,xi,yi,Ti,bi,ci,gi,_i);var Pi={Resource:ui,BaseImageResource:mi,INSTALLED:si,autoDetectResource:oi,AbstractMultiResource:di,ArrayResource:_i,BufferResource:ci,CanvasResource:yi,CubeResource:gi,ImageResource:vi,SVGResource:bi,VideoResource:Ti,ImageBitmapResource:xi},Ei=function(){function t(t){this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),Ai=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return li(i,e),i.prototype.upload=function(e,i,r){var n=e.gl;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===t.ALPHA_MODES.UNPACK),r.width===i.width&&r.height===i.height?n.texSubImage2D(i.target,0,0,0,i.width,i.height,i.format,i.type,this.data):(r.width=i.width,r.height=i.height,n.texImage2D(i.target,0,1===e.context.webGLVersion?n.DEPTH_COMPONENT:n.DEPTH_COMPONENT16,i.width,i.height,0,i.format,i.type,this.data)),!0},i}(ci),Si=function(){function e(e,i){this.width=Math.ceil(e||100),this.height=Math.ceil(i||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ai("disposeFramebuffer"),this.multisample=t.MSAA_QUALITY.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(e,i){return void 0===e&&(e=0),this.colorTextures[e]=i||new pi(null,{scaleMode:t.SCALE_MODES.NEAREST,resolution:1,mipmap:t.MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(e){return this.depthTexture=e||new pi(new Ai(null,{width:this.width,height:this.height}),{scaleMode:t.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:t.MIPMAP_MODES.OFF,format:t.FORMATS.DEPTH_COMPONENT,type:t.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),wi=function(t){function e(e){var i=this;"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),i=t.call(this,null,e)||this;var r=e||{},n=r.width,a=r.height;return i.mipmap=0,i.width=Math.ceil(n)||100,i.height=Math.ceil(a)||100,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Si(i.width*i.resolution,i.height*i.resolution).addColorTexture(0,i),i.maskStack=[],i.filterStack=[{}],i}return li(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(pi),Di=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var a=t.width/2/r,s=t.height/2/n,o=t.x/r+a,h=t.y/n+s;i=Be.add(i,Be.NW),this.x0=o+a*Be.uX(i),this.y0=h+s*Be.uY(i),i=Be.add(i,2),this.x1=o+a*Be.uX(i),this.y1=h+s*Be.uY(i),i=Be.add(i,2),this.x2=o+a*Be.uX(i),this.y2=h+s*Be.uY(i),i=Be.add(i,2),this.x3=o+a*Be.uX(i),this.y3=h+s*Be.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t}(),Oi=new Di,Ii=function(t){function e(i,r,n,a,s,o){var h=t.call(this)||this;if(h.noFrame=!1,r||(h.noFrame=!0,r=new be(0,0,1,1)),i instanceof e&&(i=i.baseTexture),h.baseTexture=i,h._frame=r,h.trim=a,h.valid=!1,h._uvs=Oi,h.uvMatrix=null,h.orig=n||r,h._rotate=Number(s||0),!0===s)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return h.defaultAnchor=o?new Ae(o.x,o.y):new Ae(0,0),h._updateID=0,h.textureCacheIds=[],i.valid?h.noFrame?i.valid&&h.onBaseTextureUpdated(i):h.frame=r:i.once("loaded",h.onBaseTextureUpdated,h),h.noFrame&&i.on("update",h.onBaseTextureUpdated,h),h}return li(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture;i&&i.url&&oe[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===Oi&&(this._uvs=new Di),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,r){void 0===i&&(i={}),void 0===r&&(r=R.STRICT_TEXTURE_CACHE);var n="string"==typeof t,a=null;n?a=t:(t._pixiId||(t._pixiId="pixiid_"+re()),a=t._pixiId);var s=oe[a];if(n&&r&&!s)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return s||(i.resolution||(i.resolution=de(t)),(s=new e(new pi(t,i))).baseTexture.cacheId=a,pi.addToCache(s.baseTexture,a),e.addToCache(s,a)),s},e.fromURL=function(t,i){var r=Object.assign({autoLoad:!1},null==i?void 0:i.resourceOptions),n=e.from(t,Object.assign({resourceOptions:r},i),!1),a=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):a.load().then((function(){return Promise.resolve(n)}))},e.fromBuffer=function(t,i,r,n){return new e(pi.fromBuffer(t,i,r,n))},e.fromLoader=function(t,i,r){var n=new vi(t);n.url=i;var a=new e(new pi(n,{scaleMode:R.SCALE_MODE,resolution:de(i)}));return r||(r=i),pi.addToCache(a.baseTexture,r),e.addToCache(a,r),r!==i&&(pi.addToCache(a.baseTexture,i),e.addToCache(a,i)),a},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),oe[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),oe[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=oe[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete oe[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)oe[t.textureCacheIds[r]]===t&&delete oe[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,a=e+r>this.baseTexture.width,s=i+n>this.baseTexture.height;if(a||s){var o=a&&s?"and":"or",h="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+o+" "+l)}this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(F);function Mi(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Ii.EMPTY=new Ii(new pi),Mi(Ii.EMPTY),Mi(Ii.EMPTY.baseTexture),Ii.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Ii(new pi(new yi(t)))}(),Mi(Ii.WHITE),Mi(Ii.WHITE.baseTexture);var Ci=function(t){function e(e,i){var r=this,n=null;if(!(e instanceof wi)){var a=arguments[1],s=arguments[2],o=arguments[3],h=arguments[4];console.warn("Please use RenderTexture.create("+a+", "+s+") instead of the ctor directly."),n=arguments[0],i=null,e=new wi({width:a,height:s,scaleMode:o,resolution:h})}return(r=t.call(this,e,i)||this).legacyRenderer=n,r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return li(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new wi(t))},e}(Ii),Ri=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e){var i=new wi(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Ci(i)},t.prototype.getOptimalTexture=function(e,i,r){void 0===r&&(r=1);var n=t.SCREEN_KEY;e*=r,i*=r,this.enableFullScreen&&e===this._pixelsWidth&&i===this._pixelsHeight||(n=(65535&(e=Qt(e)))<<16|65535&(i=Qt(i))),this.texturePool[n]||(this.texturePool[n]=[]);var a=this.texturePool[n].pop();return a||(a=this.createTexture(e,i)),a.filterPoolKey=n,a.setResolution(r),a},t.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var i=t.SCREEN_KEY,r=this.texturePool[i];if(this.enableFullScreen=e.width>0&&e.height>0,r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[i]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY="screen",t}(),Fi=function(){function t(t,e,i,r,n,a,s){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===r&&(r=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=n,this.start=a,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,i,r,n,a){return new t(e,i,r,n,a)},t}(),Bi=0,Ni=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=Bi++,this.disposeRunner=new ai("disposeBuffer")}return t.prototype.update=function(t){this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();function Li(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var ki={Float32Array,Uint32Array,Int32Array,Uint8Array},Ui={5126:4,5123:2,5121:1},ji=0,Xi={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Yi=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=ji++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ai("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,i,r,n,a,s,o){if(void 0===i&&(i=0),void 0===r&&(r=!1),void 0===o&&(o=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Ni||(e instanceof Array&&(e=new Float32Array(e)),e=new Ni(e));var h=t.split("|");if(h.length>1){for(var l=0;l<h.length;l++)this.addAttribute(h[l],e,i,r,n);return this}var u=this.buffers.indexOf(e);return-1===u&&(this.buffers.push(e),u=this.buffers.length-1),this.attributes[t]=new Fi(u,i,r,n,a,s,o),this.instanced=this.instanced||o,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof Ni||(t instanceof Array&&(t=new Uint16Array(t)),t=new Ni(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],r=new Ni;for(t in this.attributes){var n=this.attributes[t],a=this.buffers[n.buffer];e.push(a.data),i.push(n.size*Ui[n.type]/4),n.buffer=0}for(r.data=function(t,e){for(var i=0,r=0,n={},a=0;a<t.length;a++)r+=e[a],i+=t[a].length;var s=new ArrayBuffer(4*i),o=null,h=0;for(a=0;a<t.length;a++){var l=e[a],u=t[a],c=Li(u);n[c]||(n[c]=new ki[c](s)),o=n[c];for(var f=0;f<u.length;f++)o[(f/l|0)*r+h+f%l]=u[f];h+=l}return new Float32Array(s)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,i=0;i<this.buffers.length;i++)e.buffers[i]=new Ni(this.buffers[i].data.slice(0));for(var i in this.attributes){var r=this.attributes[i];e.attributes[i]=new Fi(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var i,r=new t,n=[],a=[],s=[],o=0;o<e.length;o++){i=e[o];for(var h=0;h<i.buffers.length;h++)a[h]=a[h]||0,a[h]+=i.buffers[h].data.length,s[h]=0}for(o=0;o<i.buffers.length;o++)n[o]=new(Xi[Li(i.buffers[o].data)])(a[o]),r.buffers[o]=new Ni(n[o]);for(o=0;o<e.length;o++)for(i=e[o],h=0;h<i.buffers.length;h++)n[h].set(i.buffers[h].data,s[h]),s[h]+=i.buffers[h].data.length;if(r.attributes=i.attributes,i.indexBuffer){r.indexBuffer=r.buffers[i.buffers.indexOf(i.indexBuffer)],r.indexBuffer.index=!0;var l=0,u=0,c=0,f=0;for(o=0;o<i.buffers.length;o++)if(i.buffers[o]!==i.indexBuffer){f=o;break}for(var o in i.attributes){var p=i.attributes[o];(0|p.buffer)===f&&(u+=p.size*Ui[p.type]/4)}for(o=0;o<e.length;o++){var d=e[o].indexBuffer.data;for(h=0;h<d.length;h++)r.indexBuffer.data[h+c]+=l;l+=i.buffers[f].data.length/u,c+=d.length}}return r},t}(),Gi=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return li(e,t),e}(Yi),Vi=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Ni(e.vertices),e.uvBuffer=new Ni(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return li(e,t),e.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Yi),Hi=0,zi=function(){function t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Hi++,this.static=!!e}return t.prototype.update=function(){this.dirtyId++},t.prototype.add=function(e,i,r){this.uniforms[e]=new t(i,r)},t.from=function(e,i){return new t(e,i)},t}(),Wi=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new be,this.destinationFrame=new be,this.filters=[]}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),qi=function(e){function i(t){var i=e.call(this,t)||this;return i.defaultFilterStack=[{}],i.texturePool=new Ri,i.texturePool.setScreenSize(t.view),i.statePool=[],i.quad=new Gi,i.quadUv=new Vi,i.tempRect=new be,i.activeState={},i.globalUniforms=new zi({outputFrame:i.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),i.forceClear=!1,i.useMaxPadding=!1,i}return li(i,e),i.prototype.push=function(t,e){for(var i=this.renderer,r=this.defaultFilterStack,n=this.statePool.pop()||new Wi,a=e[0].resolution,s=e[0].padding,o=e[0].autoFit,h=e[0].legacy,l=1;l<e.length;l++){var u=e[l];a=Math.min(a,u.resolution),s=this.useMaxPadding?Math.max(s,u.padding):s+u.padding,o=o&&u.autoFit,h=h||u.legacy}1===r.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),r.push(n),n.resolution=a,n.legacy=h,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(s),o&&n.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),n.sourceFrame.ceil(a),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,a),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var c=this.tempRect;c.width=n.sourceFrame.width,c.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,i.renderTexture.bind(n.renderTexture,n.sourceFrame,c),i.renderTexture.clear()},i.prototype.pop=function(){var e=this.defaultFilterStack,i=e.pop(),r=i.filters;this.activeState=i;var n=this.globalUniforms.uniforms;n.outputFrame=i.sourceFrame,n.resolution=i.resolution;var a=n.inputSize,s=n.inputPixel,o=n.inputClamp;if(a[0]=i.destinationFrame.width,a[1]=i.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],s[0]=a[0]*i.resolution,s[1]=a[1]*i.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=i.sourceFrame.width*a[2]-.5*s[2],o[3]=i.sourceFrame.height*a[3]-.5*s[3],i.legacy){var h=n.filterArea;h[0]=i.destinationFrame.width,h[1]=i.destinationFrame.height,h[2]=i.sourceFrame.x,h[3]=i.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(i.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,i.renderTexture,l.renderTexture,t.CLEAR_MODES.BLEND,i),this.returnFilterTexture(i.renderTexture);else{var u=i.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,i.resolution);c.filterFrame=u.filterFrame;var f=0;for(f=0;f<r.length-1;++f){r[f].apply(this,u,c,t.CLEAR_MODES.CLEAR,i);var p=u;u=c,c=p}r[f].apply(this,u,l.renderTexture,t.CLEAR_MODES.BLEND,i),this.returnFilterTexture(u),this.returnFilterTexture(c)}i.clear(),this.statePool.push(i)},i.prototype.bindAndClear=function(e,i){if(void 0===i&&(i=t.CLEAR_MODES.CLEAR),e&&e.filterFrame){var r=this.tempRect;r.width=e.filterFrame.width,r.height=e.filterFrame.height,this.renderer.renderTexture.bind(e,e.filterFrame,r)}else this.renderer.renderTexture.bind(e);"boolean"==typeof i&&(i=i?t.CLEAR_MODES.CLEAR:t.CLEAR_MODES.BLEND,ae("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(i===t.CLEAR_MODES.CLEAR||i===t.CLEAR_MODES.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},i.prototype.applyFilter=function(e,i,r,n){var a=this.renderer;this.bindAndClear(r,n),e.uniforms.uSampler=i,e.uniforms.filterGlobals=this.globalUniforms,a.state.set(e.state),a.shader.bind(e),e.legacy?(this.quadUv.map(i._frame,i.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(t.DRAW_MODES.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(t.DRAW_MODES.TRIANGLE_STRIP))},i.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,r=i.sourceFrame,n=i.destinationFrame,a=e._texture.orig,s=t.set(n.width,0,0,n.height,r.x,r.y),o=e.worldTransform.copyTo(we.TEMP_MATRIX);return o.invert(),s.prepend(o),s.scale(1/a.width,1/a.height),s.translate(e.anchor.x,e.anchor.y),s},i.prototype.destroy=function(){this.texturePool.clear(!1)},i.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},i.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var r=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},i.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},i.prototype.emptyPool=function(){this.texturePool.clear(!0)},i.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},i}(Ei),Zi=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),Ki=function(t){function e(e){var i=t.call(this,e)||this;return i.emptyRenderer=new Zi(e),i.currentRenderer=i.emptyRenderer,i}return li(e,t),e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)},e.prototype.boundArray=function(t,e,i,r){for(var n=t.elements,a=t.ids,s=t.count,o=0,h=0;h<s;h++){var l=n[h],u=l._batchLocation;if(u>=0&&u<r&&e[u]===l)a[h]=u;else for(;o<r;){var c=e[o];if(!c||c._batchEnabled!==i||c._batchLocation!==o){a[h]=o,l._batchLocation=o,e[o]=l;break}o++}}},e}(Ei),Qi=0,Ji=function(e){function i(t){var i=e.call(this,t)||this;return i.webGLVersion=1,i.extensions={},i.supports={uint32Indices:!1},i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),t.view.addEventListener("webglcontextlost",i.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i}return li(i,e),Object.defineProperty(i.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),i.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Qi++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},i.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Qi++,this.renderer.runners.contextChange.emit(t)},i.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},i.prototype.createContext=function(e,i){var r;if(R.PREFER_ENV>=t.ENV.WEBGL2&&(r=e.getContext("webgl2",i)),r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=e.getContext("webgl",i)||e.getContext("experimental-webgl",i)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},i.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},i.prototype.handleContextLost=function(t){t.preventDefault()},i.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},i.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},i.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},i.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},i}(Ei),$i=function(e){this.framebuffer=e,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=t.MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},tr=new be,er=function(e){function i(t){var i=e.call(this,t)||this;return i.managedFramebuffers=[],i.unknownFramebuffer=new Si(10,10),i.msaaSamples=null,i}return li(i,e),i.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new be,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var i=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;R.PREFER_ENV===t.ENV.WEBGL_LEGACY&&(i=null,r=null),i?e.drawBuffers=function(t){return i.drawBuffersWEBGL(t)}:(this.hasMRT=!1,e.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},i.prototype.bind=function(t,e){var i=this.gl;if(t){var r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,r.framebuffer)),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++){var a=t.colorTextures[n];this.renderer.texture.unbind(a.parentTextureArray||a)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},i.prototype.setViewport=function(t,e,i,r){var n=this.viewport;n.width===i&&n.height===r&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))},Object.defineProperty(i.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),i.prototype.clear=function(e,i,r,n,a){void 0===a&&(a=t.BUFFER_BITS.COLOR|t.BUFFER_BITS.DEPTH);var s=this.gl;s.clearColor(e,i,r,n),s.clear(a)},i.prototype.initFramebuffer=function(t){var e=this.gl,i=new $i(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},i.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var r=t.colorTextures,n=0;n<r.length;n++)this.renderer.texture.bind(r[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},i.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],r=t.colorTextures.length;e.drawBuffers||(r=Math.min(r,1)),i.multisample>1&&(i.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,i.msaaBuffer));for(var n=[],a=0;a<r;a++)if(!(0===a&&i.multisample>1)){var s=t.colorTextures[a],o=s.parentTextureArray||s;this.renderer.texture.bind(o,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+a,s.target,o._glTextures[this.CONTEXT_UID].texture,0),n.push(e.COLOR_ATTACHMENT0+a)}if(n.length>1&&e.drawBuffers(n),t.depthTexture&&this.writeDepthTexture){var h=t.depthTexture;this.renderer.texture.bind(h,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!t.stencil&&!t.depth||(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},i.prototype.detectSamples=function(e){var i=this.msaaSamples,r=t.MSAA_QUALITY.NONE;if(e<=1||null===i)return r;for(var n=0;n<i.length;n++)if(i[n]<=e){r=i[n];break}return 1===r&&(r=t.MSAA_QUALITY.NONE),r},i.prototype.blit=function(t,e,i){var r=this.current,n=this.renderer,a=this.gl,s=this.CONTEXT_UID;if(2===n.context.webGLVersion&&r){var o=r.glFramebuffers[s];if(o){if(!t){if(o.multisample<=1)return;o.blitFramebuffer||(o.blitFramebuffer=new Si(r.width,r.height),o.blitFramebuffer.addColorTexture(0,r.colorTextures[0])),(t=o.blitFramebuffer).width=r.width,t.height=r.height}e||((e=tr).width=r.width,e.height=r.height),i||(i=e);var h=e.width===i.width&&e.height===i.height;this.bind(t),a.bindFramebuffer(a.READ_FRAMEBUFFER,o.framebuffer),a.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,a.COLOR_BUFFER_BIT,h?a.NEAREST:a.LINEAR)}}},i.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(i.framebuffer),i.stencil&&r.deleteRenderbuffer(i.stencil))}},i.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},i.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var i=t.width,r=t.height,n=this.gl,a=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,a),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,r),e.stencil=a,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,a)}}},i.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new be},i}(Ei),ir=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},rr={5126:4,5123:2,5121:1},nr=function(e){function i(t){var i=e.call(this,t)||this;return i._activeGeometry=null,i._activeVao=null,i.hasVao=!0,i.hasInstance=!0,i.canUseUInt32ElementIndex=!1,i.managedGeometries={},i.managedBuffers={},i}return li(i,e),i.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==i.webGLVersion){var r=this.renderer.context.extensions.vertexArrayObject;R.PREFER_ENV===t.ENV.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=function(){return r.createVertexArrayOES()},e.bindVertexArray=function(t){return r.bindVertexArrayOES(t)},e.deleteVertexArray=function(t){return r.deleteVertexArrayOES(t)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==i.webGLVersion){var n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=function(t,e){return n.vertexAttribDivisorANGLE(t,e)},e.drawElementsInstanced=function(t,e,i,r,a){return n.drawElementsInstancedANGLE(t,e,i,r,a)},e.drawArraysInstanced=function(t,e,i,r){return n.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===i.webGLVersion||!!i.extensions.uint32ElementIndex},i.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);var a=r[e.program.id]||this.initGeometryVao(t,e.program,n);this._activeGeometry=t,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(t,e.program)),this.updateBuffers()},i.prototype.reset=function(){this.unbind()},i.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var r=t.buffers[i],n=r._glBuffers[this.CONTEXT_UID];if(r._updateID!==n.updateID){n.updateID=r._updateID;var a=r.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(a,n.buffer),this._boundBuffer=n,n.byteLength>=r.data.byteLength)e.bufferSubData(a,0,r.data);else{var s=r.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=r.data.byteLength,e.bufferData(a,r.data,s)}}}},i.prototype.checkCompatibility=function(t,e){var i=t.attributes,r=e.attributeData;for(var n in r)if(!i[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},i.prototype.getSignature=function(t,e){var i=t.attributes,r=e.attributeData,n=["g",t.id];for(var a in i)r[a]&&n.push(a);return n.join("-")},i.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0),this.checkCompatibility(t,e);var r=this.gl,n=this.CONTEXT_UID,a=this.getSignature(t,e),s=t.glVertexArrayObjects[this.CONTEXT_UID],o=s[a];if(o)return s[e.id]=o,o;var h=t.buffers,l=t.attributes,u={},c={};for(var f in h)u[f]=0,c[f]=0;for(var f in l)!l[f].size&&e.attributeData[f]?l[f].size=e.attributeData[f].size:l[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),u[l[f].buffer]+=l[f].size*rr[l[f].type];for(var f in l){var p=l[f],d=p.size;void 0===p.stride&&(u[p.buffer]===d*rr[p.type]?p.stride=0:p.stride=u[p.buffer]),void 0===p.start&&(p.start=c[p.buffer],c[p.buffer]+=d*rr[p.type])}o=r.createVertexArray(),r.bindVertexArray(o);for(var _=0;_<h.length;_++){var m=h[_];m._glBuffers[n]||(m._glBuffers[n]=new ir(r.createBuffer()),this.managedBuffers[m.id]=m,m.disposeRunner.add(this)),i&&m._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=o,s[e.id]=o,s[a]=o,o},i.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},i.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),i){for(var a=0;a<n.length;a++){var s=n[a]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(n[a],e)}if(!e)for(var o in i)if("g"===o[0]){var h=i[o];this._activeVao===h&&this.unbind(),r.deleteVertexArray(h)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},i.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);for(e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.disposeBuffer(this.managedBuffers[e[i]],t)},i.prototype.activateVao=function(t,e){var i=this.gl,r=this.CONTEXT_UID,n=t.buffers,a=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[r].buffer);var s=null;for(var o in a){var h=a[o],l=n[h.buffer]._glBuffers[r];if(e.attributeData[o]){s!==l&&(i.bindBuffer(i.ARRAY_BUFFER,l.buffer),s=l);var u=e.attributeData[o].location;if(i.enableVertexAttribArray(u),i.vertexAttribPointer(u,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(u,1)}}}},i.prototype.draw=function(t,e,i,r){var n=this.gl,a=this._activeGeometry;if(a.indexBuffer){var s=a.indexBuffer.data.BYTES_PER_ELEMENT,o=2===s?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?a.instanced?n.drawElementsInstanced(t,e||a.indexBuffer.data.length,o,(i||0)*s,r||1):n.drawElements(t,e||a.indexBuffer.data.length,o,(i||0)*s):console.warn("unsupported index buffer type: uint32")}else a.instanced?n.drawArraysInstanced(t,i,e||a.getSize(),r||1):n.drawArrays(t,i,e||a.getSize());return this},i.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},i}(Ei),ar=function(){function e(e){void 0===e&&(e=null),this.type=t.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=t.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null},e.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function sr(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}function or(t,e,i,r){var n=sr(t,t.VERTEX_SHADER,e),a=sr(t,t.FRAGMENT_SHADER,i),s=t.createProgram();if(t.attachShader(s,n),t.attachShader(s,a),r)for(var o in r)t.bindAttribLocation(s,r[o],o);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(n))),t.getShaderParameter(a,t.COMPILE_STATUS)||(console.warn(i),console.error(t.getShaderInfoLog(a))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(n),t.deleteShader(a),s}function hr(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function lr(t,e){switch(t){case"float":case"int":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return hr(2*e);case"bvec3":return hr(3*e);case"bvec4":return hr(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var ur,cr={},fr=cr;function pr(){if(fr===cr||fr&&fr.isContextLost()){var e=document.createElement("canvas"),i=void 0;R.PREFER_ENV>=t.ENV.WEBGL2&&(i=e.getContext("webgl2",{})),i||((i=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?i.getExtension("WEBGL_draw_buffers"):i=null),fr=i}return fr}function dr(e,i,r){if("precision"!==e.substring(0,9)){var n=i;return i===t.PRECISION.HIGH&&r!==t.PRECISION.HIGH&&(n=t.PRECISION.MEDIUM),"precision "+n+" float;\n"+e}return r!==t.PRECISION.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var _r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mr(t){return _r[t]}var yr=null,gr={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function vr(t,e){if(!yr){var i=Object.keys(gr);yr={};for(var r=0;r<i.length;++r){var n=i[r];yr[t[n]]=gr[n]}}return yr[e]}var br,Tr=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],xr={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Pr={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Er=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Ar(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}function Sr(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var r=Er.replace(/%forloop%/gi,Ar(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}var wr=0,Dr={},Or=function(){function e(i,r,n){void 0===n&&(n="pixi-shader"),this.id=wr++,this.vertexSrc=i||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),Dr[n]?(Dr[n]++,n+="-"+Dr[n]):Dr[n]=1,this.vertexSrc="#define SHADER_NAME "+n+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+"\n"+this.fragmentSrc,this.vertexSrc=dr(this.vertexSrc,R.PRECISION_VERTEX,t.PRECISION.HIGH),this.fragmentSrc=dr(this.fragmentSrc,R.PRECISION_FRAGMENT,function(){if(!ur){ur=t.PRECISION.MEDIUM;var e=pr();if(e&&e.getShaderPrecisionFormat){var i=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);ur=i.precision?t.PRECISION.HIGH:t.PRECISION.MEDIUM}}return ur}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return e.prototype.extractData=function(t,e){var i=pr();if(i){var r=or(i,t,e);this.attributeData=this.getAttributeData(r,i),this.uniformData=this.getUniformData(r,i),i.deleteProgram(r)}else this.uniformData={},this.attributeData={}},e.prototype.getAttributeData=function(t,e){for(var i={},r=[],n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<n;a++){var s=e.getActiveAttrib(t,a),o=vr(e,s.type),h={type:o,name:s.name,size:mr(o),location:0};i[s.name]=h,r.push(h)}for(r.sort((function(t,e){return t.name>e.name?1:-1})),a=0;a<r.length;a++)r[a].location=a;return i},e.prototype.getUniformData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var a=e.getActiveUniform(t,n),s=a.name.replace(/\[.*?\]$/,""),o=a.name.match(/\[.*?\]$/),h=vr(e,a.type);i[s]={type:h,size:a.size,isArray:o,value:lr(h,a.size)}}return i},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),e.from=function(t,i,r){var n=t+i,a=se[n];return a||(se[n]=a=new e(t,i,r)),a},e}(),Ir=function(){function t(t,e){for(var i in this.program=t,this.uniformGroup=e?e instanceof zi?e:new zi(e):new zi({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var r=e.uniforms[i];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,i,r){return new t(Or.from(e,i),r)},t}(),Mr=function(){function e(){this.data=0,this.blendMode=t.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==t.BLEND_MODES.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),e.for2d=function(){var t=new e;return t.depthTest=!1,t.blend=!0,t},e}(),Cr=function(t){function e(i,r,n){var a=this,s=Or.from(i||e.defaultVertexSrc,r||e.defaultFragmentSrc);return(a=t.call(this,s,n)||this).padding=0,a.resolution=R.FILTER_RESOLUTION,a.enabled=!0,a.autoFit=!0,a.legacy=!!a.program.attributeData.aTextureCoord,a.state=new Mr,a}return li(e,t),e.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Ir),Rr=new we,Fr=function(){function t(t,e){this._texture=t,this.mapCoord=new we,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],a=t[r+1];e[r]=n*i.a+a*i.c+i.tx,e[r+1]=n*i.b+a*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(Rr.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Rr));var a=e.baseTexture,s=this.uClampFrame,o=this.clampMargin/a.resolution,h=this.clampOffset;return s[0]=(e._frame.x+o+h)/a.width,s[1]=(e._frame.y+o+h)/a.height,s[2]=(e._frame.x+e._frame.width-o+h)/a.width,s[3]=(e._frame.y+e._frame.height-o+h)/a.height,this.uClampOffset[0]=h/a.realWidth,this.uClampOffset[1]=h/a.realHeight,this.isSimple=e._frame.width===a.width&&e._frame.height===a.height&&0===e.rotate,!0},t}(),Br=function(t){function e(e){var i=this,r=new we;return i=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,i.maskSprite=e,i.maskMatrix=r,i}return li(e,t),e.prototype.apply=function(t,e,i,r){var n=this.maskSprite,a=n._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new Fr(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))},e}(Cr),Nr=function(e){function i(t){var i=e.call(this,t)||this;return i.enableScissor=!1,i.alphaMaskPool=[],i.maskDataPool=[],i.maskStack=[],i.alphaMaskIndex=0,i}return li(i,e),i.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},i.prototype.push=function(e,i){var r=i;if(!r.isMaskData){var n=this.maskDataPool.pop()||new ar;n.pooled=!0,n.maskObject=i,r=n}switch(r.autoDetect&&this.detect(r),r.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),r._target=e,r.type){case t.MASK_TYPES.SCISSOR:this.maskStack.push(r),this.renderer.scissor.push(r);break;case t.MASK_TYPES.STENCIL:this.maskStack.push(r),this.renderer.stencil.push(r);break;case t.MASK_TYPES.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r),this.maskStack.push(r)}},i.prototype.pop=function(e){var i=this.maskStack.pop();if(i&&i._target===e){switch(i.type){case t.MASK_TYPES.SCISSOR:this.renderer.scissor.pop();break;case t.MASK_TYPES.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case t.MASK_TYPES.SPRITE:this.popSpriteMask()}i.reset(),i.pooled&&this.maskDataPool.push(i)}},i.prototype.detect=function(e){var i=e.maskObject;if(i.isSprite)e.type=t.MASK_TYPES.SPRITE;else if(e.type=t.MASK_TYPES.STENCIL,this.enableScissor&&i.isFastRect&&i.isFastRect()){var r=i.worldTransform,n=Math.atan2(r.b,r.a),a=Math.atan2(r.d,r.c);n=Math.round(n*(180/Math.PI)*100),a=((a=Math.round(a*(180/Math.PI)*100)-n)%18e3+18e3)%18e3,0==(n=(n%9e3+9e3)%9e3)&&9e3===a&&(e.type=t.MASK_TYPES.SCISSOR)}},i.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new Br(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e;var n=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,r),i.filterArea=n,this.alphaMaskIndex++},i.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},i}(Ei),Lr=function(t){function e(e){var i=t.call(this,e)||this;return i.maskStack=[],i.glConst=0,i}return li(e,t),e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==i&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.maskStack=null},e}(Ei),kr=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return li(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,r=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,i?r.fit(i):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=r,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,r=i.transform,n=i.sourceFrame,a=i.destinationFrame,s=e?e.resolution:this.renderer.resolution,o=(t.x-n.x)*s+a.x,h=(t.y-n.y)*s+a.y,l=t.width*s,u=t.height*s;r&&(o+=r.tx*s,h+=r.ty*s),e||(h=this.renderer.height-u-h),this.renderer.gl.scissor(o,h,l,u)},e}(Lr),Ur=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return li(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(Lr),jr=function(t){function e(e){var i=t.call(this,e)||this;return i.destinationFrame=null,i.sourceFrame=null,i.defaultFrame=null,i.projectionMatrix=new we,i.transform=null,i}return li(e,t),e.prototype.update=function(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,i,r){var n=this.projectionMatrix,a=r?-1:1;n.identity(),n.a=1/e.width*2,n.d=a*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-a-e.y*n.d},e.prototype.setTransform=function(t){},e}(Ei),Xr=new be,Yr=new be,Gr=new be,Vr=function(t){function e(e){var i=t.call(this,e)||this;return i.clearColor=e._backgroundColorRgba,i.defaultMaskStack=[],i.current=null,i.sourceFrame=new be,i.destinationFrame=new be,i}return li(e,t),e.prototype.bind=function(t,e,i){void 0===t&&(t=null);var r,n,a,s=this.renderer;this.current=t,t?(a=(r=t.baseTexture).resolution,e||(Xr.width=t.frame.width,Xr.height=t.frame.height,e=Xr),i||(Yr.x=t.frame.x,Yr.y=t.frame.y,Yr.width=e.width,Yr.height=e.height,i=Yr),n=r.framebuffer):(a=s.resolution,e||(Xr.width=s.screen.width,Xr.height=s.screen.height,e=Xr),i||((i=Xr).width=e.width,i.height=e.height)),Gr.x=i.x*a,Gr.y=i.y*a,Gr.width=i.width*a,Gr.height=i.height*a,this.renderer.framebuffer.bind(n,Gr),this.renderer.projection.update(i,e,a,!n),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},e.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e)},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(Ei),Hr=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},t}(),zr=0,Wr={textureCount:0},qr=function(t){function e(e){var i=t.call(this,e)||this;return i.destroyed=!1,i.systemCheck(),i.gl=null,i.shader=null,i.program=null,i.cache={},i.id=zr++,i}return li(e,t),e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof br)return br;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");br=!0===t({a:"b"},"a","b")}catch(t){br=!1}return br}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(Wr.textureCount=0,this.syncUniformGroup(t.uniformGroup,Wr)),r},e.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var i=this.getglProgram();t.static&&t.dirtyId===i.uniformGroups[t.id]||(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},e.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var r in t.uniforms){var n=e[r];if(n){for(var a=t.uniforms[r],s=!1,o=0;o<Tr.length;o++)if(Tr[o].test(n,a)){i.push(Tr[o].code(r,a)),s=!0;break}if(!s){var h=(1===n.size?xr:Pr)[n.type].replace("location",'ud["'+r+'"].location');i.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+h+";")}}else t.uniforms[r].group&&i.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var i=t.uniforms,r=[];for(var n in i)r.push(n),e[n]&&r.push(e[n].type);return r.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,i=t.program,r={};for(var n in i.attributeData)r[n]=i.attributeData[n].location;var a=or(e,i.vertexSrc,i.fragmentSrc,r),s={};for(var n in i.uniformData){var o=i.uniformData[n];s[n]={location:e.getUniformLocation(a,n),value:lr(o.type,o.size)}}var h=new Hr(a,s);return i.glPrograms[this.renderer.CONTEXT_UID]=h,h},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(Ei),Zr=function(e){function i(i){var r=e.call(this,i)||this;return r.gl=null,r.stateId=0,r.polygonOffset=0,r.blendMode=t.BLEND_MODES.NONE,r._blendEq=!1,r.map=[],r.map[0]=r.setBlend,r.map[1]=r.setOffset,r.map[2]=r.setCullFace,r.map[3]=r.setDepthTest,r.map[4]=r.setFrontFace,r.checks=[],r.defaultState=new Mr,r.defaultState.blend=!0,r}return li(i,e),i.prototype.contextChange=function(e){this.gl=e,this.blendModes=function(e,i){return void 0===i&&(i=[]),i[t.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.ADD]=[e.ONE,e.ONE],i[t.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.NONE]=[0,0],i[t.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],i[t.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.SRC_IN]=[e.DST_ALPHA,e.ZERO],i[t.BLEND_MODES.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],i[t.BLEND_MODES.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],i[t.BLEND_MODES.DST_IN]=[e.ZERO,e.SRC_ALPHA],i[t.BLEND_MODES.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],i[t.BLEND_MODES.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],i[t.BLEND_MODES.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],i}(e),this.set(this.defaultState),this.reset()},i.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},i.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},i.prototype.setBlend=function(t){this.updateCheck(i.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},i.prototype.setOffset=function(t){this.updateCheck(i.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},i.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},i.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},i.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},i.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},i.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},i.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},i.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},i.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},i.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},i}(Ei),Kr=function(e){function i(t){var i=e.call(this,t)||this;return i.count=0,i.checkCount=0,i.maxIdle=R.GC_MAX_IDLE,i.checkCountMax=R.GC_MAX_CHECK_COUNT,i.mode=R.GC_MODE,i}return li(i,e),i.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==t.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},i.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){var a=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[a++]=e[r]);e.length=a}},i.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},i}(Ei),Qr=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},Jr=function(e){function i(t){var i=e.call(this,t)||this;return i.boundTextures=[],i.currentLocation=-1,i.managedTextures=[],i._unknownBoundTextures=!1,i.unknownTexture=new pi,i}return li(i,e),i.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var r=new Qr(t.createTexture());for(t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Qr(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture),i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);for(t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),i=0;i<this.boundTextures.length;i++)this.bind(null,i)},i.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},i.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},i.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)},i.prototype.initTexture=function(t){var e=new Qr(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},i.prototype.initTextureType=function(e,i){if(i.internalFormat=e.format,i.type=e.type,2===this.webGLVersion){var r=this.renderer.gl;e.type===r.FLOAT&&e.format===r.RGBA&&(i.internalFormat=r.RGBA32F),e.type===t.TYPES.HALF_FLOAT&&(i.type=r.HALF_FLOAT),i.type===r.HALF_FLOAT&&e.format===r.RGBA&&(i.internalFormat=r.RGBA16F)}},i.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e));else{var r=t.realWidth,n=t.realHeight,a=i.gl;(e.width!==r||e.height!==n||e.dirtyId<0)&&(e.width=r,e.height=n,a.texImage2D(t.target,0,e.internalFormat,r,n,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},i.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&te(this.managedTextures,r,1)}},i.prototype.updateTextureStyle=function(e){var i=e._glTextures[this.CONTEXT_UID];i&&(e.mipmap!==t.MIPMAP_MODES.POW2&&2===this.webGLVersion||e.isPowerOfTwo?i.mipmap=e.mipmap>=1:i.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?i.wrapMode=e.wrapMode:i.wrapMode=t.WRAP_MODES.CLAMP,e.resource&&e.resource.style(this.renderer,e,i)||this.setStyle(e,i),i.dirtyStyleId=e.dirtyStyleId)},i.prototype.setStyle=function(e,i){var r=this.gl;if(i.mipmap&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,i.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===t.SCALE_MODES.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&e.anisotropicLevel>0&&e.scaleMode===t.SCALE_MODES.LINEAR){var a=Math.min(e.anisotropicLevel,r.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===t.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===t.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST)},i}(Ei),$r={FilterSystem:qi,BatchSystem:Ki,ContextSystem:Ji,FramebufferSystem:er,GeometrySystem:nr,MaskSystem:Nr,ScissorSystem:kr,StencilSystem:Ur,ProjectionSystem:jr,RenderTextureSystem:Vr,ShaderSystem:qr,StateSystem:Zr,TextureGCSystem:Kr,TextureSystem:Jr},tn=new we,en=function(e){function i(i,r){void 0===i&&(i=t.RENDERER_TYPE.UNKNOWN);var n=e.call(this)||this;return(r=Object.assign({},R.RENDER_OPTIONS,r)).roundPixels&&(R.ROUND_PIXELS=r.roundPixels,ae("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),n.options=r,n.type=i,n.screen=new be(0,0,r.width,r.height),n.view=r.view||document.createElement("canvas"),n.resolution=r.resolution||R.RESOLUTION,n.transparent=r.transparent,n.autoDensity=r.autoDensity||r.autoResize||!1,n.preserveDrawingBuffer=r.preserveDrawingBuffer,n.clearBeforeRender=r.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,0],n._backgroundColorString="#000000",n.backgroundColor=r.backgroundColor||n._backgroundColor,n._lastObjectRendered=null,n.plugins={},n}return li(i,e),i.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(i.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),i.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},i.prototype.generateTexture=function(t,e,i,r){0===(r=r||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var n=Ci.create({width:0|r.width,height:0|r.height,scaleMode:e,resolution:i});return tn.tx=-r.x,tn.ty=-r.y,this.render(t,n,!1,tn,!!t.parent),n},i.prototype.destroy=function(e){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=t.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(i.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Xt(t),jt(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),i}(F),rn=function(e){function i(r){var n=e.call(this,t.RENDERER_TYPE.WEBGL,r)||this;return r=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new ai("destroy"),contextChange:new ai("contextChange"),reset:new ai("reset"),update:new ai("update"),postrender:new ai("postrender"),prerender:new ai("prerender"),resize:new ai("resize")},n.globalUniforms=new zi({projectionMatrix:new we},!0),n.addSystem(Nr,"mask").addSystem(Ji,"context").addSystem(Zr,"state").addSystem(qr,"shader").addSystem(Jr,"texture").addSystem(nr,"geometry").addSystem(er,"framebuffer").addSystem(kr,"scissor").addSystem(Ur,"stencil").addSystem(jr,"projection").addSystem(Kr,"textureGC").addSystem(qi,"filter").addSystem(Vr,"renderTexture").addSystem(Ki,"batch"),n.initPlugins(i.__plugins),r.context?n.context.initFromContext(r.context):n.context.initFromOptions({alpha:!!n.transparent,antialias:r.antialias,premultipliedAlpha:n.transparent&&"notMultiplied"!==n.transparent,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,kt(2===n.context.webGLVersion?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return li(i,e),i.create=function(t){if(Ut())return new i(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},i.prototype.addSystem=function(t,e){e||(e=t.name);var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=i,this.runners)this.runners[r].add(i);return this},i.prototype.render=function(t,e,i,r,n){if(this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=r,!this.context.isLost){if(e||(this._lastObjectRendered=t),!n){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},i.prototype.resize=function(t,i){e.prototype.resize.call(this,t,i),this.runners.resize.emit(t,i)},i.prototype.reset=function(){return this.runners.reset.emit(),this},i.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},i.prototype.destroy=function(t){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();e.prototype.destroy.call(this,t),this.gl=null},i.registerPlugin=function(t,e){i.__plugins=i.__plugins||{},i.__plugins[t]=e},i}(en);function nn(t){return rn.create(t)}var an="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",sn="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",on=function(){this.texArray=null,this.blend=0,this.type=t.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null},hn=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),ln=function(){function t(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),un=function(e){function i(t){var i=e.call(this,t)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Mr.for2d(),i.size=4*R.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),t.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return li(i,e),i.prototype.contextChange=function(){var e=this.renderer.gl;R.PREFER_ENV===t.ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),R.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Sr(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},i.prototype.initFlushBuffers=function(){for(var t=i._drawCallPool,e=i._textureArrayPool,r=this.size/4,n=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new on);for(;e.length<n;)e.push(new hn);for(var a=0;a<this.MAX_TEXTURES;a++)this._tempBoundTextures[a]=null},i.prototype.onPrerender=function(){this._flushId=0},i.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},i.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,r=i._textureArrayPool,n=this.renderer.batch,a=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++pi._globalBatch,h=0,l=r[0],u=0;n.copyBoundTextures(a,e);for(var c=0;c<this._bufferSize;++c){var f=t[c];t[c]=null,f._batchEnabled!==o&&(l.count>=e&&(n.boundArray(l,a,o,e),this.buildDrawCalls(l,u,c),u=c,l=r[++h],++o),f._batchEnabled=o,f.touched=s,l.elements[l.count++]=f)}for(l.count>0&&(n.boundArray(l,a,o,e),this.buildDrawCalls(l,u,this._bufferSize),++h,++o),c=0;c<a.length;c++)a[c]=null;pi._globalBatch=o},i.prototype.buildDrawCalls=function(t,e,r){var n=this._bufferedElements,a=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,h=i._drawCallPool,l=this._dcIndex,u=this._aIndex,c=this._iIndex,f=h[l];f.start=this._iIndex,f.texArray=t;for(var p=e;p<r;++p){var d=n[p],_=d._texture.baseTexture,m=Gt[_.alphaMode?1:0][d.blendMode];n[p]=null,e<p&&f.blend!==m&&(f.size=c-f.start,e=p,(f=h[++l]).texArray=t,f.start=c),this.packInterleavedGeometry(d,a,s,u,c),u+=d.vertexData.length/2*o,c+=d.indices.length,f.blend=m}e<r&&(f.size=c-f.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=c},i.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},i.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;R.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},i.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,r=e.gl,n=e.state,a=i._drawCallPool,s=null,o=0;o<t;o++){var h=a[o],l=h.texArray,u=h.type,c=h.size,f=h.start,p=h.blend;s!==l&&(s=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,n.set(this.state),r.drawElements(u,c,r.UNSIGNED_SHORT,2*f)}},i.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},i.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),R.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},i.prototype.stop=function(){this.flush()},i.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},i.prototype.getAttributeBuffer=function(t){var e=Qt(Math.ceil(t/8)),i=$t(e),r=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new ln(r*this.vertexSize*4)),n},i.prototype.getIndexBuffer=function(t){var e=Qt(Math.ceil(t/12)),i=$t(e),r=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n},i.prototype.packInterleavedGeometry=function(t,e,i,r,n){for(var a=e.uint32View,s=e.float32View,o=r/this.vertexSize,h=t.uvs,l=t.indices,u=t.vertexData,c=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?zt(t._tintRGB,f):t._tintRGB+(255*f<<24),d=0;d<u.length;d+=2)s[r++]=u[d],s[r++]=u[d+1],s[r++]=h[d],s[r++]=h[d+1],a[r++]=p,s[r++]=c;for(d=0;d<l.length;d++)i[n++]=o+l[d]},i._drawCallPool=[],i._textureArrayPool=[],i}(Zi),cn=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=zi.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Or(this.vertexSrc,r)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new we,default:this.defaultGroupCache[t]};return new Ir(this.programCache[t],n)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"},t}(),fn=function(e){function i(i){void 0===i&&(i=!1);var r=e.call(this)||this;return r._buffer=new Ni(null,i,!1),r._indexBuffer=new Ni(null,i,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,t.TYPES.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,t.TYPES.FLOAT).addAttribute("aColor",r._buffer,4,!0,t.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,t.TYPES.FLOAT).addIndex(r._indexBuffer),r}return li(i,e),i}(Yi),pn="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",dn="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",_n=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:pn,fragment:dn,geometryClass:fn,vertexSize:6},t),i=e.vertex,r=e.fragment,n=e.vertexSize,a=e.geometryClass;return function(t){function e(e){var s=t.call(this,e)||this;return s.shaderGenerator=new cn(i,r),s.geometryClass=a,s.vertexSize=n,s}return li(e,t),e}(un)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return pn},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return dn},enumerable:!1,configurable:!0}),t}(),mn=_n.create(),yn=function(){function t(e){var i=this;e=Object.assign({forceCanvas:!1},e),this.renderer=nn(e),this.stage=new Ge,t._plugins.forEach((function(t){t.init.call(i,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,i){var r=this,n=t._plugins.slice(0);n.reverse(),n.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null},t}();yn._plugins=[];var gn=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,i;if(e.cancelResize(),e._resizeTo===window)t=window.innerWidth,i=window.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,i=r.clientHeight}e.renderer.resize(t,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){window.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();yn.registerPlugin(gn);var vn=new be,bn=function(){function t(t){this.renderer=t,t.extract=this}return t.prototype.image=function(t,e,i){var r=new Image;return r.src=this.base64(t,e,i),r},t.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},t.prototype.canvas=function(e){var i,r,n,a=this.renderer,s=!1,o=!1;e&&(e instanceof Ci?n=e:(n=this.renderer.generateTexture(e),o=!0)),n?(i=n.baseTexture.resolution,r=n.frame,s=!1,a.renderTexture.bind(n)):(i=this.renderer.resolution,s=!0,(r=vn).width=this.renderer.width,r.height=this.renderer.height,a.renderTexture.bind(null));var h=Math.floor(r.width*i+1e-4),l=Math.floor(r.height*i+1e-4),u=new le(h,l,1),c=new Uint8Array(4*h*l),f=a.gl;f.readPixels(r.x*i,r.y*i,h,l,f.RGBA,f.UNSIGNED_BYTE,c);var p=u.context.getImageData(0,0,h,l);if(t.arrayPostDivide(c,p.data),u.context.putImageData(p,0,0),s){var d=new le(u.width,u.height,1);d.context.scale(1,-1),d.context.drawImage(u.canvas,0,-l),u.destroy(),u=d}return o&&n.destroy(!0),u.canvas},t.prototype.pixels=function(e){var i,r,n,a=this.renderer,s=!1;e&&(e instanceof Ci?n=e:(n=this.renderer.generateTexture(e),s=!0)),n?(i=n.baseTexture.resolution,r=n.frame,a.renderTexture.bind(n)):(i=a.resolution,(r=vn).width=a.width,r.height=a.height,a.renderTexture.bind(null));var o=r.width*i,h=r.height*i,l=new Uint8Array(4*o*h),u=a.gl;return u.readPixels(r.x*i,r.y*i,o,h,u.RGBA,u.UNSIGNED_BYTE,l),s&&n.destroy(!0),t.arrayPostDivide(l,l),l},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var r=e[i+3]=t[i+3];0!==r?(e[i]=Math.round(Math.min(255*t[i]/r,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/r,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/r,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},t}(),Tn=function(t,e){if(void 0===e&&(e={}),t){for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},a=14;a--;)n[i.key[a]]=r[a]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,(function(t,e,r){e&&(n[i.q.name][e]=r)})),n}},xn=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(n((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(e,i,n){void 0===i&&(i=!1),r(this,t),this._fn=e,this._once=i,this._thisArg=n,this._next=this._prev=this._owner=null}return i(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function a(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var s=function(){function t(){r(this,t),this._head=this._tail=void 0}return i(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof n))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=arguments,e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,t),e=e._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return a(this,new n(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return a(this,new n(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof n))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();s.MiniSignalBinding=n,e.default=s,t.exports=e.default})));function Pn(){}function En(t,e,i,r){var n=0,a=t.length;!function s(o){o||n===a?i&&i(o):r?setTimeout((function(){e(t[n++],s)}),1):e(t[n++],s)}()}function An(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}var Sn={};function wn(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dn(t,e,i){return e&&wn(t.prototype,e),i&&wn(t,i),t}var On=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),In=null;function Mn(){}var Cn=function(){function t(e,i,r){if("string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Mn,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new xn,this.onProgress=new xn,this.onComplete=new xn,this.onAfterMiddleware=new xn}t.setExtensionLoadType=function(e,i){Rn(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){Rn(t._xhrTypeMap,e,i)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:On&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},e._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=i,r},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(Fn(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){var t=this.xhr;this.abort(Fn(t)+" Request timed out.")},e._xhrOnAbort=function(){var t=this.xhr;this.abort(Fn(t)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,i="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===r&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var a=document.createElement("div");a.innerHTML=i,this.data=a}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,In||(In=document.createElement("a")),In.href=t;var i=!(t=Tn(In.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&r===e.protocol?"":"anonymous"},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),a=Math.min(r>-1?r:t.length,n>-1?n:t.length);e=(t=t.substring(0,a)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Dn(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function Rn(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function Fn(t){return t.toString().replace("object ","")}Cn.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Cn.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Cn.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Cn.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Cn._loadTypeMap={gif:Cn.LOAD_TYPE.IMAGE,png:Cn.LOAD_TYPE.IMAGE,bmp:Cn.LOAD_TYPE.IMAGE,jpg:Cn.LOAD_TYPE.IMAGE,jpeg:Cn.LOAD_TYPE.IMAGE,tif:Cn.LOAD_TYPE.IMAGE,tiff:Cn.LOAD_TYPE.IMAGE,webp:Cn.LOAD_TYPE.IMAGE,tga:Cn.LOAD_TYPE.IMAGE,svg:Cn.LOAD_TYPE.IMAGE,"svg+xml":Cn.LOAD_TYPE.IMAGE,mp3:Cn.LOAD_TYPE.AUDIO,ogg:Cn.LOAD_TYPE.AUDIO,wav:Cn.LOAD_TYPE.AUDIO,mp4:Cn.LOAD_TYPE.VIDEO,webm:Cn.LOAD_TYPE.VIDEO},Cn._xhrTypeMap={xhtml:Cn.XHR_RESPONSE_TYPE.DOCUMENT,html:Cn.XHR_RESPONSE_TYPE.DOCUMENT,htm:Cn.XHR_RESPONSE_TYPE.DOCUMENT,xml:Cn.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Cn.XHR_RESPONSE_TYPE.DOCUMENT,svg:Cn.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Cn.XHR_RESPONSE_TYPE.DOCUMENT,gif:Cn.XHR_RESPONSE_TYPE.BLOB,png:Cn.XHR_RESPONSE_TYPE.BLOB,bmp:Cn.XHR_RESPONSE_TYPE.BLOB,jpg:Cn.XHR_RESPONSE_TYPE.BLOB,jpeg:Cn.XHR_RESPONSE_TYPE.BLOB,tif:Cn.XHR_RESPONSE_TYPE.BLOB,tiff:Cn.XHR_RESPONSE_TYPE.BLOB,webp:Cn.XHR_RESPONSE_TYPE.BLOB,tga:Cn.XHR_RESPONSE_TYPE.BLOB,json:Cn.XHR_RESPONSE_TYPE.JSON,text:Cn.XHR_RESPONSE_TYPE.TEXT,txt:Cn.XHR_RESPONSE_TYPE.TEXT,ttf:Cn.XHR_RESPONSE_TYPE.BUFFER,otf:Cn.XHR_RESPONSE_TYPE.BUFFER},Cn.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Bn=window.URL||window.webkitURL,Nn={caching:function(t,e){var i=this;Sn[t.url]?(t.data=Sn[t.url],t.complete()):t.onComplete.once((function(){return Sn[i.url]=i.data})),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===Cn.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=Bn.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=Cn.TYPE.IMAGE,void(t.data.onload=function(){Bn.revokeObjectURL(i),t.data.onload=null,e()})}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],n=[0,0,0,0],a=0;a<r.length;++a)i<t.length?r[a]=255&t.charCodeAt(i++):r[a]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var s=0;s<n.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[s])}return e}(t.xhr.responseText),t.type=Cn.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},Ln=/(#[\w-]+)?$/,kn=function(){function t(e,i){var r=this;void 0===e&&(e=""),void 0===i&&(i=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,r={_tasks:[],concurrency:e,saturated:Pn,unsaturated:Pn,buffer:e/4,empty:Pn,drain:Pn,error:Pn,started:!1,paused:!1,push:function(t,e){n(t,!1,e)},kill:function(){i=0,r.drain=Pn,r.started=!1,r._tasks=[]},unshift:function(t,e){n(t,!0,e)},process:function(){for(;!r.paused&&i<r.concurrency&&r._tasks.length;){var e=r._tasks.shift();0===r._tasks.length&&r.empty(),(i+=1)===r.concurrency&&r.saturated(),t(e.data,An(a(e)))}},length:function(){return r._tasks.length},running:function(){return i},idle:function(){return r._tasks.length+i===0},pause:function(){!0!==r.paused&&(r.paused=!0)},resume:function(){if(!1!==r.paused){r.paused=!1;for(var t=1;t<=r.concurrency;t++)r.process()}}};function n(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(r.started=!0,null==t&&r.idle())setTimeout((function(){return r.drain()}),1);else{var n={data:t,callback:"function"==typeof i?i:Pn};e?r._tasks.unshift(n):r._tasks.push(n),setTimeout((function(){return r.process()}),1)}}function a(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&r.error(arguments[0],t.data),i<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}return r}(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new xn,this.onError=new xn,this.onLoad=new xn,this.onStart=new xn,this.onComplete=new xn;for(var n=0;n<t._defaultBeforeMiddleware.length;++n)this.pre(t._defaultBeforeMiddleware[n]);for(var a=0;a<t._defaultAfterMiddleware.length;++a)this.use(t._defaultAfterMiddleware[a])}var e=t.prototype;return e.add=function(t,e,i,n){if(Array.isArray(t)){for(var a=0;a<t.length;++a)this.add(t[a]);return this}if("object"==r(t)&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new Cn(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,o=[],h=0;h<s.children.length;++h)s.children[h].isComplete||o.push(s.children[h]);var l=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=l;for(var u=0;u<o.length;++u)o[u].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,i=Tn(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=Ln.exec(e)[0];-1!==(e=e.substr(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},e._loadResource=function(t,e){var i=this;t._dequeue=e,En(this._beforeMiddleware,(function(e,r){e.call(i,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),En(this._afterMiddleware,(function(i,r){i.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},Dn(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();kn._defaultBeforeMiddleware=[],kn._defaultAfterMiddleware=[],kn.pre=function(t){return kn._defaultBeforeMiddleware.push(t),kn},kn.use=function(t){return kn._defaultAfterMiddleware.push(t),kn};var Un=Cn,jn=function(t,e){return(jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},Xn=function(){function t(){}return t.use=function(t,e){t.data&&t.type===Cn.TYPE.IMAGE&&(t.texture=Ii.fromLoader(t.data,t.url,t.name)),e()},t}(),Yn=function(t){function e(i,r){for(var n=t.call(this,i,r)||this,a=0;a<e._plugins.length;++a){var s=e._plugins[a],o=s.pre,h=s.use;o&&n.pre(o),h&&n.use(h)}return n._protected=!1,n}return function(t,e){function i(){this.constructor=t}jn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}(kn);Yn.registerPlugin({use:Nn.parsing}),Yn.registerPlugin(Xn);var Gn=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Yn.shared:new Yn},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),Vn=function(t,e){return(Vn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Hn(t,e){function i(){this.constructor=t}Vn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var zn,Wn,qn=function(e){function i(i,r,n,a){void 0===i&&(i=1500),void 0===n&&(n=16384),void 0===a&&(a=!1);var s=e.call(this)||this;return n>16384&&(n=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=i,s._batchSize=n,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=t.BLEND_MODES.NORMAL,s.autoResize=a,s.roundPixels=!0,s.baseTexture=null,s.setProperties(r),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return Hn(i,e),i.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},i.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,jt(t,this.tintRgb)},enumerable:!1,configurable:!0}),i.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},i.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},i.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},i}(Ge),Zn=function(){function e(e,i,r){this.geometry=new Yi,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<e.length;++n){var a=e[n];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||t.TYPES.FLOAT,offset:a.offset},i[n]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.geometry,i=0;this.indexBuffer=new Ni(qt(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r)(o=this.dynamicProperties[r]).offset=i,i+=o.size,this.dynamicStride+=o.size;var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Ni(this.dynamicData,!1,!1);var a=0;for(this.staticStride=0,r=0;r<this.staticProperties.length;++r)(o=this.staticProperties[r]).offset=a,a+=o.size,this.staticStride+=o.size;var s=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Ni(this.staticData,!0,!1),r=0;r<this.dynamicProperties.length;++r){var o=this.dynamicProperties[r];e.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===t.TYPES.UNSIGNED_BYTE,o.type,4*this.dynamicStride,4*o.offset)}for(r=0;r<this.staticProperties.length;++r)o=this.staticProperties[r],e.addAttribute(o.attributeName,this.staticBuffer,0,o.type===t.TYPES.UNSIGNED_BYTE,o.type,4*this.staticStride,4*o.offset)},e.prototype.uploadDynamic=function(e,i,r){for(var n=0;n<this.dynamicProperties.length;n++){var a=this.dynamicProperties[n];a.uploadFunction(e,i,r,a.type===t.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(e,i,r){for(var n=0;n<this.staticProperties.length;n++){var a=this.staticProperties[n];a.uploadFunction(e,i,r,a.type===t.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),Kn=function(e){function i(i){var r=e.call(this,i)||this;return r.shader=null,r.properties=null,r.tempMatrix=new we,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:t.TYPES.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=Ir.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=Mr.for2d(),r}return Hn(i,e),i.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,n=this.renderer,a=e.length;if(0!==a){a>i&&!t.autoResize&&(a=i);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var o=e[0]._texture.baseTexture;this.state.blendMode=Vt(t.blendMode,o.alphaMode),n.state.set(this.state);var h=n.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=Ht(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,o.alphaMode),this.shader.uniforms.uSampler=o,this.renderer.shader.bind(this.shader);for(var u=!1,c=0,f=0;c<a;c+=r,f+=1){var p=a-c;p>r&&(p=r),f>=s.length&&s.push(this._generateOneMoreBuffer(t));var d=s[f];d.uploadDynamic(e,c,p);var _=t._bufferUpdateIDs[f]||0;(u=u||d._updateID<_)&&(d._updateID=t._updateID,d.uploadStatic(e,c,p)),n.geometry.bind(d.geometry),h.drawElements(h.TRIANGLES,6*p,h.UNSIGNED_SHORT,0)}}},i.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,r=t._batchSize,n=t._properties,a=0;a<i;a+=r)e.push(new Zn(this.properties,n,r));return e},i.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new Zn(this.properties,i,e)},i.prototype.uploadVertices=function(t,e,i,r,n,a){for(var s=0,o=0,h=0,l=0,u=0;u<i;++u){var c=t[e+u],f=c._texture,p=c.scale.x,d=c.scale.y,_=f.trim,m=f.orig;_?(s=(o=_.x-c.anchor.x*m.width)+_.width,h=(l=_.y-c.anchor.y*m.height)+_.height):(s=m.width*(1-c.anchor.x),o=m.width*-c.anchor.x,h=m.height*(1-c.anchor.y),l=m.height*-c.anchor.y),r[a]=o*p,r[a+1]=l*d,r[a+n]=s*p,r[a+n+1]=l*d,r[a+2*n]=s*p,r[a+2*n+1]=h*d,r[a+3*n]=o*p,r[a+3*n+1]=h*d,a+=4*n}},i.prototype.uploadPosition=function(t,e,i,r,n,a){for(var s=0;s<i;s++){var o=t[e+s].position;r[a]=o.x,r[a+1]=o.y,r[a+n]=o.x,r[a+n+1]=o.y,r[a+2*n]=o.x,r[a+2*n+1]=o.y,r[a+3*n]=o.x,r[a+3*n+1]=o.y,a+=4*n}},i.prototype.uploadRotation=function(t,e,i,r,n,a){for(var s=0;s<i;s++){var o=t[e+s].rotation;r[a]=o,r[a+n]=o,r[a+2*n]=o,r[a+3*n]=o,a+=4*n}},i.prototype.uploadUvs=function(t,e,i,r,n,a){for(var s=0;s<i;++s){var o=t[e+s]._texture._uvs;o?(r[a]=o.x0,r[a+1]=o.y0,r[a+n]=o.x1,r[a+n+1]=o.y1,r[a+2*n]=o.x2,r[a+2*n+1]=o.y2,r[a+3*n]=o.x3,r[a+3*n+1]=o.y3,a+=4*n):(r[a]=0,r[a+1]=0,r[a+n]=0,r[a+n+1]=0,r[a+2*n]=0,r[a+2*n+1]=0,r[a+3*n]=0,r[a+3*n+1]=0,a+=4*n)}},i.prototype.uploadTint=function(t,e,i,r,n,a){for(var s=0;s<i;++s){var o=t[e+s],h=o._texture.baseTexture.alphaMode>0,l=o.alpha,u=l<1&&h?zt(o._tintRGB,l):o._tintRGB+(255*l<<24);r[a]=u,r[a+n]=u,r[a+2*n]=u,r[a+3*n]=u,a+=4*n}},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},i}(Zi);(zn=t.LINE_JOIN||(t.LINE_JOIN={})).MITER="miter",zn.BEVEL="bevel",zn.ROUND="round",(Wn=t.LINE_CAP||(t.LINE_CAP={})).BUTT="butt",Wn.ROUND="round",Wn.SQUARE="square";var Qn={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},Jn=function(){function t(){this.color=16777215,this.alpha=1,this.texture=Ii.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ii.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),$n=function(t,e){return($n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function ta(t,e){function i(){this.constructor=t}$n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var ea={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,r=t.holes,n=e.points,a=e.indices;if(i.length>=6){for(var s=[],o=0;o<r.length;o++){var h=r[o];s.push(i.length/2),i=i.concat(h.points)}var l=B(i,s,2);if(!l)return;var u=n.length/2;for(o=0;o<l.length;o+=3)a.push(l[o]+u),a.push(l[o+1]+u),a.push(l[o+2]+u);for(o=0;o<i.length;o++)n.push(i[o])}}},ia={build:function(e){var i,r,n=e.shape,a=e.points,s=n.x,o=n.y;if(a.length=0,e.type===t.SHAPES.CIRC)i=n.radius,r=n.radius;else{var h=e.shape;i=h.width,r=h.height}if(0!==i&&0!==r){var l=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(i+r));l/=2.3;for(var u=2*Math.PI/l,c=0;c<l-.5;c++)a.push(s+Math.sin(-u*c)*i,o+Math.cos(-u*c)*r);a.push(a[0],a[1])}},triangulate:function(t,e){var i=t.points,r=e.points,n=e.indices,a=r.length/2,s=a,o=t.shape,h=t.matrix,l=o.x,u=o.y;r.push(t.matrix?h.a*l+h.c*u+h.tx:l,t.matrix?h.b*l+h.d*u+h.ty:u);for(var c=0;c<i.length;c+=2)r.push(i[c],i[c+1]),n.push(a++,s,a)}},ra={build:function(t){var e=t.shape,i=e.x,r=e.y,n=e.width,a=e.height,s=t.points;s.length=0,s.push(i,r,i+n,r,i+n,r+a,i,r+a)},triangulate:function(t,e){var i=t.points,r=e.points,n=r.length/2;r.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function na(t,e,i){return t+(e-t)*i}function aa(t,e,i,r,n,a,s){void 0===s&&(s=[]);for(var o=s,h=0,l=0,u=0,c=0,f=0,p=0,d=0,_=0;d<=20;++d)h=na(t,i,_=d/20),l=na(e,r,_),u=na(i,n,_),c=na(r,a,_),f=na(h,u,_),p=na(l,c,_),o.push(f,p);return o}var sa={build:function(t){var e=t.shape,i=t.points,r=e.x,n=e.y,a=e.width,s=e.height,o=Math.max(0,Math.min(e.radius,Math.min(a,s)/2));i.length=0,o?(aa(r,n+o,r,n,r+o,n,i),aa(r+a-o,n,r+a,n,r+a,n+o,i),aa(r+a,n+s-o,r+a,n+s,r+a-o,n+s,i),aa(r+o,n+s,r,n+s,r,n+s-o,i)):i.push(r,n,r+a,n,r+a,n+s,r,n+s)},triangulate:function(t,e){for(var i=t.points,r=e.points,n=e.indices,a=r.length/2,s=B(i,null,2),o=0,h=s.length;o<h;o+=3)n.push(s[o]+a),n.push(s[o+1]+a),n.push(s[o+2]+a);for(o=0,h=i.length;o<h;o++)r.push(i[o],i[++o])}};function oa(t,e,i,r,n,a,s,o){var h,l;s?(h=r,l=-i):(h=-r,l=i);var u=t-i*n+h,c=e-r*n+l,f=t+i*a+h,p=e+r*a+l;return o.push(u,c),o.push(f,p),2}function ha(t,e,i,r,n,a,s,o){var h=i-t,l=r-e,u=Math.atan2(h,l),c=Math.atan2(n-t,a-e);o&&u<c?u+=2*Math.PI:!o&&u>c&&(c+=2*Math.PI);var f=u,p=c-u,d=Math.abs(p),_=Math.sqrt(h*h+l*l),m=1+(15*d*Math.sqrt(_)/Math.PI>>0),y=p/m;if(f+=y,o){s.push(t,e),s.push(i,r);for(var g=1,v=f;g<m;g++,v+=y)s.push(t,e),s.push(t+Math.sin(v)*_,e+Math.cos(v)*_);s.push(t,e),s.push(n,a)}else{for(s.push(i,r),s.push(t,e),g=1,v=f;g<m;g++,v+=y)s.push(t+Math.sin(v)*_,e+Math.cos(v)*_),s.push(t,e);s.push(n,a),s.push(t,e)}return 2*m}function la(e,i){e.lineStyle.native?function(e,i){var r=0,n=e.shape,a=e.points||n.points,s=n.type!==t.SHAPES.POLY||n.closeStroke;if(0!==a.length){var o=i.points,h=i.indices,l=a.length/2,u=o.length/2,c=u;for(o.push(a[0],a[1]),r=1;r<l;r++)o.push(a[2*r],a[2*r+1]),h.push(c,c+1),c++;s&&h.push(c,u)}}(e,i):function(e,i){var r=e.shape,n=e.points||r.points.slice(),a=i.closePointEps;if(0!==n.length){var s=e.lineStyle,o=new Ae(n[0],n[1]),h=new Ae(n[n.length-2],n[n.length-1]),l=r.type!==t.SHAPES.POLY||r.closeStroke,u=Math.abs(o.x-h.x)<a&&Math.abs(o.y-h.y)<a;if(l){n=n.slice(),u&&(n.pop(),n.pop(),h.set(n[n.length-2],n[n.length-1]));var c=.5*(o.x+h.x),f=.5*(h.y+o.y);n.unshift(c,f),n.push(c,f)}var p=i.points,d=n.length/2,_=n.length,m=p.length/2,y=s.width/2,g=y*y,v=s.miterLimit*s.miterLimit,b=n[0],T=n[1],x=n[2],P=n[3],E=0,A=0,S=-(T-P),w=b-x,D=0,O=0,I=Math.sqrt(S*S+w*w);S/=I,w/=I,S*=y,w*=y;var M=s.alignment,C=2*(1-M),R=2*M;l||(s.cap===t.LINE_CAP.ROUND?_+=ha(b-S*(C-R)*.5,T-w*(C-R)*.5,b-S*C,T-w*C,b+S*R,T+w*R,p,!0)+2:s.cap===t.LINE_CAP.SQUARE&&(_+=oa(b,T,S,w,C,R,!0,p))),p.push(b-S*C,T-w*C),p.push(b+S*R,T+w*R);for(var F=1;F<d-1;++F){b=n[2*(F-1)],T=n[2*(F-1)+1],x=n[2*F],P=n[2*F+1],E=n[2*(F+1)],A=n[2*(F+1)+1],S=-(T-P),w=b-x,S/=I=Math.sqrt(S*S+w*w),w/=I,S*=y,w*=y,D=-(P-A),O=x-E,D/=I=Math.sqrt(D*D+O*O),O/=I,D*=y,O*=y;var B=x-b,N=T-P,L=x-E,k=A-P,U=N*L-k*B,j=U<0;if(Math.abs(U)<.1)p.push(x-S*C,P-w*C),p.push(x+S*R,P+w*R);else{var X=(-S+b)*(-w+P)-(-S+x)*(-w+T),Y=(-D+E)*(-O+P)-(-D+x)*(-O+A),G=(B*Y-L*X)/U,V=(k*X-N*Y)/U,H=(G-x)*(G-x)+(V-P)*(V-P),z=x+(G-x)*C,W=P+(V-P)*C,q=x-(G-x)*R,Z=P-(V-P)*R,K=j?C:R;H<=Math.min(B*B+N*N,L*L+k*k)+K*K*g?s.join===t.LINE_JOIN.BEVEL||H/g>v?(j?(p.push(z,W),p.push(x+S*R,P+w*R),p.push(z,W),p.push(x+D*R,P+O*R)):(p.push(x-S*C,P-w*C),p.push(q,Z),p.push(x-D*C,P-O*C),p.push(q,Z)),_+=2):s.join===t.LINE_JOIN.ROUND?j?(p.push(z,W),p.push(x+S*R,P+w*R),_+=ha(x,P,x+S*R,P+w*R,x+D*R,P+O*R,p,!0)+4,p.push(z,W),p.push(x+D*R,P+O*R)):(p.push(x-S*C,P-w*C),p.push(q,Z),_+=ha(x,P,x-S*C,P-w*C,x-D*C,P-O*C,p,!1)+4,p.push(x-D*C,P-O*C),p.push(q,Z)):(p.push(z,W),p.push(q,Z)):(p.push(x-S*C,P-w*C),p.push(x+S*R,P+w*R),s.join===t.LINE_JOIN.BEVEL||H/g>v||(s.join===t.LINE_JOIN.ROUND?_+=j?ha(x,P,x+S*R,P+w*R,x+D*R,P+O*R,p,!0)+2:ha(x,P,x-S*C,P-w*C,x-D*C,P-O*C,p,!1)+2:(j?(p.push(q,Z),p.push(q,Z)):(p.push(z,W),p.push(z,W)),_+=2)),p.push(x-D*C,P-O*C),p.push(x+D*R,P+O*R),_+=2)}}b=n[2*(d-2)],T=n[2*(d-2)+1],x=n[2*(d-1)],S=-(T-(P=n[2*(d-1)+1])),w=b-x,S/=I=Math.sqrt(S*S+w*w),w/=I,S*=y,w*=y,p.push(x-S*C,P-w*C),p.push(x+S*R,P+w*R),l||(s.cap===t.LINE_CAP.ROUND?_+=ha(x-S*(C-R)*.5,P-w*(C-R)*.5,x-S*C,P-w*C,x+S*R,P+w*R,p,!1)+2:s.cap===t.LINE_CAP.SQUARE&&(_+=oa(x,P,S,w,C,R,!1,p)));var Q=i.indices,J=Qn.epsilon*Qn.epsilon;for(F=m;F<_+m-2;++F)b=p[2*F],T=p[2*F+1],x=p[2*(F+1)],P=p[2*(F+1)+1],E=p[2*(F+2)],A=p[2*(F+2)+1],Math.abs(b*(P-A)+x*(A-T)+E*(T-P))<J||Q.push(F,F+1,F+2)}}(e,i)}var ua,ca,fa=function(t){function e(e,i,r,n,a,s){void 0===s&&(s=0),a=a||n/2;for(var o=-1*Math.PI/2+s,h=2*r,l=ye/h,u=[],c=0;c<h;c++){var f=c%2?a:n,p=c*l+o;u.push(e+f*Math.cos(p),i+f*Math.sin(p))}return t.call(this,u)||this}return ta(e,t),e}(Pe),pa=function(){function t(){}return t.curveTo=function(t,e,i,r,n,a){var s=a[a.length-2],o=a[a.length-1]-e,h=s-t,l=r-e,u=i-t,c=Math.abs(o*u-h*l);if(c<1e-8||0===n)return a[a.length-2]===t&&a[a.length-1]===e||a.push(t,e),null;var f=o*o+h*h,p=l*l+u*u,d=o*l+h*u,_=n*Math.sqrt(f)/c,m=n*Math.sqrt(p)/c,y=_*d/f,g=m*d/p,v=_*u+m*h,b=_*l+m*o,T=h*(m+y),x=o*(m+y),P=u*(_+g),E=l*(_+g);return{cx:v+t,cy:b+e,radius:n,startAngle:Math.atan2(x-b,T-v),endAngle:Math.atan2(E-b,P-v),anticlockwise:h*l>u*o}},t.arc=function(t,e,i,r,n,a,s,o,h){for(var l=s-a,u=Qn._segmentsCount(Math.abs(l)*n,40*Math.ceil(Math.abs(l)/ye)),c=l/(2*u),f=2*c,p=Math.cos(c),d=Math.sin(c),_=u-1,m=_%1/_,y=0;y<=_;++y){var g=c+a+f*(y+m*y),v=Math.cos(g),b=-Math.sin(g);h.push((p*v+d*b)*n+i,(p*-b+d*v)*n+r)}},t}(),da=function(){function t(){}return t.curveLength=function(t,e,i,r,n,a,s,o){for(var h=0,l=0,u=0,c=0,f=0,p=0,d=0,_=0,m=0,y=0,g=0,v=t,b=e,T=1;T<=10;++T)y=v-(_=(d=(p=(f=1-(l=T/10))*f)*f)*t+3*p*l*i+3*f*(u=l*l)*n+(c=u*l)*s),g=b-(m=d*e+3*p*l*r+3*f*u*a+c*o),v=_,b=m,h+=Math.sqrt(y*y+g*g);return h},t.curveTo=function(e,i,r,n,a,s,o){var h=o[o.length-2],l=o[o.length-1];o.length-=2;var u=Qn._segmentsCount(t.curveLength(h,l,e,i,r,n,a,s)),c=0,f=0,p=0,d=0,_=0;o.push(h,l);for(var m=1,y=0;m<=u;++m)p=(f=(c=1-(y=m/u))*c)*c,_=(d=y*y)*y,o.push(p*h+3*f*y*e+3*c*d*r+_*a,p*l+3*f*y*i+3*c*d*n+_*s)},t}(),_a=function(){function t(){}return t.curveLength=function(t,e,i,r,n,a){var s=t-2*i+n,o=e-2*r+a,h=2*i-2*t,l=2*r-2*e,u=4*(s*s+o*o),c=4*(s*h+o*l),f=h*h+l*l,p=2*Math.sqrt(u+c+f),d=Math.sqrt(u),_=2*u*d,m=2*Math.sqrt(f),y=c/d;return(_*p+d*c*(p-m)+(4*f*u-c*c)*Math.log((2*d+y+p)/(y+m)))/(4*_)},t.curveTo=function(e,i,r,n,a){for(var s=a[a.length-2],o=a[a.length-1],h=Qn._segmentsCount(t.curveLength(s,o,e,i,r,n)),l=0,u=0,c=1;c<=h;++c){var f=c/h;l=s+(e-s)*f,u=o+(i-o)*f,a.push(l+(e+(r-e)*f-l)*f,u+(i+(n-i)*f-u)*f)}},t}(),ma=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),ya=((ua={})[t.SHAPES.POLY]=ea,ua[t.SHAPES.CIRC]=ia,ua[t.SHAPES.ELIP]=ia,ua[t.SHAPES.RECT]=ra,ua[t.SHAPES.RREC]=sa,ua),ga=[],va=[],ba={buildPoly:ea,buildCircle:ia,buildRectangle:ra,buildRoundedRectangle:sa,FILL_COMMANDS:ya,BATCH_POOL:ga,DRAW_CALL_POOL:va,buildLine:la,Star:fa,ArcUtils:pa,BezierUtils:da,QuadraticUtils:_a,BatchPart:ma},Ta=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=r,this.type=t.type,this.points=[],this.holes=[]}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),xa=new Ae,Pa=new Le,Ea=function(e){function i(){var t=e.call(this)||this;return t.uvsFloat32=null,t.indicesUint16=null,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.dirty=0,t.batchDirty=-1,t.cacheDirty=-1,t.clearDirty=0,t.drawCalls=[],t.batches=[],t.shapeIndex=0,t._bounds=new Le,t.boundsDirty=-1,t.boundsPadding=0,t.batchable=!1,t.indicesUint16=null,t.uvsFloat32=null,t.closePointEps=1e-4,t}return ta(i,e),Object.defineProperty(i.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),i.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),va.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),ga.push(e)}this.batches.length=0},i.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},i.prototype.drawShape=function(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null);var n=new Ta(t,e,i,r);return this.graphicsData.push(n),this.dirty++,this},i.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var i=new Ta(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=r.lineStyle,r.holes.push(i),this.dirty++,this},i.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},i.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,xa):xa.copyFrom(t),r.shape.contains(xa.x,xa.y))){var n=!1;if(r.holes)for(var a=0;a<r.holes.length;a++)if(r.holes[a].shape.contains(xa.x,xa.y)){n=!0;break}if(!n)return!0}}return!1},i.prototype.updateBatches=function(e){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var i=this.uvs,r=this.graphicsData,n=null,a=null;this.batches.length>0&&(a=(n=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<r.length;s++){this.shapeIndex++;var o=r[s],h=o.fillStyle,l=o.lineStyle;ya[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var u=0;u<2;u++){var c=0===u?h:l;if(c.visible){var f=c.texture.baseTexture,p=this.indices.length,d=this.points.length/2;f.wrapMode=t.WRAP_MODES.REPEAT,0===u?this.processFill(o):this.processLine(o);var _=this.points.length/2-d;0!==_&&(n&&!this._compareStyles(a,c)&&(n.end(p,d),n=null),n||((n=ga.pop()||new ma).begin(c,p,d),this.batches.push(n),a=c),this.addUvs(this.points,i,c.texture,d,_,c.matrix))}}}var m=this.indices.length,y=this.points.length/2;if(n&&n.end(m,y),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var g=y>65535&&e;this.indicesUint16=g?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},i.prototype._compareStyles=function(t,e){return!(!t||!e)&&t.texture.baseTexture===e.texture.baseTexture&&t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native},i.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],r=i.fillStyle,n=i.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0},i.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var r=t[e],n=0;n<r.size;n++){var a=r.start+n;this.indicesUint16[a]=this.indicesUint16[a]-r.attribStart}},i.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*i.BATCHABLE_SIZE},i.prototype.buildDrawCalls=function(){for(var e=++pi._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),va.push(this.drawCalls[i]);this.drawCalls.length=0;var r=this.colors,n=this.textureIds,a=va.pop();a||((a=new on).texArray=new hn),a.texArray.count=0,a.start=0,a.size=0,a.type=t.DRAW_MODES.TRIANGLES;var s=0,o=null,h=0,l=!1,u=t.DRAW_MODES.TRIANGLES,c=0;for(this.drawCalls.push(a),i=0;i<this.batches.length;i++){var f=this.batches[i],p=f.style,d=p.texture.baseTexture;l!==!!p.native&&(u=(l=!!p.native)?t.DRAW_MODES.LINES:t.DRAW_MODES.TRIANGLES,o=null,s=8,e++),o!==d&&(o=d,d._batchEnabled!==e&&(8===s&&(e++,s=0,a.size>0&&((a=va.pop())||((a=new on).texArray=new hn),this.drawCalls.push(a)),a.start=c,a.size=0,a.texArray.count=0,a.type=u),d.touched=1,d._batchEnabled=e,d._batchLocation=s,d.wrapMode=10497,a.texArray.elements[a.texArray.count++]=d,s++)),a.size+=f.size,c+=f.size,h=d._batchLocation,this.addColors(r,p.color,p.alpha,f.attribSize,f.attribStart),this.addTextureIds(n,h,f.attribSize,f.attribStart)}pi._globalBatch=e,this.packAttributes()},i.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,r=this.textureIds,n=new ArrayBuffer(3*t.length*4),a=new Float32Array(n),s=new Uint32Array(n),o=0,h=0;h<t.length/2;h++)a[o++]=t[2*h],a[o++]=t[2*h+1],a[o++]=e[2*h],a[o++]=e[2*h+1],s[o++]=i[h],a[o++]=r[h];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},i.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),ea.triangulate(t,this)):ya[t.type].triangulate(t,this)},i.prototype.processLine=function(t){la(t,this);for(var e=0;e<t.holes.length;e++)la(t.holes[e],this)},i.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];ya[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},i.prototype.calculateBounds=function(){var e=this._bounds,i=Pa,r=we.IDENTITY;this._bounds.clear(),i.clear();for(var n=0;n<this.graphicsData.length;n++){var a=this.graphicsData[n],s=a.shape,o=a.type,h=a.lineStyle,l=a.matrix||we.IDENTITY,u=0;if(h&&h.visible){var c=h.alignment;u=h.width,o===t.SHAPES.POLY?u*=.5+Math.abs(.5-c):u*=Math.max(0,c)}if(r!==l&&(i.isEmpty()||(e.addBoundsMatrix(i,r),i.clear()),r=l),o===t.SHAPES.RECT||o===t.SHAPES.RREC){var f=s;i.addFramePad(f.x,f.y,f.x+f.width,f.y+f.height,u,u)}else if(o===t.SHAPES.CIRC){var p=s;i.addFramePad(p.x,p.y,p.x,p.y,p.radius+u,p.radius+u)}else if(o===t.SHAPES.ELIP){var d=s;i.addFramePad(d.x,d.y,d.x,d.y,d.width+u,d.height+u)}else{var _=s;e.addVerticesMatrix(r,_.points,0,_.points.length,u,u)}}i.isEmpty()||e.addBoundsMatrix(i,r),e.pad(this.boundsPadding,this.boundsPadding)},i.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var r=t[2*i],n=t[2*i+1];t[2*i]=e.a*r+e.c*n+e.tx,t[2*i+1]=e.b*r+e.d*n+e.ty}},i.prototype.addColors=function(t,e,i,r,n){void 0===n&&(n=0);var a=zt((e>>16)+(65280&e)+((255&e)<<16),i);t.length=Math.max(t.length,n+r);for(var s=0;s<r;s++)t[n+s]=a},i.prototype.addTextureIds=function(t,e,i,r){void 0===r&&(r=0),t.length=Math.max(t.length,r+i);for(var n=0;n<i;n++)t[r+n]=e},i.prototype.addUvs=function(t,e,i,r,n,a){void 0===a&&(a=null);for(var s=0,o=e.length,h=i.frame;s<n;){var l=t[2*(r+s)],u=t[2*(r+s)+1];if(a){var c=a.a*l+a.c*u+a.tx;u=a.b*l+a.d*u+a.ty,l=c}s++,e.push(l/h.width,u/h.height)}var f=i.baseTexture;(h.width<f.width||h.height<f.height)&&this.adjustUvs(e,i,o,n)},i.prototype.adjustUvs=function(t,e,i,r){for(var n=e.baseTexture,a=i+2*r,s=e.frame,o=s.width/n.width,h=s.height/n.height,l=s.x/s.width,u=s.y/s.height,c=Math.floor(t[i]+1e-6),f=Math.floor(t[i+1]+1e-6),p=i+2;p<a;p+=2)c=Math.min(c,Math.floor(t[p]+1e-6)),f=Math.min(f,Math.floor(t[p+1]+1e-6));for(l-=c,u-=f,p=i;p<a;p+=2)t[p]=(t[p]+l)*o,t[p+1]=(t[p+1]+u)*h},i.BATCHABLE_SIZE=100,i}(fn),Aa=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.width=0,i.alignment=.5,i.native=!1,i.cap=t.LINE_CAP.BUTT,i.join=t.LINE_JOIN.MITER,i.miterLimit=10,i}return ta(i,e),i.prototype.clone=function(){var t=new i;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},i.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},i}(Jn),Sa=new Float32Array(3),wa={},Da=function(e){function i(i){void 0===i&&(i=null);var r=e.call(this)||this;return r._geometry=i||new Ea,r._geometry.refCount++,r.shader=null,r.state=Mr.for2d(),r._fillStyle=new Jn,r._lineStyle=new Aa,r._matrix=null,r._holeMode=!1,r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r.pluginName="batch",r._transformID=-1,r.tint=16777215,r.blendMode=t.BLEND_MODES.NORMAL,r}return ta(i,e),Object.defineProperty(i.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return this.finishPoly(),new i(this._geometry)},Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),i.prototype.lineStyle=function(t){if(void 0===t&&(t=null),"number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},i.prototype.lineTextureStyle=function(e){if("number"==typeof e){ae("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var i=arguments;e={width:i[0],texture:i[1],color:i[2],alpha:i[3],matrix:i[4],alignment:i[5],native:i[6]},Object.keys(e).forEach((function(t){return void 0===e[t]&&delete e[t]}))}e=Object.assign({width:0,texture:Ii.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:t.LINE_CAP.BUTT,join:t.LINE_JOIN.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this},i.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Pe,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Pe,this.currentPath.closeStroke=!1},i.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},i.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},i.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,r=i[i.length-2],n=i[i.length-1];return r===t&&n===e||i.push(t,e),this},i.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},i.prototype.quadraticCurveTo=function(t,e,i,r){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),_a.curveTo(t,e,i,r,n),this},i.prototype.bezierCurveTo=function(t,e,i,r,n,a){return this._initCurve(),da.curveTo(t,e,i,r,n,a,this.currentPath.points),this},i.prototype.arcTo=function(t,e,i,r,n){this._initCurve(t,e);var a=this.currentPath.points,s=pa.curveTo(t,e,i,r,n,a);if(s){var o=s.cx,h=s.cy,l=s.radius,u=s.startAngle,c=s.endAngle,f=s.anticlockwise;this.arc(o,h,l,u,c,f)}return this},i.prototype.arc=function(t,e,i,r,n,a){if(void 0===a&&(a=!1),r===n)return this;if(!a&&n<=r?n+=ye:a&&r<=n&&(r+=ye),0==n-r)return this;var s=t+Math.cos(r)*i,o=e+Math.sin(r)*i,h=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var u=Math.abs(l[l.length-2]-s),c=Math.abs(l[l.length-1]-o);u<h&&c<h||l.push(s,o)}else this.moveTo(s,o),l=this.currentPath.points;return pa.arc(s,o,t,e,i,r,n,a,l),this},i.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:Ii.WHITE,color:t,alpha:e})},i.prototype.beginTextureFill=function(t){if(t instanceof Ii){ae("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments;t={texture:e[0],color:e[1],alpha:e[2],matrix:e[3]},Object.keys(t).forEach((function(e){return void 0===t[e]&&delete t[e]}))}t=Object.assign({texture:Ii.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this},i.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},i.prototype.drawRect=function(t,e,i,r){return this.drawShape(new be(t,e,i,r))},i.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new Ee(t,e,i,r,n))},i.prototype.drawCircle=function(t,e,i){return this.drawShape(new Te(t,e,i))},i.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new xe(t,e,i,r))},i.prototype.drawPolygon=function(){for(var t,e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];var n=!0,a=i[0];a.points?(n=a.closeStroke,t=a.points):t=Array.isArray(i[0])?i[0]:i;var s=new Pe(t);return s.closeStroke=n,this.drawShape(s),this},i.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},i.prototype.drawStar=function(t,e,i,r,n,a){return void 0===a&&(a=0),this.drawPolygon(new fa(t,e,i,r,n,a))},i.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},i.prototype.isFastRect=function(){var e=this._geometry.graphicsData;return 1===e.length&&e[0].shape.type===t.SHAPES.RECT&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)},i.prototype._render=function(t){this.finishPoly();var e=this._geometry,i=t.context.supports.uint32Indices;e.updateBatches(i),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},i.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var r=0;r<i;r++){var n=t.batches[r],a=n.style.color,s=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),o=new Float32Array(t.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),h={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*n.start,n.size),uvs:o,_batchRGB:jt(a),_tintRGB:a,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[r]=h}},i.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},i.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,r=this.tint,n=this.worldAlpha,a=e.uniforms,s=i.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(r>>16&255)/255*n,a.tint[1]=(r>>8&255)/255*n,a.tint[2]=(255&r)/255*n,a.tint[3]=n,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var o=0,h=s.length;o<h;o++)this._renderDrawCallDirect(t,i.drawCalls[o])},i.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,r=e.type,n=e.size,a=e.start,s=i.count,o=0;o<s;o++)t.texture.bind(i.elements[o],o);t.geometry.draw(r,n,a)},i.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!wa[i]){for(var r=t.plugins.batch.MAX_TEXTURES,n=new Int32Array(r),a=0;a<r;a++)n[a]=a;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new we,default:zi.from({uSamplers:n},!0)},o=t.plugins[i]._shader.program;wa[i]=new Ir(o,s)}e=wa[i]}return e},i.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,r=e.minY,n=e.maxX,a=e.maxY;this._bounds.addFrame(this.transform,i,r,n,a)}},i.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,i._TEMP_POINT),this._geometry.containsPoint(i._TEMP_POINT)},i.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=jt(this.tint,Sa),e=0;e<this.batches.length;e++){var i=this.batches[e],r=i._batchRGB,n=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);i._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},i.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,a=e.d,s=e.tx,o=e.ty,h=this._geometry.points,l=this.vertexData,u=0,c=0;c<h.length;c+=2){var f=h[c],p=h[c+1];l[u++]=i*f+n*p+s,l[u++]=a*p+r*f+o}}},i.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},i.prototype.setMatrix=function(t){return this._matrix=t,this},i.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},i.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},i.prototype.destroy=function(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},i._TEMP_POINT=new Ae,i}(Ge),Oa=function(t,e){return(Oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},Ia=new Ae,Ma=new Uint16Array([0,1,2,0,2,3]),Ca=function(e){function i(i){var r=e.call(this)||this;return r._anchor=new Se(r._onAnchorUpdate,r,i?i.defaultAnchor.x:0,i?i.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=t.BLEND_MODES.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=i||Ii.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=Ma,r.pluginName="batch",r.isSprite=!0,r._roundPixels=R.ROUND_PIXELS,r}return function(t,e){function i(){this.constructor=t}Oa(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(i,e),i.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ee(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ee(this.scale.y)*this._height/this._texture.orig.height)},i.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},i.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,a=e.d,s=e.tx,o=e.ty,h=this.vertexData,l=t.trim,u=t.orig,c=this._anchor,f=0,p=0,d=0,_=0;if(l?(f=(p=l.x-c._x*u.width)+l.width,d=(_=l.y-c._y*u.height)+l.height):(f=(p=-c._x*u.width)+u.width,d=(_=-c._y*u.height)+u.height),h[0]=i*p+n*_+s,h[1]=a*_+r*p+o,h[2]=i*f+n*_+s,h[3]=a*_+r*f+o,h[4]=i*f+n*d+s,h[5]=a*d+r*f+o,h[6]=i*p+n*d+s,h[7]=a*d+r*p+o,this._roundPixels)for(var m=R.RESOLUTION,y=0;y<h.length;++y)h[y]=Math.round((h[y]*m|0)/m)}},i.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,a=n.a,s=n.b,o=n.c,h=n.d,l=n.tx,u=n.ty,c=-r._x*i.width,f=c+i.width,p=-r._y*i.height,d=p+i.height;e[0]=a*c+o*p+l,e[1]=h*p+s*c+u,e[2]=a*f+o*p+l,e[3]=h*p+s*f+u,e[4]=a*f+o*d+l,e[5]=h*d+s*f+u,e[6]=a*c+o*d+l,e[7]=h*d+s*c+u},i.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},i.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},i.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new be),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},i.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Ia);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return Ia.x>=r&&Ia.x<r+e&&(n=-i*this.anchor.y,Ia.y>=n&&Ia.y<n+i)},i.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var i="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!i)}this._texture=null},i.from=function(t,e){return new i(t instanceof Ii?t:Ii.from(t,e))},Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=ee(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=ee(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Ii.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),i}(Ge),Ra=function(t,e){return(Ra=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};(ca=t.TEXT_GRADIENT||(t.TEXT_GRADIENT={}))[ca.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",ca[ca.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL";var Fa={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:t.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Ba=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Na=function(){function t(t){this.styleID=0,this.reset(),Ua(this,t,t)}return t.prototype.clone=function(){var e={};return Ua(e,this,Fa),new t(e)},t.prototype.reset=function(){Ua(this,Fa,Fa)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=ka(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=ka(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=ka(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Ba.indexOf(r)<0&&(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function La(t){return"number"==typeof t?Xt(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function ka(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=La(t[e]);return t}return La(t)}function Ua(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var ja=function(){function t(t,e,i,r,n,a,s,o,h){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=n,this.lineWidths=a,this.lineHeight=s,this.maxLineWidth=o,this.fontProperties=h}return t.measureText=function(e,i,r,n){void 0===n&&(n=t._canvas),r=null==r?i.wordWrap:r;var a=i.toFontString(),s=t.measureFont(a);0===s.fontSize&&(s.fontSize=i.fontSize,s.ascent=i.fontSize);var o=n.getContext("2d");o.font=a;for(var h=(r?t.wordWrap(e,i,n):e).split(/(?:\r\n|\r|\n)/),l=new Array(h.length),u=0,c=0;c<h.length;c++){var f=o.measureText(h[c]).width+(h[c].length-1)*i.letterSpacing;l[c]=f,u=Math.max(u,f)}var p=u+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var d=i.lineHeight||s.fontSize+i.strokeThickness,_=Math.max(d,s.fontSize+i.strokeThickness)+(h.length-1)*(d+i.leading);return i.dropShadow&&(_+=i.dropShadowDistance),new t(e,i,p,_,h,l,d+i.leading,u,s)},t.wordWrap=function(e,i,r){void 0===r&&(r=t._canvas);for(var n=r.getContext("2d"),a=0,s="",o="",h=Object.create(null),l=i.letterSpacing,u=i.whiteSpace,c=t.collapseSpaces(u),f=t.collapseNewlines(u),p=!c,d=i.wordWrapWidth+l,_=t.tokenize(e),m=0;m<_.length;m++){var y=_[m];if(t.isNewline(y)){if(!f){o+=t.addLine(s),p=!c,s="",a=0;continue}y=" "}if(c){var g=t.isBreakingSpace(y),v=t.isBreakingSpace(s[s.length-1]);if(g&&v)continue}var b=t.getFromCache(y,l,h,n);if(b>d)if(""!==s&&(o+=t.addLine(s),s="",a=0),t.canBreakWords(y,i.breakWords))for(var T=t.wordWrapSplit(y),x=0;x<T.length;x++){for(var P=T[x],E=1;T[x+E];){var A=T[x+E],S=P[P.length-1];if(t.canBreakChars(S,A,y,x,i.breakWords))break;P+=A,E++}x+=P.length-1;var w=t.getFromCache(P,l,h,n);w+a>d&&(o+=t.addLine(s),p=!1,s="",a=0),s+=P,a+=w}else{s.length>0&&(o+=t.addLine(s),s="",a=0);var D=m===_.length-1;o+=t.addLine(y,!D),p=!1,s="",a=0}else b+a>d&&(p=!1,o+=t.addLine(s),s="",a=0),(s.length>0||!t.isBreakingSpace(y)||p)&&(s+=y,a+=b)}return o+t.addLine(s,!1)},t.addLine=function(e,i){return void 0===i&&(i=!0),e=t.trimRight(e),i?e+"\n":e},t.getFromCache=function(t,e,i,r){var n=i[t];if("number"!=typeof n){var a=t.length*e;n=r.measureText(t).width+a,i[t]=n}return n},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],r="";if("string"!=typeof e)return i;for(var n=0;n<e.length;n++){var a=e[n];t.isBreakingSpace(a)||t.isNewline(a)?(""!==r&&(i.push(r),r=""),i.push(a)):r+=a}return""!==r&&i.push(r),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,r,n){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={ascent:0,descent:0,fontSize:0},r=t._canvas,n=t._context;n.font=e;var a=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(n.measureText(a).width),o=Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),h=2*o;o=o*t.BASELINE_MULTIPLIER|0,r.width=s,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,s,h),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(a,0,o);var l=n.getImageData(0,0,s,h).data,u=l.length,c=4*s,f=0,p=0,d=!1;for(f=0;f<o;++f){for(var _=0;_<c;_+=4)if(255!==l[p+_]){d=!0;break}if(d)break;p+=c}for(i.ascent=o-f,p=u-c,d=!1,f=h;f>o;--f){for(_=0;_<c;_+=4)if(255!==l[p+_]){d=!0;break}if(d)break;p-=c}return i.descent=f-o,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),Xa=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();Xa.width=Xa.height=10,ja._canvas=Xa,ja._context=Xa.getContext("2d"),ja._fonts={},ja.METRICS_STRING="|ÉqÅ",ja.BASELINE_SYMBOL="M",ja.BASELINE_MULTIPLIER=1.4,ja._newlines=[10,13],ja._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Ya={texture:!0,children:!1,baseTexture:!0},Ga=function(e){function i(t,i,r){var n=this,a=!1;r||(r=document.createElement("canvas"),a=!0),r.width=3,r.height=3;var s=Ii.from(r);return s.orig=new be,s.trim=new be,(n=e.call(this,s)||this)._ownCanvas=a,n.canvas=r,n.context=n.canvas.getContext("2d"),n._resolution=R.RESOLUTION,n._autoResolution=!0,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=t,n.style=i,n.localStyleID=-1,n}return function(t,e){function i(){this.constructor=t}Ra(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(i,e),i.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i,r,n=this.context,a=ja.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=a.width,o=a.height,h=a.lines,l=a.lineHeight,u=a.lineWidths,c=a.maxLineWidth,f=a.fontProperties;this.canvas.width=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,d=0;d<p;++d){var _=e.dropShadow&&0===d,m=_?Math.ceil(Math.max(1,o)+2*e.padding):0,y=m*this._resolution;if(_){n.fillStyle="black",n.strokeStyle="black";var g=e.dropShadowColor,v=jt("number"==typeof g?g:Yt(g)),b=e.dropShadowBlur*this._resolution,T=e.dropShadowDistance*this._resolution;n.shadowColor="rgba("+255*v[0]+","+255*v[1]+","+255*v[2]+","+e.dropShadowAlpha+")",n.shadowBlur=b,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*T,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*T+y}else n.fillStyle=this._generateFillStyle(e,h,a),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;for(var x=0;x<h.length;x++)i=e.strokeThickness/2,r=e.strokeThickness/2+x*l+f.ascent,"right"===e.align?i+=c-u[x]:"center"===e.align&&(i+=(c-u[x])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(h[x],i+e.padding,r+e.padding-m,!0),e.fill&&this.drawLetterSpacing(h[x],i+e.padding,r+e.padding-m)}this.updateTexture()}},i.prototype.drawLetterSpacing=function(t,e,i,r){void 0===r&&(r=!1);var n=this._style.letterSpacing;if(0!==n)for(var a=e,s=Array.from?Array.from(t):t.split(""),o=this.context.measureText(t).width,h=0,l=0;l<s.length;++l){var u=s[l];r?this.context.strokeText(u,a,i):this.context.fillText(u,a,i),a+=o-(h=this.context.measureText(t.substring(l+1)).width)+n,o=h}else r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},i.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=ue(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,r=this._style,n=r.trim?0:r.padding,a=i.baseTexture;i.trim.width=i._frame.width=Math.ceil(t.width/this._resolution),i.trim.height=i._frame.height=Math.ceil(t.height/this._resolution),i.trim.x=-n,i.trim.y=-n,i.orig.width=i._frame.width-2*n,i.orig.height=i._frame.height-2*n,this._onTextureUpdate(),a.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},i.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},i.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},i.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},i.prototype._generateFillStyle=function(e,i,r){var n,a=e.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var s=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,h=Math.ceil(this.canvas.width/this._resolution)-s-2*o,l=Math.ceil(this.canvas.height/this._resolution)-s-2*o,u=a.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var f=u.length+1,p=1;p<f;++p)c.push(p/f);if(u.unshift(a[0]),c.unshift(0),u.push(a[a.length-1]),c.push(1),e.fillGradientType===t.TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(h/2,o,h/2,l+o);var d=0,_=(r.fontProperties.fontSize+e.strokeThickness)/l;for(p=0;p<i.length;p++)for(var m=r.lineHeight*p,y=0;y<u.length;y++){var g=m/l+("number"==typeof c[y]?c[y]:y/u.length)*_,v=Math.max(d,g);v=Math.min(v,1),n.addColorStop(v,u[y]),d=v}}else{n=this.context.createLinearGradient(o,l/2,h+o,l/2);var b=u.length+1,T=1;for(p=0;p<u.length;p++){var x;x="number"==typeof c[p]?c[p]:T/b,n.addColorStop(x,u[p]),T++}}return n},i.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},Ya,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=ee(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=ee(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof Na?t:new Na(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),i}(Ca);R.UPLOADS_PER_FRAME=4;var Va=function(t,e){return(Va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},Ha=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function za(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof Ii){var n=t._textures[r].baseTexture;-1===e.indexOf(n)&&(e.push(n),i=!0)}return i}function Wa(t,e){if(t.baseTexture instanceof pi){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function qa(t,e){if(t._texture&&t._texture instanceof Ii){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Za(t,e){return e instanceof Ga&&(e.updateText(!0),!0)}function Ka(t,e){if(e instanceof Na){var i=e.toFontString();return ja.measureFont(i),!0}return!1}function Qa(t,e){if(t instanceof Ga){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Ja(t,e){return t instanceof Na&&(-1===e.indexOf(t)&&e.push(t),!0)}var $a=function(){function e(t){var e=this;this.limiter=new Ha(R.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Qa),this.registerFindHook(Ja),this.registerFindHook(za),this.registerFindHook(Wa),this.registerFindHook(qa),this.registerUploadHook(Za),this.registerUploadHook(Ka)}return e.prototype.upload=function(e,i){"function"==typeof e&&(i=e,e=null),e&&this.add(e),this.queue.length?(i&&this.completes.push(i),this.ticking||(this.ticking=!0,Ze.system.addOnce(this.tick,this,t.UPDATE_PRIORITY.UTILITY))):i&&i()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],i=!1;if(e&&!e._destroyed)for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),i=!0;break}i||this.queue.shift()}if(this.queue.length)Ze.system.addOnce(this.tick,this,t.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var a=this.completes.slice(0);for(this.completes.length=0,r=0,n=a.length;r<n;r++)a[r]()}},e.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},e.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},e.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Ge)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},e.prototype.destroy=function(){this.ticking&&Ze.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function ts(t,e){return e instanceof pi&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function es(t,e){if(!(e instanceof Da))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var r=i.batches,n=0;n<r.length;n++){var a=r[n].style.texture;a&&ts(t,a.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function is(t,e){return t instanceof Da&&(e.push(t),!0)}var rs=function(t){function e(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(is),i.registerUploadHook(ts),i.registerUploadHook(es),i}return function(t,e){function i(){this.constructor=t}Va(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}($a),ns=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}(),as=function(){function t(t,e,i){void 0===i&&(i=null),this._texture=t instanceof Ii?t:null,this.baseTexture=t instanceof pi?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(i||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,i=de(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,r=t.BATCH_SIZE;i-e<r&&i<this._frameKeys.length;){var n=this._frameKeys[i],a=this._frames[n],s=a.frame;if(s){var o,h=null,l=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,u=new be(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);o=a.rotated?new be(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new be(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(h=new be(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new Ii(this.baseTexture,o,u,h,a.rotated?2:0,a.anchor),Ii.addToCache(this.textures[n],n)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var r=t[e][i];this.animations[e].push(this.textures[r])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var i in void 0===t&&(t=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),ss=function(){function t(){}return t.use=function(e,i){var r=e.name+"_image";if(e.data&&e.type===Un.TYPE.JSON&&e.data.frames&&!this.resources[r]){var n={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},a=t.getResourcePath(e,this.baseUrl);this.add(r,a,n,(function(t){if(t.error)i(t.error);else{var r=new as(t.texture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,i()}))}}))}else i()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:Ft.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),os=function(t,e){return(os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function hs(t,e){function i(){this.constructor=t}os(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var ls=new Ae,us=function(t){function e(e,i,r){void 0===i&&(i=100),void 0===r&&(r=100);var n=t.call(this,e)||this;return n.tileTransform=new Ne,n._width=i,n._height=r,n.uvMatrix=n.texture.uvMatrix||new Fr(e),n.pluginName="tilingSprite",n.uvRespectAnchor=!1,n}return hs(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new be),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ls);var e=this._width,i=this._height,r=-e*this.anchor._x;if(ls.x>=r&&ls.x<r+e){var n=-i*this.anchor._y;if(ls.y>=n&&ls.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){return"number"==typeof i&&(ae("5.3.0","TilingSprite.from use options instead of width and height args"),i={width:i,height:arguments[2]}),new e(Ii.from(t,i),i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(Ca),cs="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",fs=new we,ps=function(e){function i(t){var i=e.call(this,t)||this,r={globals:i.renderer.globalUniforms};return i.shader=Ir.from(cs,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",r),i.simpleShader=Ir.from(cs,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",r),i.quad=new Vi,i.state=Mr.for2d(),i}return hs(i,e),i.prototype.render=function(e){var i=this.renderer,r=this.quad,n=r.vertices;n[0]=n[6]=e._width*-e.anchor.x,n[1]=n[3]=e._height*-e.anchor.y,n[2]=n[4]=e._width*(1-e.anchor.x),n[5]=n[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&((n=r.uvs)[0]=n[6]=-e.anchor.x,n[1]=n[3]=-e.anchor.y,n[2]=n[4]=1-e.anchor.x,n[5]=n[7]=1-e.anchor.y),r.invalidate();var a=e._texture,s=a.baseTexture,o=e.tileTransform.localTransform,h=e.uvMatrix,l=s.isPowerOfTwo&&a.frame.width===s.width&&a.frame.height===s.height;l&&(s._glTextures[i.CONTEXT_UID]?l=s.wrapMode!==t.WRAP_MODES.CLAMP:s.wrapMode===t.WRAP_MODES.CLAMP&&(s.wrapMode=t.WRAP_MODES.REPEAT));var u=l?this.simpleShader:this.shader,c=a.width,f=a.height,p=e._width,d=e._height;fs.set(o.a*c/p,o.b*c/d,o.c*f/p,o.d*f/d,o.tx/p,o.ty/d),fs.invert(),l?fs.prepend(h.mapCoord):(u.uniforms.uMapCoord=h.mapCoord.toArray(!0),u.uniforms.uClampFrame=h.uClampFrame,u.uniforms.uClampOffset=h.uClampOffset),u.uniforms.uTransform=fs.toArray(!0),u.uniforms.uColor=Wt(e.tint,e.worldAlpha,u.uniforms.uColor,s.alphaMode),u.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),u.uniforms.uSampler=a,i.shader.bind(u),i.geometry.bind(r),this.state.blendMode=Vt(e.blendMode,s.alphaMode),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},i}(Zi),ds=function(t,e){return(ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function _s(t,e){function i(){this.constructor=t}ds(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var ms=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),ys=new Ae,gs=new Pe,vs=function(e){function i(i,r,n,a){void 0===a&&(a=t.DRAW_MODES.TRIANGLES);var s=e.call(this)||this;return s.geometry=i,i.refCount++,s.shader=r,s.state=n||Mr.for2d(),s.drawMode=a,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=0,s._transformID=-1,s._roundPixels=R.ROUND_PIXELS,s.batchUvs=null,s}return _s(i,e),Object.defineProperty(i.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),i.prototype._render=function(e){var r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===t.DRAW_MODES.TRIANGLES&&r.length<2*i.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)},i.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},i.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)},i.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var i=this.transform.worldTransform,r=i.a,n=i.b,a=i.c,s=i.d,o=i.tx,h=i.ty,l=this.vertexData,u=0;u<l.length/2;u++){var c=e[2*u],f=e[2*u+1];l[2*u]=r*c+a*f+o,l[2*u+1]=n*c+s*f+h}if(this._roundPixels){var p=R.RESOLUTION;for(u=0;u<l.length;++u)l[u]=Math.round((l[u]*p|0)/p)}this.vertexDirty=t.vertexDirtyId}},i.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new ms(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},i.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},i.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,ys);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=gs.points,r=this.geometry.getIndex().data,n=r.length,a=4===this.drawMode?3:1,s=0;s+2<n;s+=a){var o=2*r[s],h=2*r[s+1],l=2*r[s+2];if(i[0]=e[o],i[1]=e[o+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[l],i[5]=e[l+1],gs.contains(ys.x,ys.y))return!0}return!1},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},i.BATCHABLE_SIZE=100,i}(Ge),bs=function(t){function e(e,i){var r=this,n={uSampler:e,alpha:1,uTextureMatrix:we.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(n,i.uniforms),(r=t.call(this,i.program||Or.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),n)||this)._colorDirty=!1,r.uvMatrix=new Fr(e),r.batchable=void 0===i.program,r.pluginName=i.pluginName,r.tint=i.tint,r.alpha=i.alpha,r}return _s(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Wt(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Ir),Ts=function(e){function i(i,r,n){var a=e.call(this)||this,s=new Ni(i),o=new Ni(r,!0),h=new Ni(n,!0,!0);return a.addAttribute("aVertexPosition",s,2,!1,t.TYPES.FLOAT).addAttribute("aTextureCoord",o,2,!1,t.TYPES.FLOAT).addIndex(h),a._updateId=-1,a}return _s(i,e),Object.defineProperty(i.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),i}(Yi),xs=function(t,e){return(xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},Ps=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},Es=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var r in e){var n=e[r].match(/^[a-z]+/gm)[0],a=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var o in a){var h=a[o].split("="),l=h[0],u=h[1].replace(/"/gm,""),c=parseFloat(u),f=isNaN(c)?u:c;s[l]=f}i[n].push(s)}var p=new Ps;return i.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),i.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),i.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),i.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),i.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),p},t}(),As=function(){function t(){}return t.test=function(t){return console.log(t.constructor.name),["Document","U"].indexOf(t.constructor.name)>-1&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new Ps,i=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),a=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),o=0;o<i.length;o++)e.info.push({face:i[o].getAttribute("face"),size:parseInt(i[o].getAttribute("size"),10)});for(o=0;o<r.length;o++)e.common.push({lineHeight:parseInt(r[o].getAttribute("lineHeight"),10)});for(o=0;o<n.length;o++)e.page.push({id:parseInt(n[o].getAttribute("id"),10)||0,file:n[o].getAttribute("file")});for(o=0;o<a.length;o++){var h=a[o];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(o=0;o<s.length;o++)e.kerning.push({first:parseInt(s[o].getAttribute("first"),10),second:parseInt(s[o].getAttribute("second"),10),amount:parseInt(s[o].getAttribute("amount"),10)});return e},t}(),Ss=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new DOMParser).parseFromString(t,"text/xml");return As.test(e)}return!1},t.parse=function(t){var e=(new DOMParser).parseFromString(t,"text/xml");return As.parse(e)},t}(),ws=[Es,As,Ss];function Ds(t){for(var e=0;e<ws.length;e++)if(ws[e].test(t))return ws[e];return null}function Os(e,i,r,n,a,s,o){var h=r.text,l=r.fontProperties;i.translate(n,a),i.scale(s,s);var u=o.strokeThickness/2,c=-o.strokeThickness/2;if(i.font=o.toFontString(),i.lineWidth=o.strokeThickness,i.textBaseline=o.textBaseline,i.lineJoin=o.lineJoin,i.miterLimit=o.miterLimit,i.fillStyle=function(e,i,r,n,a,s){var o,h=r.fill;if(!Array.isArray(h))return h;if(1===h.length)return h[0];var l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,c=Math.ceil(e.width/n)-l-2*u,f=Math.ceil(e.height/n)-l-2*u,p=h.slice(),d=r.fillGradientStops.slice();if(!d.length)for(var _=p.length+1,m=1;m<_;++m)d.push(m/_);if(p.unshift(h[0]),d.unshift(0),p.push(h[h.length-1]),d.push(1),r.fillGradientType===t.TEXT_GRADIENT.LINEAR_VERTICAL){o=i.createLinearGradient(c/2,u,c/2,f+u);var y=0,g=(s.fontProperties.fontSize+r.strokeThickness)/f;for(m=0;m<a.length;m++)for(var v=s.lineHeight*m,b=0;b<p.length;b++){var T=v/f+("number"==typeof d[b]?d[b]:b/p.length)*g,x=Math.max(y,T);x=Math.min(x,1),o.addColorStop(x,p[b]),y=x}}else{o=i.createLinearGradient(u,f/2,c+u,f/2);var P=p.length+1,E=1;for(m=0;m<p.length;m++){var A;A="number"==typeof d[m]?d[m]:E/P,o.addColorStop(A,p[m]),E++}}return o}(e,i,o,s,[h],r),i.strokeStyle=o.stroke,o.dropShadow){var f=o.dropShadowColor,p=jt("number"==typeof f?f:Yt(f)),d=o.dropShadowBlur*s,_=o.dropShadowDistance*s;i.shadowColor="rgba("+255*p[0]+","+255*p[1]+","+255*p[2]+","+o.dropShadowAlpha+")",i.shadowBlur=d,i.shadowOffsetX=Math.cos(o.dropShadowAngle)*_,i.shadowOffsetY=Math.sin(o.dropShadowAngle)*_}else i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;o.stroke&&o.strokeThickness&&i.strokeText(h,u,c+r.lineHeight-l.descent),o.fill&&i.fillText(h,u,c+r.lineHeight-l.descent),i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(0, 0, 0, 0)"}var Is=function(){function t(t,e,i){var r=t.info[0],n=t.common[0],a=de(t.page[0].file),s={};this._ownsTextures=i,this.font=r.face,this.size=r.size,this.lineHeight=n.lineHeight/a,this.chars={},this.pageTextures=s;for(var o=0;o<t.page.length;o++){var h=t.page[o],l=h.id,u=h.file;s[l]=e instanceof Array?e[o]:e[u]}for(o=0;o<t.char.length;o++){var c=t.char[o],f=(l=c.id,c.page),p=t.char[o],d=p.x,_=p.y,m=p.width,y=p.height,g=p.xoffset,v=p.yoffset,b=p.xadvance;_/=a,m/=a,y/=a,g/=a,v/=a,b/=a;var T=new be((d/=a)+s[f].frame.x/a,_+s[f].frame.y/a,m,y);this.chars[l]={xOffset:g,yOffset:v,xAdvance:b,kerning:{},texture:new Ii(s[f].baseTexture,T),page:f}}for(o=0;o<t.kerning.length;o++){var x=t.kerning[o],P=x.first,E=x.second,A=x.amount;P/=a,E/=a,A/=a,this.chars[E]&&(this.chars[E].kerning[P]=A)}}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,i,r){var n;if(e instanceof Ps)n=e;else{var a=Ds(e);if(!a)throw new Error("Unrecognized data format for font.");n=a.parse(e)}i instanceof Ii&&(i=[i]);var s=new t(n,i,r);return t.available[s.font]=s,s},t.uninstall=function(e){var i=t.available[e];if(!i)throw new Error("No font found named '"+e+"'");i.destroy(),delete t.available[e]},t.from=function(e,i,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},t.defaultOptions,r),a=n.chars,s=n.padding,o=n.resolution,h=n.textureWidth,l=n.textureHeight,u=function(t){"string"==typeof t&&(t=[t]);for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var a=n[0].charCodeAt(0),s=n[1].charCodeAt(0);if(s<a)throw new Error("[BitmapFont]: Invalid character range.");for(var o=a,h=s;o<=h;o++)e.push(String.fromCharCode(o))}else e.push.apply(e,n.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(a),c=i instanceof Na?i:new Na(i),f=h,p=new Ps;p.info[0]={face:c.fontFamily,size:c.fontSize},p.common[0]={lineHeight:c.fontSize};for(var d,_,m,y=0,g=0,v=0,b=[],T=0;T<u.length;T++){d||((d=document.createElement("canvas")).width=h,d.height=l,_=d.getContext("2d"),m=new pi(d,{resolution:o}),b.push(new Ii(m)),p.page.push({id:b.length-1,file:""}));var x=ja.measureText(u[T],c,!1,d),P=x.width,E=Math.ceil(x.height),A=Math.ceil(("italic"===c.fontStyle?2:1)*P);if(g>=l-E*o){if(0===g)throw new Error("[BitmapFont] textureHeight "+l+"px is too small for "+c.fontSize+"px fonts");--T,d=null,_=null,m=null,g=0,y=0,v=0}else if(v=Math.max(E+x.fontProperties.descent,v),A*o+y>=f)--T,g+=v*o,g=Math.ceil(g),y=0,v=0;else{Os(d,_,x,y,g,o,c);var S=x.text.charCodeAt(0);p.char.push({id:S,page:b.length-1,x:y/o,y:g/o,width:A,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(P-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),y+=(A+2*s)*o,y=Math.ceil(y)}}var w=new t(p,b,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=w,w},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),Ms=[],Cs=[],Rs=function(t){function e(i,r){void 0===r&&(r={});var n=t.call(this)||this;n._tint=16777215,r.font&&(ae("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),n._upgradeStyle(r));var a=Object.assign({},e.styleDefaults,r),s=a.align,o=a.tint,h=a.maxWidth,l=a.letterSpacing,u=a.fontName,c=a.fontSize;if(!Is.available[u])throw new Error('Missing BitmapFont "'+u+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=s,n._tint=o,n._fontName=u,n._fontSize=c||Is.available[u].size,n._text=i,n._maxWidth=h,n._maxLineHeight=0,n._letterSpacing=l,n._anchor=new Se((function(){n.dirty=!0}),n,0,0),n._roundPixels=R.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}return function(t,e){function i(){this.constructor=t}xs(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(){for(var t,e=Is.available[this._fontName],i=this._fontSize/e.size,r=new Ae,n=[],a=[],s=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",o=s.length,h=this._maxWidth*e.size/this._fontSize,l=null,u=0,c=0,f=0,p=-1,d=0,_=0,m=0,y=0;y<o;y++){var g=s.charCodeAt(y),v=s.charAt(y);if(/(?:\s)/.test(v)&&(p=y,d=u),"\r"!==v&&"\n"!==v){var b=e.chars[g];if(b){l&&b.kerning[l]&&(r.x+=b.kerning[l]);var T=Cs.pop()||{texture:Ii.EMPTY,line:0,charCode:0,position:new Ae};T.texture=b.texture,T.line=f,T.charCode=g,T.position.x=r.x+b.xOffset+this._letterSpacing/2,T.position.y=r.y+b.yOffset,n.push(T),r.x+=b.xAdvance+this._letterSpacing,u=r.x,m=Math.max(m,b.yOffset+b.texture.height),l=g,-1!==p&&h>0&&r.x>h&&(te(n,1+p-++_,1+y-p),y=p,p=-1,a.push(d),c=Math.max(c,d),f++,r.x=0,r.y+=e.lineHeight,l=null)}}else a.push(u),c=Math.max(c,u),++f,++_,r.x=0,r.y+=e.lineHeight,l=null}var x=s.charAt(s.length-1);"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(u=d),a.push(u),c=Math.max(c,u));var P=[];for(y=0;y<=f;y++){var E=0;"right"===this._align?E=c-a[y]:"center"===this._align&&(E=(c-a[y])/2),P.push(E)}var A=n.length,S={},w=[],D=this._activePagesMeshData;for(y=0;y<D.length;y++)Ms.push(D[y]);for(y=0;y<A;y++){var O=(k=n[y].texture).baseTexture.uid;if(!S[O]){if(!(H=Ms.pop())){var I=new Ts,M=new bs(Ii.EMPTY);H={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new vs(I,M),vertices:null,uvs:null,indices:null}}H.index=0,H.indexCount=0,H.vertexCount=0,H.uvsCount=0,H.total=0;var C=this._textureCache;C[O]=C[O]||new Ii(k.baseTexture),H.mesh.texture=C[O],H.mesh.tint=this._tint,w.push(H),S[O]=H}S[O].total++}for(y=0;y<D.length;y++)-1===w.indexOf(D[y])&&this.removeChild(D[y].mesh);for(y=0;y<w.length;y++)w[y].mesh.parent!==this&&this.addChild(w[y].mesh);for(var y in this._activePagesMeshData=w,S){var R=(H=S[y]).total;if(!((null===(t=H.indices)||void 0===t?void 0:t.length)>6*R)||H.vertices.length<2*vs.BATCHABLE_SIZE)H.vertices=new Float32Array(8*R),H.uvs=new Float32Array(8*R),H.indices=new Uint16Array(6*R);else for(var F=H.total,B=H.vertices,N=4*F*2;N<B.length;N++)B[N]=0;H.mesh.size=6*R}for(y=0;y<A;y++){var L=(v=n[y]).position.x+P[v.line];this._roundPixels&&(L=Math.round(L));var k,U=L*i,j=v.position.y*i,X=S[(k=v.texture).baseTexture.uid],Y=k.frame,G=k._uvs,V=X.index++;X.indices[6*V+0]=0+4*V,X.indices[6*V+1]=1+4*V,X.indices[6*V+2]=2+4*V,X.indices[6*V+3]=0+4*V,X.indices[6*V+4]=2+4*V,X.indices[6*V+5]=3+4*V,X.vertices[8*V+0]=U,X.vertices[8*V+1]=j,X.vertices[8*V+2]=U+Y.width*i,X.vertices[8*V+3]=j,X.vertices[8*V+4]=U+Y.width*i,X.vertices[8*V+5]=j+Y.height*i,X.vertices[8*V+6]=U,X.vertices[8*V+7]=j+Y.height*i,X.uvs[8*V+0]=G.x0,X.uvs[8*V+1]=G.y0,X.uvs[8*V+2]=G.x1,X.uvs[8*V+3]=G.y1,X.uvs[8*V+4]=G.x2,X.uvs[8*V+5]=G.y2,X.uvs[8*V+6]=G.x3,X.uvs[8*V+7]=G.y3}for(var y in this._textWidth=c*i,this._textHeight=(r.y+e.lineHeight)*i,S){var H=S[y];if(0!==this.anchor.x||0!==this.anchor.y)for(var z=0,W=this._textWidth*this.anchor.x,q=this._textHeight*this.anchor.y,Z=0;Z<H.total;Z++)H.vertices[z++]-=W,H.vertices[z++]-=q,H.vertices[z++]-=W,H.vertices[z++]-=q,H.vertices[z++]-=W,H.vertices[z++]-=q,H.vertices[z++]-=W,H.vertices[z++]-=q;this._maxLineHeight=m*i;var K=H.mesh.geometry.getBuffer("aVertexPosition"),Q=H.mesh.geometry.getBuffer("aTextureCoord"),J=H.mesh.geometry.getIndex();K.data=H.vertices,Q.data=H.uvs,J.data=H.indices,K.update(),Q.update(),J.update()}for(y=0;y<n.length;y++)Cs.push(n[y])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Is.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype._upgradeStyle=function(t){if("string"==typeof t.font){var e=t.font.split(" ");t.fontName=1===e.length?e[0]:e.slice(1).join(" "),e.length>=2&&(t.fontSize=parseInt(e[0],10))}else t.fontName=t.font.name,t.fontSize="number"==typeof t.font.size?t.font.size:parseInt(t.font.size,10)},e.prototype.destroy=function(e){var i=this._textureCache;for(var r in i)i[r].destroy(),delete i[r];this._textureCache=null,t.prototype.destroy.call(this,e)},e.registerFont=function(t,e){return ae("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),Is.install(t,e)},Object.defineProperty(e,"fonts",{get:function(){return ae("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),Is.available},enumerable:!1,configurable:!0}),e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(Ge),Fs=function(){function t(){}return t.add=function(){Un.setExtensionXhrType("fnt",Un.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,i){var r=Ds(e.data);if(r)for(var n=t.getBaseUrl(this,e),a=r.parse(e.data),s={},o=function(t){s[t.metadata.pageFile]=t.texture,Object.keys(s).length===a.page.length&&(e.bitmapFont=Is.install(a,s,!0),i())},h=0;h<a.page.length;++h){var l=a.page[h].file,u=n+l,c=!1;for(var f in this.resources){var p=this.resources[f];if(p.url===u){p.metadata.pageFile=l,p.texture?o(p):p.onAfterMiddleware.add(o),c=!0;break}}if(!c){var d={crossOrigin:e.crossOrigin,loadType:Un.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(u,d,o)}}else i()},t.getBaseUrl=function(e,i){var r=i.isDataUrl?"":t.dirname(i.url);return i.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}(),Bs=function(t,e){return(Bs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},Ns=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this,an,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return i.alpha=e,i}return function(t,e){function i(){this.constructor=t}Bs(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Cr),Ls=function(t,e){return(Ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function ks(t,e){function i(){this.constructor=t}Ls(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Us,js,Xs,Ys,Gs,Vs,Hs,zs,Ws,qs,Zs,Ks,Qs,Js,$s,to,eo,io={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ro=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Us||(Us={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(js||(js={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Xs||(Xs={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Ys||(Ys={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Gs||(Gs={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Vs||(Vs={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Hs||(Hs={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(zs||(zs={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Ws||(Ws={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(qs||(qs={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(Zs||(Zs={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(Ks||(Ks={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Qs||(Qs={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(Js||(Js={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}($s||($s={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(to||(to={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(eo||(eo={}));var no=function(t){function e(e,i,r,n,a){void 0===i&&(i=8),void 0===r&&(r=4),void 0===n&&(n=R.FILTER_RESOLUTION),void 0===a&&(a=5);var s=this,o=function(t,e){var i,r=Math.ceil(t/2),n="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",a="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var o=i.replace("%index%",s.toString());a+=o=o.replace("%sampleIndex%",s-(r-1)+".0"),a+="\n"}return(n=n.replace("%blur%",a)).replace("%size%",t.toString())}(a,e),h=function(t){for(var e,i=io[t],r=i.length,n=ro,a="",s=0;s<t;s++){var o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());e=s,s>=r&&(e=t-s-1),a+=o=o.replace("%value%",i[e].toString()),a+="\n"}return(n=n.replace("%blur%",a)).replace("%size%",t.toString())}(a);return(s=t.call(this,o,h)||this).horizontal=e,s.resolution=n,s._quality=0,s.quality=r,s.blur=i,s}return ks(e,t),e.prototype.apply=function(t,e,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{var n=t.getFilterTexture(),a=t.renderer,s=e,o=n;this.state.blend=!1,t.applyFilter(this,s,o,Qs.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(s,Qs.BLIT),this.uniforms.uSampler=o;var l=o;o=s,s=l,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,o,i,r),t.returnFilterTexture(n)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Cr),ao=function(t){function e(e,i,r,n){void 0===e&&(e=8),void 0===i&&(i=4),void 0===r&&(r=R.FILTER_RESOLUTION),void 0===n&&(n=5);var a=t.call(this)||this;return a.blurXFilter=new no(!0,e,i,r,n),a.blurYFilter=new no(!1,e,i,r,n),a.resolution=r,a.quality=i,a.blur=e,a.repeatEdgePixels=!1,a}return ks(e,t),e.prototype.apply=function(t,e,i,r){var n=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(n&&a){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,Qs.CLEAR),this.blurYFilter.apply(t,s,i,r),t.returnFilterTexture(s)}else a?this.blurYFilter.apply(t,e,i,r):this.blurXFilter.apply(t,e,i,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(Cr),so=function(t,e){return(so=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},oo=function(t){function e(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,sn,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",i)||this).alpha=1,e}return function(t,e){function i(){this.constructor=t}so(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=1/3,a=(0,Math.sqrt)(n),s=[i+(1-i)*n,n*(1-i)-a*r,n*(1-i)+a*r,0,0,n*(1-i)+a*r,i+n*(1-i),n*(1-i)-a*r,0,0,n*(1-i)-a*r,n*(1-i)+a*r,i+n*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,r,n){var a=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,o=(255&i)/255,h=((r=r||3375104)>>16&255)/255,l=(r>>8&255)/255,u=(255&r)/255,c=[.3,.59,.11,0,0,a,s,o,t=t||.2,0,h,l,u,e=e||.15,0,a-h,s-l,o-u,0,0];this._loadMatrix(c,n)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Cr);oo.prototype.grayscale=oo.prototype.greyscale;var ho=function(t,e){return(ho=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},lo=function(t){function e(e,i){var r=this,n=new we;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=n,null==i&&(i=20),r.scale=new Ae(i,i),r}return function(t,e){function i(){this.constructor=t}ho(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.apply=function(t,e,i,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform,a=Math.sqrt(n.a*n.a+n.b*n.b),s=Math.sqrt(n.c*n.c+n.d*n.d);0!==a&&0!==s&&(this.uniforms.rotation[0]=n.a/a,this.uniforms.rotation[1]=n.b/a,this.uniforms.rotation[2]=n.c/s,this.uniforms.rotation[3]=n.d/s),t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(Cr),uo=function(t,e){return(uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},co=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function i(){this.constructor=t}uo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(Cr),fo=function(t,e){return(fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},po=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random());var r=t.call(this,sn,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=i,r}return function(t,e){function i(){this.constructor=t}fo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(Cr),_o=new we;je.prototype._cacheAsBitmap=!1,je.prototype._cacheData=null;var mo=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(je.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new mo),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),je.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},je.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters){var r=this.filters[0].padding;i.pad(r)}i.ceil(R.RESOLUTION);var n=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),s=t.renderTexture.destinationFrame.clone(),o=t.projection.transform,h=Ci.create({width:i.width,height:i.height}),l="cacheAsBitmap_"+re();this._cacheData.textureCacheId=l,pi.addToCache(h.baseTexture,l),Ii.addToCache(h,l);var u=this.transform.localTransform.copyTo(_o).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,h,!0,u,!1),t.projection.transform=o,t.renderTexture.bind(n,a,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new Ca(h);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-i.x/i.width,c.anchor.y=-i.y/i.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)}},je.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},je.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var r=t.context,n=t._projTransform;e.ceil(R.RESOLUTION);var a=Ci.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+re();this._cacheData.textureCacheId=s,pi.addToCache(a.baseTexture,s),Ii.addToCache(a,s);var o=_o;this.transform.localTransform.copyTo(o),o.invert(),o.tx-=e.x,o.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,a,!0,o,!1),t.context=r,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var h=new Ca(a);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},je.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},je.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},je.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,pi.removeFromCache(this._cacheData.textureCacheId),Ii.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},je.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},je.prototype.name=null,Ge.prototype.getChildByName=function(t,e){for(var i=0,r=this.children.length;i<r;i++)if(this.children[i].name===t)return this.children[i];if(e)for(i=0,r=this.children.length;i<r;i++)if(this.children[i].getChildByName){var n=this.children[i].getChildByName(t,!0);if(n)return n}return null},je.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new Ae),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var yo=function(t,e){return(yo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function go(t,e){function i(){this.constructor=t}yo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var vo="5.0.0",bo=function(t,e){return(bo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function To(t,e){function i(){this.constructor=t}bo(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var xo=function(t){function e(e,i,r,n){void 0===e&&(e=100),void 0===i&&(i=100),void 0===r&&(r=10),void 0===n&&(n=10);var a=t.call(this)||this;return a.segWidth=r,a.segHeight=n,a.width=e,a.height=i,a.build(),a}return To(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],r=[],n=this.segWidth-1,a=this.segHeight-1,s=this.width/n,o=this.height/a,h=0;h<t;h++){var l=h%this.segWidth,u=h/this.segWidth|0;e.push(l*s,u*o),i.push(l/n,u/a)}var c=n*a;for(h=0;h<c;h++){var f=h%n,p=h/n|0,d=p*this.segWidth+f,_=p*this.segWidth+f+1,m=(p+1)*this.segWidth+f,y=(p+1)*this.segWidth+f+1;r.push(d,_,m,_,y,m)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Ts),Po=function(t){function e(e,i,r){void 0===e&&(e=200),void 0===r&&(r=0);var n=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return n.points=i,n._width=e,n.textureScale=r,n.build(),n}return To(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var n=i.data,a=r.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;for(var s=0,o=t[0],h=this._width*this.textureScale,l=t.length,u=0;u<l;u++){var c=4*u;if(this.textureScale>0){var f=o.x-t[u].x,p=o.y-t[u].y,d=Math.sqrt(f*f+p*p);o=t[u],s+=d/h}else s=u/(l-1);n[c]=s,n[c+1]=0,n[c+2]=s,n[c+3]=1}var _=0;for(u=0;u<l-1;u++)c=2*u,a[_++]=c,a[_++]=c+1,a[_++]=c+2,a[_++]=c+2,a[_++]=c+1,a[_++]=c+3;i.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],r=0,n=0,a=this.buffers[0].data,s=t.length,o=0;o<s;o++){var h=t[o],l=4*o;n=-((e=o<t.length-1?t[o+1]:h).x-i.x),r=e.y-i.y;var u=Math.sqrt(r*r+n*n),c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=u,n/=u,r*=c,n*=c,a[l]=h.x+r,a[l+1]=h.y+n,a[l+2]=h.x-r,a[l+3]=h.y-n,i=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Ts),Eo=function(e){function i(i,r,n){void 0===n&&(n=0);var a=this,s=new Po(i.height,r,n),o=new bs(i);return n>0&&(i.baseTexture.wrapMode=t.WRAP_MODES.REPEAT),(a=e.call(this,s,o)||this).autoUpdate=!0,a}return To(i,e),i.prototype._render=function(t){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),e.prototype._render.call(this,t)},i}(vs),Ao=function(t){function e(e,i,r){var n=this,a=new xo(e.width,e.height,i,r),s=new bs(Ii.WHITE);return(n=t.call(this,a,s)||this).texture=e,n}return To(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(vs),So=function(t){function e(e,i,r,n,a){void 0===e&&(e=Ii.EMPTY);var s=this,o=new Ts(i,r,n);o.getBuffer("aVertexPosition").static=!1;var h=new bs(e);return(s=t.call(this,o,h,null,a)||this).autoUpdate=!0,s}return To(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(vs),wo=function(t){function e(e,i,r,n,a){void 0===i&&(i=10),void 0===r&&(r=10),void 0===n&&(n=10),void 0===a&&(a=10);var s=t.call(this,Ii.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=i,s._rightWidth=n,s._topHeight=r,s._bottomHeight=a,s.texture=e,s}return To(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,r=this._height>i?1:this._height/i;return Math.min(e,r)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(Ao),Do=function(t,e){return(Do=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},Oo=function(e){function i(t,i){void 0===i&&(i=!0);var r=e.call(this,t[0]instanceof Ii?t[0]:t[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=i,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=t,r}return function(t,e){function i(){this.constructor=t}Do(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(i,e),i.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ze.shared.remove(this.update,this),this._isConnectedToTicker=!1))},i.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ze.shared.add(this.update,this,t.UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},i.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},i.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},i.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},i.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},i.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},i.fromFrames=function(t){for(var e=[],r=0;r<t.length;++r)e.push(Ii.from(t[r]));return new i(e)},i.fromImages=function(t){for(var e=[],r=0;r<t.length;++r)e.push(Ii.from(t[r]));return new i(e)},Object.defineProperty(i.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Ii)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ze.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ze.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),i}(Ca);rn.registerPlugin("accessibility",We),rn.registerPlugin("extract",bn),rn.registerPlugin("interaction",ni),rn.registerPlugin("particle",Kn),rn.registerPlugin("prepare",rs),rn.registerPlugin("batch",mn),rn.registerPlugin("tilingSprite",ps),Yn.registerPlugin(Fs),Yn.registerPlugin(ss),yn.registerPlugin(Ke),yn.registerPlugin(Gn);var Io={AlphaFilter:Ns,BlurFilter:ao,BlurFilterPass:no,ColorMatrixFilter:oo,DisplacementFilter:lo,FXAAFilter:co,NoiseFilter:po};return t.AbstractBatchRenderer=un,t.AbstractRenderer=en,t.AccessibilityManager=We,t.AnimatedSprite=Oo,t.AppLoaderPlugin=Gn,t.Application=yn,t.Attribute=Fi,t.BasePrepare=$a,t.BaseRenderTexture=wi,t.BaseTexture=pi,t.BatchDrawCall=on,t.BatchGeometry=fn,t.BatchPluginFactory=_n,t.BatchRenderer=mn,t.BatchShaderGenerator=cn,t.BatchTextureArray=hn,t.BitmapFont=Is,t.BitmapFontData=Ps,t.BitmapFontLoader=Fs,t.BitmapText=Rs,t.Bounds=Le,t.Buffer=Ni,t.Circle=Te,t.Container=Ge,t.CountLimiter=Ha,t.DEG_TO_RAD=ve,t.DisplayObject=je,t.Ellipse=xe,t.Extract=bn,t.FillStyle=Jn,t.Filter=Cr,t.FilterState=Wi,t.Framebuffer=Si,t.GLFramebuffer=$i,t.GLProgram=Hr,t.GLTexture=Qr,t.GRAPHICS_CURVES=Qn,t.Geometry=Yi,t.Graphics=Da,t.GraphicsData=Ta,t.GraphicsGeometry=Ea,t.IGLUniformData=function(){},t.InteractionData=Qe,t.InteractionEvent=$e,t.InteractionManager=ni,t.InteractionTrackingData=ti,t.LineStyle=Aa,t.Loader=Yn,t.LoaderResource=Un,t.MaskData=ar,t.Matrix=we,t.Mesh=vs,t.MeshBatchUvs=ms,t.MeshGeometry=Ts,t.MeshMaterial=bs,t.NineSlicePlane=wo,t.ObjectRenderer=Zi,t.ObservablePoint=Se,t.PI_2=ye,t.ParticleContainer=qn,t.ParticleRenderer=Kn,t.PlaneGeometry=xo,t.Point=Ae,t.Polygon=Pe,t.Prepare=rs,t.Program=Or,t.Quad=Gi,t.QuadUv=Vi,t.RAD_TO_DEG=ge,t.Rectangle=be,t.RenderTexture=Ci,t.RenderTexturePool=Ri,t.Renderer=rn,t.RopeGeometry=Po,t.RoundedRectangle=Ee,t.Runner=ai,t.Shader=Ir,t.SimpleMesh=So,t.SimplePlane=Ao,t.SimpleRope=Eo,t.Sprite=Ca,t.SpriteMaskFilter=Br,t.Spritesheet=as,t.SpritesheetLoader=ss,t.State=Mr,t.System=Ei,t.TemporaryDisplayObject=Xe,t.Text=Ga,t.TextMetrics=ja,t.TextStyle=Na,t.Texture=Ii,t.TextureLoader=Xn,t.TextureMatrix=Fr,t.TextureUvs=Di,t.Ticker=Ze,t.TickerPlugin=Ke,t.TilingSprite=us,t.TilingSpriteRenderer=ps,t.TimeLimiter=ns,t.Transform=Ne,t.UniformGroup=zi,t.VERSION="5.3.12",t.ViewableBuffer=ln,t.accessibleTarget=Ve,t.autoDetectRenderer=nn,t.checkMaxIfStatementsInShader=Sr,t.defaultFilterVertex=sn,t.defaultVertex=an,t.filters=Io,t.graphicsUtils=ba,t.groupD8=Be,t.interactiveTarget=ii,t.isMobile=C,t.resources=Pi,t.settings=R,t.systems=$r,t.uniformParsers=Tr,t.useDeprecated=function(){var t=this;Object.defineProperties(t,{SVG_SIZE:{get:function(){return ae(vo,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),t.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return ae(vo,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),t.Transform}},TransformBase:{get:function(){return ae(vo,"PIXI.TransformBase class has been removed, use PIXI.Transform"),t.Transform}},TRANSFORM_MODE:{get:function(){return ae(vo,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return ae(vo,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),t.Renderer}},CanvasRenderTarget:{get:function(){return ae(vo,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),t.utils.CanvasRenderTarget}},loader:{get:function(){return ae(vo,"PIXI.loader instance has moved to PIXI.Loader.shared"),t.Loader.shared}},FilterManager:{get:function(){return ae(vo,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),t.systems.FilterSystem}},CanvasTinter:{get:function(){return ae("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),t.canvasUtils}},GroupD8:{get:function(){return ae("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),t.groupD8}}}),t.accessibility={},Object.defineProperties(t.accessibility,{AccessibilityManager:{get:function(){return ae("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),t.AccessibilityManager}}}),t.interaction={},Object.defineProperties(t.interaction,{InteractionManager:{get:function(){return ae("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),t.InteractionManager}},InteractionData:{get:function(){return ae("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),t.InteractionData}},InteractionEvent:{get:function(){return ae("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),t.InteractionEvent}}}),t.prepare={},Object.defineProperties(t.prepare,{BasePrepare:{get:function(){return ae("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),t.BasePrepare}},Prepare:{get:function(){return ae("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),t.Prepare}},CanvasPrepare:{get:function(){return ae("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),t.CanvasPrepare}}}),t.extract={},Object.defineProperties(t.extract,{Extract:{get:function(){return ae("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),t.Extract}},CanvasExtract:{get:function(){return ae("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),t.CanvasExtract}}}),t.extras={},Object.defineProperties(t.extras,{TilingSprite:{get:function(){return ae(vo,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),t.TilingSprite}},TilingSpriteRenderer:{get:function(){return ae(vo,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),t.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return ae(vo,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),t.AnimatedSprite}},BitmapText:{get:function(){return ae(vo,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),t.BitmapText}}}),t.TilingSprite.fromFrame=function(e,i,r){return ae("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),t.TilingSprite.from(e,{width:i,height:r})},t.TilingSprite.fromImage=function(e,i,n,a){return void 0===a&&(a={}),ae("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),a&&"object"!=r(a)&&(a={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),a.width=i,a.height=n,t.TilingSprite.from(e,a)},Object.defineProperties(t.utils,{getSvgSize:{get:function(){return ae(vo,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),t.resources.SVGResource.getSize}}}),t.mesh={},Object.defineProperties(t.mesh,{Mesh:{get:function(){return ae(vo,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),t.SimpleMesh}},NineSlicePlane:{get:function(){return ae(vo,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),t.NineSlicePlane}},Plane:{get:function(){return ae(vo,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),t.SimplePlane}},Rope:{get:function(){return ae(vo,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),t.SimpleRope}},RawMesh:{get:function(){return ae(vo,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),t.Mesh}},CanvasMeshRenderer:{get:function(){return ae(vo,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),t.CanvasMeshRenderer}},MeshRenderer:{get:function(){return ae(vo,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),t.MeshRenderer}}}),t.particles={},Object.defineProperties(t.particles,{ParticleContainer:{get:function(){return ae(vo,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),t.ParticleContainer}},ParticleRenderer:{get:function(){return ae(vo,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),t.ParticleRenderer}}}),t.ticker={},Object.defineProperties(t.ticker,{Ticker:{get:function(){return ae(vo,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),t.Ticker}},shared:{get:function(){return ae(vo,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),t.Ticker.shared}}}),t.loaders={},Object.defineProperties(t.loaders,{Loader:{get:function(){return ae(vo,"PIXI.loaders.Loader class has moved to PIXI.Loader"),t.Loader}},Resource:{get:function(){return ae(vo,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),t.LoaderResource}},bitmapFontParser:{get:function(){return ae(vo,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),t.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){ae(vo,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return ae(vo,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),t.SpritesheetLoader.use}},getResourcePath:{get:function(){return ae(vo,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),t.SpritesheetLoader.getResourcePath}}}),t.Loader.addPixiMiddleware=function(e){return ae(vo,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),t.loaders.Loader.registerPlugin({use:e()})};var e=function(t){return"on"+t.charAt(0).toUpperCase()+t.slice(1)};Object.assign(t.Loader.prototype,{on:function(t){var i=e(t);ae(vo,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+i+".add")},once:function(t){var i=e(t);ae(vo,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+i+".once")},off:function(t){var i=e(t);ae(vo,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+i+".detach")}}),Object.defineProperty(t.extract,"WebGLExtract",{get:function(){return ae(vo,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),t.Extract}}),Object.defineProperty(t.prepare,"WebGLPrepare",{get:function(){return ae(vo,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),t.Prepare}}),t.Container.prototype._renderWebGL=function(t){ae(vo,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(t)},t.Container.prototype.renderWebGL=function(t){ae(vo,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(t)},t.DisplayObject.prototype.renderWebGL=function(t){ae(vo,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(t)},t.Container.prototype.renderAdvancedWebGL=function(t){ae(vo,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(t)},Object.defineProperties(t.settings,{TRANSFORM_MODE:{get:function(){return ae(vo,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){ae(vo,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var i=t.BaseTexture;i.prototype.loadSource=function(e){ae(vo,"PIXI.BaseTexture.loadSource method has been deprecated");var i=t.resources.autoDetectResource(e);i.internal=!0,this.setResource(i),this.update()};var n=!1;Object.defineProperties(i.prototype,{hasLoaded:{get:function(){return ae(vo,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var t;return ae(vo,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(t=this.resource)||void 0===t?void 0:t.url},set:function(t){ae(vo,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=t)}},source:{get:function(){return ae(vo,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(t){ae(vo,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=t)}},premultiplyAlpha:{get:function(){return ae("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){ae("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}},_id:{get:function(){return n||(ae("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),n=!0),this._batchLocation},set:function(t){this._batchLocation=t}}}),i.fromImage=function(t,e,r,n){ae(vo,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");var a={scale:n,crossorigin:e};return i.from(t,{scaleMode:r,resourceOptions:a})},i.fromCanvas=function(t,e){return ae(vo,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),i.from(t,{scaleMode:e})},i.fromSVG=function(t,e,r,n){ae(vo,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");var a={scale:n,crossorigin:e};return i.from(t,{scaleMode:r,resourceOptions:a})},Object.defineProperties(t.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return ae("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){ae("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}}}),t.Point.prototype.copy=function(t){return ae(vo,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(t)},t.ObservablePoint.prototype.copy=function(t){return ae(vo,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(t)},t.Rectangle.prototype.copy=function(t){return ae(vo,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(t)},t.Matrix.prototype.copy=function(t){return ae(vo,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(t)},t.systems.StateSystem.prototype.setState=function(t){return ae("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(t)},Object.assign(t.systems.FilterSystem.prototype,{getRenderTarget:function(t,e){return ae(vo,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,e)},returnRenderTarget:function(t){ae(vo,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(t)},calculateScreenSpaceMatrix:function(t){ae(vo,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var e=t.identity(),i=this.activeState,r=i.sourceFrame,n=i.destinationFrame;return e.translate(r.x/n.width,r.y/n.height),e.scale(n.width,n.height),e},calculateNormalizedScreenSpaceMatrix:function(t){ae(vo,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var e=this.activeState,i=e.sourceFrame,r=e.destinationFrame,n=t.identity();n.translate(i.x/r.width,i.y/r.height);var a=r.width/i.width,s=r.height/i.height;return n.scale(a,s),n}}),Object.defineProperties(t.RenderTexture.prototype,{sourceFrame:{get:function(){return ae(vo,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return ae(vo,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var a=function(t){function e(e,i,r,n){return ae(vo,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!0,e,i,r,n)||this}return go(e,t),e}(t.filters.BlurFilterPass),s=function(t){function e(e,i,r,n){return ae(vo,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),t.call(this,!1,e,i,r,n)||this}return go(e,t),e}(t.filters.BlurFilterPass);Object.assign(t.filters,{BlurXFilter:a,BlurYFilter:s});var o=t.Sprite,h=t.Texture,l=t.Graphics;function u(t,e,i,r){return ae(vo,"PIXI.Sprite."+t+" method is deprecated, use PIXI.Sprite.from"),o.from(e,{resourceOptions:{scale:r,crossorigin:i}})}function c(t,e,i,r){return ae(vo,"PIXI.Texture."+t+" method is deprecated, use PIXI.Texture.from"),h.from(e,{resourceOptions:{scale:r,crossorigin:i}})}l.prototype.generateCanvasTexture||(l.prototype.generateCanvasTexture=function(){ae(vo,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(l.prototype,"graphicsData",{get:function(){return ae(vo,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),o.fromImage=u.bind(null,"fromImage"),o.fromSVG=u.bind(null,"fromSVG"),o.fromCanvas=u.bind(null,"fromCanvas"),o.fromVideo=u.bind(null,"fromVideo"),o.fromFrame=u.bind(null,"fromFrame"),h.fromImage=c.bind(null,"fromImage"),h.fromSVG=c.bind(null,"fromSVG"),h.fromCanvas=c.bind(null,"fromCanvas"),h.fromVideo=c.bind(null,"fromVideo"),h.fromFrame=c.bind(null,"fromFrame"),Object.defineProperty(t.AbstractRenderer.prototype,"autoResize",{get:function(){return ae(vo,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(t){ae(vo,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=t}}),Object.defineProperty(t.Renderer.prototype,"textureManager",{get:function(){return ae(vo,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),t.utils.mixins={mixin:function(){ae(vo,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){ae(vo,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){ae(vo,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(t.BitmapText.prototype,"font",{get:function(){return ae("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(e){if(ae("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),e){var i={font:e};this._upgradeStyle(i),i.fontSize=i.fontSize||t.BitmapFont.available[i.fontName].size,this._fontName=i.fontName,this._fontSize=i.fontSize,this.dirty=!0}}})},t.utils=me,t}({});n.useDeprecated(),GameGlobal.PIXI=n,t.exports&&(e=t.exports=n),e.PIXI=n},97:(t,e,i)=>{"use strict";i.d(e,{Lp:()=>c,ML:()=>r,MQ:()=>o,SX:()=>l,VN:()=>f,ZP:()=>n,bJ:()=>u,fw:()=>h,li:()=>a}),t=i.hmd(t);var r="undefined"!=typeof window?window:t.exports&&void 0!==i.g?i.g:{},n=function(t){var e={},i=t.document,r=t.GreenSockGlobals=t.GreenSockGlobals||t;if(r.TweenLite)return r.TweenLite;var n,a,s,o,h,l,u,c=function(t){var e,i=t.split("."),n=r;for(e=0;e<i.length;e++)n[i[e]]=n=n[i[e]]||{};return n},f=c("com.greensock"),p=1e-8,d=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},_=function(){},m=(l=Object.prototype.toString,u=l.call([]),function(t){return null!=t&&(t instanceof Array||"object"==typeof t&&!!t.push&&l.call(t)===u)}),y={},g=function(t,i,n,a){this.sc=y[t]?y[t].sc:[],y[t]=this,this.gsClass=null,this.func=n;var s=[];this.check=function(o){for(var h,l,u,f,p=i.length,d=p;--p>-1;)(h=y[i[p]]||new g(i[p],[])).gsClass?(s[p]=h.gsClass,d--):o&&h.sc.push(this);if(0===d&&n)for(u=(l=("com.greensock."+t).split(".")).pop(),f=c(l.join("."))[u]=this.gsClass=n.apply(n,s),a&&(r[u]=e[u]=f),p=0;p<this.sc.length;p++)this.sc[p].check()},this.check(!0)},v=t._gsDefine=function(t,e,i,r){return new g(t,e,i,r)},b=f._class=function(t,e,i){return e=e||function(){},v(t,[],(function(){return e}),i),e};v.globals=r;var T=[0,0,1,1],x=b("easing.Ease",(function(t,e,i,r){this._func=t,this._type=i||0,this._power=r||0,this._params=e?T.concat(e):T}),!0),P=x.map={},E=x.register=function(t,e,i,r){for(var n,a,s,o,h=e.split(","),l=h.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--l>-1;)for(a=h[l],n=r?b("easing."+a,null,!0):f.easing[a]||{},s=u.length;--s>-1;)o=u[s],P[a+"."+o]=P[o+a]=n[o]=t.getRatio?t:t[o]||new t};for((s=x.prototype)._calcEnd=!1,s.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,r=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===e?1-r:2===e?r:t<.5?r/2:1-r/2},a=(n=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--a>-1;)s=n[a]+",Power"+a,E(new x(null,null,1,a),s,"easeOut",!0),E(new x(null,null,2,a),s,"easeIn"+(0===a?",easeNone":"")),E(new x(null,null,3,a),s,"easeInOut");P.linear=f.easing.Linear.easeIn,P.swing=f.easing.Quad.easeInOut;var A=b("events.EventDispatcher",(function(t){this._listeners={},this._eventTarget=t||this}));(s=A.prototype).addEventListener=function(t,e,i,r,n){n=n||0;var a,s,l=this._listeners[t],u=0;for(this!==o||h||o.wake(),null==l&&(this._listeners[t]=l=[]),s=l.length;--s>-1;)(a=l[s]).c===e&&a.s===i?l.splice(s,1):0===u&&a.pr<n&&(u=s+1);l.splice(u,0,{c:e,s:i,up:r,pr:n})},s.removeEventListener=function(t,e){var i,r=this._listeners[t];if(r)for(i=r.length;--i>-1;)if(r[i].c===e)return void r.splice(i,1)},s.dispatchEvent=function(t){var e,i,r,n=this._listeners[t];if(n)for((e=n.length)>1&&(n=n.slice(0)),i=this._eventTarget;--e>-1;)(r=n[e])&&(r.up?r.c.call(r.s||i,{type:t,target:i}):r.c.call(r.s||i))};var S=t.requestAnimationFrame,w=t.cancelAnimationFrame,D=Date.now||function(){return(new Date).getTime()},O=D();for(a=(n=["ms","moz","webkit","o"]).length;--a>-1&&!S;)S=t[n[a]+"RequestAnimationFrame"],w=t[n[a]+"CancelAnimationFrame"]||t[n[a]+"CancelRequestAnimationFrame"];b("Ticker",(function(t,e){var r,n,a,s,l,u=this,c=D(),f=!(!1===e||!S)&&"auto",p=500,d=33,m=function(t){var e,i,o=D()-O;o>p&&(c+=o-d),O+=o,u.time=(O-c)/1e3,e=u.time-l,(!r||e>0||!0===t)&&(u.frame++,l+=e+(e>=s?.004:s-e),i=!0),!0!==t&&(a=n(m)),i&&u.dispatchEvent("tick")};A.call(u),u.time=u.frame=0,u.tick=function(){m(!0)},u.lagSmoothing=function(t,e){if(!arguments.length)return p<1e8;p=t||1e8,d=Math.min(e,p,0)},u.sleep=function(){null!=a&&(f&&w?w(a):clearTimeout(a),n=_,a=null,u===o&&(h=!1))},u.wake=function(t){null!==a?u.sleep():t?c+=-O+(O=D()):u.frame>10&&(O=D()-p+5),n=0===r?_:f&&S?S:function(t){return setTimeout(t,1e3*(l-u.time)+1|0)},u===o&&(h=!0),m(2)},u.fps=function(t){if(!arguments.length)return r;s=1/((r=t)||60),l=this.time+s,u.wake()},u.useRAF=function(t){if(!arguments.length)return f;u.sleep(),f=t,u.fps(r)},u.fps(t),setTimeout((function(){"auto"===f&&u.frame<5&&"hidden"!==(i||{}).visibilityState&&u.useRAF(!1)}),1500)})),(s=f.Ticker.prototype=new f.events.EventDispatcher).constructor=f.Ticker;var I=b("core.Animation",(function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!!e.immediateRender,this.data=e.data,this._reversed=!!e.reversed,K){h||o.wake();var i=this.vars.useFrames?Z:K;i.add(this,i._time),this.vars.paused&&this.paused(!0)}}));o=I.ticker=new f.Ticker,(s=I.prototype)._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var M=function(){h&&D()-O>2e3&&("hidden"!==(i||{}).visibilityState||!o.lagSmoothing())&&o.wake();var t=setTimeout(M,2e3);t.unref&&t.unref()};M(),s.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},s.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},s.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},s.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},s.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},s.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},s.render=function(t,e,i){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},s.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<i+this.totalDuration()/this._timeScale-p},s._enabled=function(t,e){return h||o.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(t,e){return this._enabled(!1,!1)},s.kill=function(t,e){return this._kill(t,e),this},s._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},s._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},s._callback=function(t){var e=this.vars,i=e[t],r=e[t+"Params"],n=e[t+"Scope"]||e.callbackScope||this;switch(r?r.length:0){case 0:i.call(n);break;case 1:i.call(n,r[0]);break;case 2:i.call(n,r[0],r[1]);break;default:i.apply(n,r)}},s.eventCallback=function(t,e,i,r){if("on"===(t||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[t];null==e?delete n[t]:(n[t]=e,n[t+"Params"]=m(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,n[t+"Scope"]=r),"onUpdate"===t&&(this._onUpdate=e)}return this},s.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},s.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},s.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},s.totalTime=function(t,e,i){if(h||o.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,n=this._timeline;if(t>r&&!i&&(t=r),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?r-t:t)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(B.length&&J(),this.render(t,e,!1),B.length&&J())}return this},s.progress=s.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},s.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},s.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,i;for(t=t||p,this._timeline&&this._timeline.smoothChildTiming&&(i=(e=this._pauseTime)||0===e?e:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/t),this._timeScale=t,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},s.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(t){if(!arguments.length)return this._paused;var e,i,r=this._timeline;return t!=this._paused&&r&&(h||t||o.wake(),i=(e=r.rawTime())-this._pauseTime,!t&&r.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=r.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var C=b("core.SimpleTimeline",(function(t){I.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0}));(s=C.prototype=new I).constructor=C,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(t,e,i,r){var n,a;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=this.rawTime()-(t._timeline.rawTime()-t._pauseTime)),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),n=this._last,this._sortChildren)for(a=t._startTime;n&&n._startTime>a;)n=n._prev;return n?(t._next=n._next,n._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=n,this._recent=t,this._timeline&&this._uncache(!0),this},s._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(t,e,i){var r,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;n;)r=n._next,(n._active||t>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=r},s.rawTime=function(){return h||o.wake(),this._totalTime};var R=b("TweenLite",(function(e,i,r){if(I.call(this,i,r),this.render=R.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:R.selector(e)||e;var n,a,s,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?q[R.defaultOverwrite]:"number"==typeof h?h>>0:q[h],(o||e instanceof Array||e.push&&m(e))&&"number"!=typeof e[0])for(this._targets=s=d(e),this._propLookup=[],this._siblings=[],n=0;n<s.length;n++)(a=s[n])?"string"!=typeof a?a.length&&a!==t&&a[0]&&(a[0]===t||a[0].nodeType&&a[0].style&&!a.nodeType)?(s.splice(n--,1),this._targets=s=s.concat(d(a))):(this._siblings[n]=$(a,this,!1),1===h&&this._siblings[n].length>1&&et(a,this,null,1,this._siblings[n])):"string"==typeof(a=s[n--]=R.selector(a))&&s.splice(n+1,1):s.splice(n--,1);else this._propLookup={},this._siblings=$(e,this,!1),1===h&&this._siblings.length>1&&et(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-8,this.render(Math.min(0,-this._delay)))}),!0),F=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)};(s=R.prototype=new I).constructor=R,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,R.version="2.1.3",R.defaultEase=s._ease=new x(null,null,1,1),R.defaultOverwrite="auto",R.ticker=o,R.autoSleep=120,R.lagSmoothing=function(t,e){o.lagSmoothing(t,e)},R.selector=t.$||t.jQuery||function(e){var r=t.$||t.jQuery;return r?(R.selector=r,r(e)):(i||(i=t.document),i?i.querySelectorAll?i.querySelectorAll(e):i.getElementById("#"===e.charAt(0)?e.substr(1):e):e)};var B=[],N={},L=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,k=/[\+-]=-?[\.\d]/,U=function(t){for(var e,i=this._firstPT,r=1e-6;i;)e=i.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m.call(this._tween,e,this._target||i.t,this._tween):e<r&&e>-r&&!i.blob&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},j=function(t){return(1e3*t|0)/1e3+""},X=function(t,e,i,r){var n,a,s,o,h,l,u,c=[],f=0,p="",d=0;for(c.start=t,c.end=e,t=c[0]=t+"",e=c[1]=e+"",i&&(i(c),t=c[0],e=c[1]),c.length=0,n=t.match(L)||[],a=e.match(L)||[],r&&(r._next=null,r.blob=1,c._firstPT=c._applyPT=r),h=a.length,o=0;o<h;o++)u=a[o],p+=(l=e.substr(f,e.indexOf(u,f)-f))||!o?l:",",f+=l.length,d?d=(d+1)%5:"rgba("===l.substr(-5)&&(d=1),u===n[o]||n.length<=o?p+=u:(p&&(c.push(p),p=""),s=parseFloat(n[o]),c.push(s),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s,c:("="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*parseFloat(u.substr(2)):parseFloat(u)-s)||0,f:0,m:d&&d<4?Math.round:j}),f+=u.length;return(p+=e.substr(f))&&c.push(p),c.setRatio=U,k.test(e)&&(c.end=null),c},Y=function(t,e,i,r,n,a,s,o,h){"function"==typeof r&&(r=r(h||0,t));var l=typeof t[e],u="function"!==l?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),c="get"!==i?i:u?s?t[u](s):t[u]():t[e],f="string"==typeof r&&"="===r.charAt(1),p={t,p:e,s:c,f:"function"===l,pg:0,n:n||e,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:f?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-c||0};if(("number"!=typeof c||"number"!=typeof r&&!f)&&(s||isNaN(c)||!f&&isNaN(r)||"boolean"==typeof c||"boolean"==typeof r?(p.fp=s,p={t:X(c,f?parseFloat(p.s)+p.c+(p.s+"").replace(/[0-9\-\.]/g,""):r,o||R.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:n||e,pr:0,m:0}):(p.s=parseFloat(c),f||(p.c=parseFloat(r)-p.s||0))),p.c)return(p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p},G=R._internals={isArray:m,isSelector:F,lazyTweens:B,blobDif:X},V=R._plugins={},H=G.tweenLookup={},z=0,W=G.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Z=I._rootFramesTimeline=new C,K=I._rootTimeline=new C,Q=30,J=G.lazyRender=function(){var t,e,i=B.length;for(N={},t=0;t<i;t++)(e=B[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);B.length=0};K._startTime=o.time,Z._startTime=o.frame,K._active=Z._active=!0,setTimeout(J,1),I._updateRoot=R.render=function(){var t,e,i;if(B.length&&J(),K.render((o.time-K._startTime)*K._timeScale,!1,!1),Z.render((o.frame-Z._startTime)*Z._timeScale,!1,!1),B.length&&J(),o.frame>=Q){for(i in Q=o.frame+(parseInt(R.autoSleep,10)||120),H){for(t=(e=H[i].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete H[i]}if((!(i=K._first)||i._paused)&&R.autoSleep&&!Z._first&&1===o._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||o.sleep()}}},o.addEventListener("tick",I._updateRoot);var $=function(t,e,i){var r,n,a=t._gsTweenID;if(H[a||(t._gsTweenID=a="t"+z++)]||(H[a]={target:t,tweens:[]}),e&&((r=H[a].tweens)[n=r.length]=e,i))for(;--n>-1;)r[n]===e&&r.splice(n,1);return H[a].tweens},tt=function(t,e,i,r){var n,a,s=t.vars.onOverwrite;return s&&(n=s(t,e,i,r)),(s=R.onOverwrite)&&(a=s(t,e,i,r)),!1!==n&&!1!==a},et=function(t,e,i,r,n){var a,s,o,h;if(1===r||r>=4){for(h=n.length,a=0;a<h;a++)if((o=n[a])!==e)o._gc||o._kill(null,t,e)&&(s=!0);else if(5===r)break;return s}var l,u=e._startTime+p,c=[],f=0,d=0===e._duration;for(a=n.length;--a>-1;)(o=n[a])===e||o._gc||o._paused||(o._timeline!==e._timeline?(l=l||it(e,0,d),0===it(o,l,d)&&(c[f++]=o)):o._startTime<=u&&o._startTime+o.totalDuration()/o._timeScale>u&&((d||!o._initted)&&u-o._startTime<=2e-8||(c[f++]=o)));for(a=f;--a>-1;)if(h=(o=c[a])._firstPT,2===r&&o._kill(i,t,e)&&(s=!0),2!==r||!o._firstPT&&o._initted&&h){if(2!==r&&!tt(o,e))continue;o._enabled(!1,!1)&&(s=!0)}return s},it=function(t,e,i){for(var r=t._timeline,n=r._timeScale,a=t._startTime;r._timeline;){if(a+=r._startTime,n*=r._timeScale,r._paused)return-100;r=r._timeline}return(a/=n)>e?a-e:i&&a===e||!t._initted&&a-e<2e-8?p:(a+=t.totalDuration()/t._timeScale/n)>e+p?0:a-e-p};s._init=function(){var t,e,i,r,n,a,s=this.vars,o=this._overwrittenProps,h=this._duration,l=!!s.immediateRender,u=s.ease,c=this._startAt;if(s.startAt){for(r in c&&(c.render(-1,!0),c.kill()),n={},s.startAt)n[r]=s.startAt[r];if(n.data="isStart",n.overwrite=!1,n.immediateRender=!0,n.lazy=l&&!1!==s.lazy,n.startAt=n.delay=null,n.onUpdate=s.onUpdate,n.onUpdateParams=s.onUpdateParams,n.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=R.to(this.target||{},0,n),l)if(this._time>0)this._startAt=null;else if(0!==h)return}else if(s.runBackwards&&0!==h)if(c)c.render(-1,!0),c.kill(),this._startAt=null;else{for(r in 0!==this._time&&(l=!1),i={},s)W[r]&&"autoCSS"!==r||(i[r]=s[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&!1!==s.lazy,i.immediateRender=l,this._startAt=R.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=u=u?u instanceof x?u:"function"==typeof u?new x(u,s.easeParams):P[u]||R.defaultEase:R.defaultEase,s.easeParams instanceof Array&&u.config&&(this._ease=u.config.apply(u,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,t=0;t<a;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],o?o[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,o,0);if(e&&R._onPluginEvent("_onInitAllProps",this),o&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},s._initProps=function(e,i,r,n,a){var s,o,h,l,u,c;if(null==e)return!1;for(s in N[e._gsTweenID]&&J(),this.vars.css||e.style&&e!==t&&e.nodeType&&V.css&&!1!==this.vars.autoCSS&&function(t,e){var i,r={};for(i in t)W[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!V[i]||V[i]&&V[i]._autoCSS)||(r[i]=t[i],delete t[i]);t.css=r}(this.vars,e),this.vars)if(c=this.vars[s],W[s])c&&(c instanceof Array||c.push&&m(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[s]=c=this._swapSelfInParams(c,this));else if(V[s]&&(l=new V[s])._onInitTween(e,this.vars[s],this,a)){for(this._firstPT=u={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:l._priority,m:0},o=l._overwriteProps.length;--o>-1;)i[l._overwriteProps[o]]=this._firstPT;(l._priority||l._onInitAllProps)&&(h=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),u._next&&(u._next._prev=u)}else i[s]=Y.call(this,e,s,"get",c,s,0,null,this.vars.stringFilter,a);return n&&this._kill(n,e)?this._initProps(e,i,r,n,a):this._overwrite>1&&this._firstPT&&r.length>1&&et(e,this,i,this._overwrite,r)?(this._kill(i,e),this._initProps(e,i,r,n,a)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(N[e._gsTweenID]=!0),h)},s.render=function(t,e,i){var r,n,a,s,o=this,h=o._time,l=o._duration,u=o._rawPrevTime;if(t>=l-p&&t>=0)o._totalTime=o._time=l,o.ratio=o._ease._calcEnd?o._ease.getRatio(1):1,o._reversed||(r=!0,n="onComplete",i=i||o._timeline.autoRemoveChildren),0===l&&(o._initted||!o.vars.lazy||i)&&(o._startTime===o._timeline._duration&&(t=0),(u<0||t<=0&&t>=-1e-8||u===p&&"isPause"!==o.data)&&u!==t&&(i=!0,u>p&&(n="onReverseComplete")),o._rawPrevTime=s=!e||t||u===t?t:p);else if(t<p)o._totalTime=o._time=0,o.ratio=o._ease._calcEnd?o._ease.getRatio(0):0,(0!==h||0===l&&u>0)&&(n="onReverseComplete",r=o._reversed),t>-1e-8?t=0:t<0&&(o._active=!1,0===l&&(o._initted||!o.vars.lazy||i)&&(u>=0&&(u!==p||"isPause"!==o.data)&&(i=!0),o._rawPrevTime=s=!e||t||u===t?t:p)),(!o._initted||o._startAt&&o._startAt.progress())&&(i=!0);else if(o._totalTime=o._time=t,o._easeType){var c=t/l,f=o._easeType,d=o._easePower;(1===f||3===f&&c>=.5)&&(c=1-c),3===f&&(c*=2),1===d?c*=c:2===d?c*=c*c:3===d?c*=c*c*c:4===d&&(c*=c*c*c*c),o.ratio=1===f?1-c:2===f?c:t/l<.5?c/2:1-c/2}else o.ratio=o._ease.getRatio(t/l);if(o._time!==h||i){if(!o._initted){if(o._init(),!o._initted||o._gc)return;if(!i&&o._firstPT&&(!1!==o.vars.lazy&&o._duration||o.vars.lazy&&!o._duration))return o._time=o._totalTime=h,o._rawPrevTime=u,B.push(o),void(o._lazy=[t,e]);o._time&&!r?o.ratio=o._ease.getRatio(o._time/l):r&&o._ease._calcEnd&&(o.ratio=o._ease.getRatio(0===o._time?0:1))}for(!1!==o._lazy&&(o._lazy=!1),o._active||!o._paused&&o._time!==h&&t>=0&&(o._active=!0),0===h&&(o._startAt&&(t>=0?o._startAt.render(t,!0,i):n||(n="_dummyGS")),o.vars.onStart&&(0===o._time&&0!==l||e||o._callback("onStart"))),a=o._firstPT;a;)a.f?a.t[a.p](a.c*o.ratio+a.s):a.t[a.p]=a.c*o.ratio+a.s,a=a._next;o._onUpdate&&(t<0&&o._startAt&&-1e-4!==t&&o._startAt.render(t,!0,i),e||(o._time!==h||r||i)&&o._callback("onUpdate")),n&&(o._gc&&!i||(t<0&&o._startAt&&!o._onUpdate&&-1e-4!==t&&o._startAt.render(t,!0,i),r&&(o._timeline.autoRemoveChildren&&o._enabled(!1,!1),o._active=!1),!e&&o.vars[n]&&o._callback(n),0===l&&o._rawPrevTime===p&&s!==p&&(o._rawPrevTime=0)))}},s._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:R.selector(e)||e;var r,n,a,s,o,h,l,u,c,f=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,p=this._firstPT;if((m(e)||F(e))&&"number"!=typeof e[0])for(r=e.length;--r>-1;)this._kill(t,e[r],i)&&(h=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(e===this._targets[r]){o=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[r]=t?this._overwrittenProps[r]||{}:"all";break}}else{if(e!==this.target)return!1;o=this._propLookup,n=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(o){if(l=t||o,u=t!==n&&"all"!==n&&t!==o&&("object"!=typeof t||!t._tempKill),i&&(R.onOverwrite||this.vars.onOverwrite)){for(a in l)o[a]&&(c||(c=[]),c.push(a));if((c||!t)&&!tt(this,i,e,c))return!1}for(a in l)(s=o[a])&&(f&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,h=!0),s.pg&&s.t._kill(l)&&(h=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete o[a]),u&&(n[a]=1);!this._firstPT&&this._initted&&p&&this._enabled(!1,!1)}}return h},s.invalidate=function(){this._notifyPluginsOfEnabled&&R._onPluginEvent("_onDisable",this);var t=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],I.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-8,this.render(t,!1,!1!==this.vars.lazy)),this},s._enabled=function(t,e){if(h||o.wake(),t&&this._gc){var i,r=this._targets;if(r)for(i=r.length;--i>-1;)this._siblings[i]=$(r[i],this,!0);else this._siblings=$(this.target,this,!0)}return I.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&R._onPluginEvent(t?"_onEnable":"_onDisable",this)},R.to=function(t,e,i){return new R(t,e,i)},R.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new R(t,e,i)},R.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new R(t,e,r)},R.delayedCall=function(t,e,i,r,n){return new R(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},R.set=function(t,e){return new R(t,0,e)},R.getTweensOf=function(t,e){if(null==t)return[];var i,r,n,a;if(t="string"!=typeof t?t:R.selector(t)||t,(m(t)||F(t))&&"number"!=typeof t[0]){for(i=t.length,r=[];--i>-1;)r=r.concat(R.getTweensOf(t[i],e));for(i=r.length;--i>-1;)for(a=r[i],n=i;--n>-1;)a===r[n]&&r.splice(i,1)}else if(t._gsTweenID)for(i=(r=$(t).concat()).length;--i>-1;)(r[i]._gc||e&&!r[i].isActive())&&r.splice(i,1);return r||[]},R.killTweensOf=R.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var r=R.getTweensOf(t,e),n=r.length;--n>-1;)r[n]._kill(i,t)};var rt=b("plugins.TweenPlugin",(function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=rt.prototype}),!0);if(s=rt.prototype,rt.version="1.19.0",rt.API=2,s._firstPT=null,s._addTween=Y,s.setRatio=U,s._kill=function(t){var e,i=this._overwriteProps,r=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;r;)null!=t[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},s._mod=s._roundProps=function(t){for(var e,i=this._firstPT;i;)(e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},R._onPluginEvent=function(t,e){var i,r,n,a,s,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(s=o._next,r=n;r&&r.pr>o.pr;)r=r._next;(o._prev=r?r._prev:a)?o._prev._next=o:n=o,(o._next=r)?r._prev=o:a=o,o=s}o=e._firstPT=n}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},rt.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===rt.API&&(V[(new t[e])._propName]=t[e]);return!0},v.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,r=t.priority||0,n=t.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=b("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",(function(){rt.call(this,i,r),this._overwriteProps=n||[]}),!0===t.global),o=s.prototype=new rt(i);for(e in o.constructor=s,s.API=t.API,a)"function"==typeof t[e]&&(o[a[e]]=t[e]);return s.version=t.version,rt.activate([s]),s},n=t._gsQueue){for(a=0;a<n.length;a++)n[a]();for(s in y)y[s].func||t.console.log("GSAP encountered missing dependency: "+s)}return h=!1,R}(r),a=r.GreenSockGlobals,s=a.com.greensock,o=s.core.SimpleTimeline,h=s.core.Animation,l=a.Ease,u=a.Linear,c=(a.Power1,a.Power2),f=(a.Power3,a.Power4,a.TweenPlugin);s.events.EventDispatcher}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var a=e[r]={id:r,loaded:!1,exports:{}};return t[r](a,a.exports,i),a.loaded=!0,a.exports}i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var r={};return(()=>{"use strict";var t,e=i(170),r=(t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)},function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)});const n=function(t){function e(e,i,r){var n=t.call(this)||this;return n.game=e,n.name=i,r&&r.addChild(n),n.x=0,n.y=0,n}return r(e,t),e.prototype.setPosition=function(t,e){this.x=t,this.y=e},e.prototype.add=function(t,e){for(var i=this,r=e?function(t){t.anchor&&t.anchor.set(.5),i.addChild(t)}:function(t){i.addChild(t)},n=0,a=t;n<a.length;n++)r(a[n])},e.prototype.update=function(){},e}(e.Container);var a=function(t,e,i){if(i||2===arguments.length)for(var r,n=0,a=e.length;n<a;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))},s={redirect:function(){return 100*Math.random()<50?1:-1},between:function(t){return t[0]+Math.floor(Math.random()*(t[1]-t[0]))},crit:function(t,e,i){return Math.floor(100*Math.random())<e?Math.round(t*(1+i/100)):t},clamp:function(t,e,i){return t<e?e:i<t?i:t},angleToPointer:function(t,e,i){if(e){var r=e.toGlobal(t.position);return Math.atan2(r.y-i.y,r.x-i.x)}return Math.atan2(t.y-i.y,t.x-i.x)},angleBetweenPoints:function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},o=function(t,e,i){var r=Math.PI*i/180;return[t*Math.cos(r)-e*Math.sin(r),t*Math.sin(r)+e*Math.cos(r)]},h={transformToTexture:function(t,e){return t.app.renderer.generateTexture(e,1,window.devicePixelRatio)},transformToSprite:function(t,e,i){var r=h.transformToTexture(t,e);return t.add.image("",r,i)}},l=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const u=function(t){function e(e,i){var r=t.call(this)||this;return r.game=e,r.id=i||"",r}return l(e,t),e.prototype.setBorder=function(t){this.lineStyle(t.width,t.color,t.alpha,1)},e.prototype.generateLine=function(t){return this.setBorder(t),this},e.prototype.generateRect=function(t,e,i,r){return this.beginFill(t,"number"==typeof r?r:1),i&&(e[0]-=.5*e[2],e[1]-=.5*e[3]),5===e.length?this.drawRoundedRect.apply(this,e):this.drawRect.apply(this,e),this.endFill(),this},e.prototype.generateStrokeLine=function(t,e,i,r){return this.setBorder({width:t,color:i,alpha:1}),r[2]>r[3]?r[1]-=.5*r[3]:r[0]-=.5*r[2],this.beginFill(e),this.drawRect.apply(this,r),this.endFill(),this},e.prototype.generateRectLineStyle=function(t,e,i,r,n){var a=t[0],s=t[1],o=r[0],h=r[1],l=r[2],u=r[3],c=r[4],f=o-.5*a-l*n.x-s,p=h-.5*a-u*n.y-s,d=l+a+2*s,_=u+a+2*s;return this.lineStyle(a+2*s,i,1),5===r.length?(this.drawRoundedRect.apply(this,[f,p,d,_,c]),this.lineStyle(a,e,1),this.drawRoundedRect.apply(this,[f,p,d,_,c])):(this.drawRect.apply(this,[f,p,d,_]),this.lineStyle(a,e,1),this.drawRect.apply(this,[f,p,d,_])),this},e.prototype.generatePolygonLineStyle=function(t,e,i,r,n,s,h,l){var u,c,f,p,d,_,m,y,g;return u=r,c=i[0],f=i[1],p=i[2],d=i[3],_=i[4],m=i[5],y=i[6],g=i[7],i=function(t,e){var i=t[2],r=t[3],n=t[4],s=t[5],h=t[6],l=t[7],u=o(t[0],t[1],e),c=o(i,r,e),f=o(n,s,e),p=o(h,l,e);return a(a(a(a([],u,!0),c,!0),f,!0),p,!0)}(i=[c-=u,f-=u,p+=u,d-=u,_+=u,m+=u,y-=u,g+=u],l),i=i.map((function(i,r){return i+(r%2>0?e:t)})),this.lineStyle(r+2*n,h),this.drawPolygon(i),this.lineStyle(r,s),this.drawPolygon(i),this},e.prototype.generateTriangle=function(t,e,i,r,n){var a=n||4;this.beginFill(t),this.setBorder({width:i,color:e,alpha:1});var s=2*i;if(this.width>this.height){var o=r.x+this.width-s;this.moveTo(o+2*a,r.y),this.lineTo(o,r.y-a),this.lineTo(o,r.y+a),this.closePath()}else{var h=r.y+this.height-s;this.moveTo(r.x,h+2*a),this.lineTo(r.x+a,h),this.lineTo(r.x-a,h),this.closePath()}return this.endFill(),this},e.prototype.generateCircle=function(t,e,i){return this.beginFill(t,"number"==typeof i?i:1),this.drawCircle.apply(this,e),this.endFill(),this},e.prototype.generateLineCircle=function(t,e,i,r){return this.beginFill(t,"number"==typeof r?r:1),this.drawCircle.apply(this,e),this.beginHole(),this.drawCircle(e[0],e[1],e[2]-(i||10)),this.endHole(),this.endFill(),this},e.prototype.generateStar=function(t,e,i,r,n,a,s){var o=n[0],h=n[1];return this.lineStyle(a,h),this.beginFill(o,1),this.drawStar(t,e,i,r,void 0,s),this.endFill(),this},e}(e.Graphics);var c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),f=function(t){function e(e,i,r,n,a){var s,o=t.call(this,r,n)||this;return o.game=i,(s=o.anchor).set.apply(s,a),o.id=e,o.name=e,o}return c(e,t),e}(e.Text);const p=f;var d=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),_={scale:!0,position:!0,visible:!0,rotation:!0,uvs:!0,alpha:!0};const m=function(t){function i(e,r,n){var a=t.call(this,r,_,void 0,!0)||this;return a.shooting=!1,a.particleBooleanDispose=function(t,e){return t?e:1},a.multeShootOnce=function(t,e,i,r,n){for(var s=n.xDirect,o=n.xRandom,h=n.yDirect,l=n.yRandom,u=n.offsetX,c=n.offsetY,f=n.count,p=n.duration,d=n.ease,_=n.inout,m=n.angle,y=n.angleRandom,g=n.angleDirect,v=n.width,b=n.height,T=0,x=a.shootMulite(f);T<x.length;T++){var P=x[T];P.x=i+t.math.redirect()*Math.random()*v,P.y=r+t.math.redirect()*Math.random()*b,e.instance.to(P,p,{x:P.x+a.particleBooleanDispose(s,t.math.redirect())*a.particleBooleanDispose(o,Math.random())*u,y:P.y+a.particleBooleanDispose(h,t.math.redirect())*a.particleBooleanDispose(l,Math.random())*c,angle:P.angle+a.particleBooleanDispose(g,t.math.redirect())*a.particleBooleanDispose(y,Math.random())*m,alpha:0,ease:e[d][_]})}},a.game=e,a.key=n,a.alpha=1,a.throtting=i.throtting,r&&a.create(r,n),a}return d(i,t),i.prototype.create=function(t,i){void 0===t&&(t=10);for(var r=[],n=0;n<t;n++){var a=new e.Sprite(e.utils.TextureCache[i]);a.alpha=0,a.anchor.set(.5),r.push(a)}return this.addChild.apply(this,r),r},i.prototype.getParticle=function(t){var e=this.children.filter((function(t){return 0===t.alpha})),i=t||1;return e.length>=i?e.slice(0,i):this.create(i,this.key)},i.prototype.shoot=function(){var t=this.getParticle(1)[0];return t.alpha=1,t.angle=0,t},i.prototype.shootMulite=function(t){return void 0===t&&(t=1),this.getParticle(t).map((function(t){return t.alpha=1,t.angle=0,t}))},i.throtting=4,i}(e.ParticleContainer);var y=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const g=function(t){function e(e,i,r){return t.call(this,e,i,r)||this}return y(e,t),e.prototype.initialTiling=function(t){t.addChild(this)},Object.defineProperty(e.prototype,"tileX",{get:function(){return this.tilePosition.x},set:function(t){this.tilePosition.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileY",{get:function(){return this.tilePosition.y},set:function(t){this.tilePosition.x=t},enumerable:!1,configurable:!0}),e.prototype.moveX=function(t){this.tileX=this.tilePosition.x+t},e.prototype.moveY=function(t){this.tileX=this.tilePosition.y+t},e}(e.TilingSprite);var v=i(97);v.ML._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],(function(){var t=function(t){v.MQ.call(this,t);var e,i,r=this,n=r.vars;for(i in r._labels={},r.autoRemoveChildren=!!n.autoRemoveChildren,r.smoothChildTiming=!!n.smoothChildTiming,r._sortChildren=!0,r._onUpdate=n.onUpdate,n)e=n[i],a(e)&&-1!==e.join("").indexOf("{self}")&&(n[i]=r._swapSelfInParams(e));a(n.tweens)&&r.add(n.tweens,0,n.align,n.stagger)},e=1e-8,i=v.ZP._internals,r=t._internals={},n=i.isSelector,a=i.isArray,s=i.lazyTweens,o=i.lazyRender,h=v.ML._gsDefine.globals,l=function(t){var e,i={};for(e in t)i[e]=t[e];return i},u=function(t,e,i){var r,n,a=t.cycle;for(r in a)n=a[r],t[r]="function"==typeof n?n(i,e[i],e):n[i%n.length];delete t.cycle},c=r.pauseCallback=function(){},f=function(t,e,i,r){var n="immediateRender";return n in e||(e[n]=!(i&&!1===i[n]||r)),e},p=function(t){if("function"==typeof t)return t;var e="object"==typeof t?t:{each:t},i=e.ease,r=e.from||0,n=e.base||0,a={},s=isNaN(r),o=e.axis,h={center:.5,end:1}[r]||0;return function(t,l,u){var c,f,p,d,_,m,y,g,v,b=(u||e).length,T=a[b];if(!T){if(!(v="auto"===e.grid?0:(e.grid||[1/0])[0])){for(y=-1/0;y<(y=u[v++].getBoundingClientRect().left)&&v<b;);v--}for(T=a[b]=[],c=s?Math.min(v,b)*h-.5:r%v,f=s?b*h/v-.5:r/v|0,y=0,g=1/0,m=0;m<b;m++)p=m%v-c,d=f-(m/v|0),T[m]=_=o?Math.abs("y"===o?d:p):Math.sqrt(p*p+d*d),_>y&&(y=_),_<g&&(g=_);T.max=y-g,T.min=g,T.v=b=e.amount||e.each*(v>b?b-1:o?"y"===o?b/v:v:Math.max(v,b/v))||0,T.b=b<0?n-b:n}return b=(T[t]-T.min)/T.max,T.b+(i?i.getRatio(b):b)*T.v}},d=t.prototype=new v.MQ;return t.version="2.1.3",t.distribute=p,d.constructor=t,d.kill()._gc=d._forcingPlayhead=d._hasPause=!1,d.to=function(t,e,i,r){var n=i.repeat&&h.TweenMax||v.ZP;return e?this.add(new n(t,e,i),r):this.set(t,i,r)},d.from=function(t,e,i,r){return this.add((i.repeat&&h.TweenMax||v.ZP).from(t,e,f(0,i)),r)},d.fromTo=function(t,e,i,r,n){var a=r.repeat&&h.TweenMax||v.ZP;return r=f(0,r,i),e?this.add(a.fromTo(t,e,i,r),n):this.set(t,r,n)},d.staggerTo=function(e,i,r,a,s,o,h,c){var f,d,_=new t({onComplete:o,onCompleteParams:h,callbackScope:c,smoothChildTiming:this.smoothChildTiming}),m=p(r.stagger||a),y=r.startAt,g=r.cycle;for("string"==typeof e&&(e=v.ZP.selector(e)||e),n(e=e||[])&&(e=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i}(e)),d=0;d<e.length;d++)f=l(r),y&&(f.startAt=l(y),y.cycle&&u(f.startAt,e,d)),g&&(u(f,e,d),null!=f.duration&&(i=f.duration,delete f.duration)),_.to(e[d],i,f,m(d,e[d],e));return this.add(_,s)},d.staggerFrom=function(t,e,i,r,n,a,s,o){return i.runBackwards=!0,this.staggerTo(t,e,f(0,i),r,n,a,s,o)},d.staggerFromTo=function(t,e,i,r,n,a,s,o,h){return r.startAt=i,this.staggerTo(t,e,f(0,r,i),n,a,s,o,h)},d.call=function(t,e,i,r){return this.add(v.ZP.delayedCall(0,t,e,i),r)},d.set=function(t,e,i){return this.add(new v.ZP(t,0,f(0,e,null,!0)),i)},t.exportRoot=function(e,i){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var r,n,a,s,o=new t(e),h=o._timeline;for(null==i&&(i=!0),h._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=h._time,a=h._first;a;)s=a._next,i&&a instanceof v.ZP&&a.target===a.vars.onComplete||((n=a._startTime-a._delay)<0&&(r=1),o.add(a,n)),a=s;return h.add(o,0),r&&o.totalDuration(),o},d.add=function(e,i,r,n){var s,o,h,l,u,c,f=this;if("number"!=typeof i&&(i=f._parseTimeOrLabel(i,0,!0,e)),!(e instanceof v.fw)){if(e instanceof Array||e&&e.push&&a(e)){for(r=r||"normal",n=n||0,s=i,o=e.length,h=0;h<o;h++)a(l=e[h])&&(l=new t({tweens:l})),f.add(l,s),"string"!=typeof l&&"function"!=typeof l&&("sequence"===r?s=l._startTime+l.totalDuration()/l._timeScale:"start"===r&&(l._startTime-=l.delay())),s+=n;return f._uncache(!0)}if("string"==typeof e)return f.addLabel(e,i);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=v.ZP.delayedCall(0,e)}if(v.MQ.prototype.add.call(f,e,i),(e._time||!e._duration&&e._initted)&&(s=(f.rawTime()-e._startTime)*e._timeScale,(!e._duration||Math.abs(Math.max(0,Math.min(e.totalDuration(),s)))-e._totalTime>1e-5)&&e.render(s,!1,!1)),(f._gc||f._time===f._duration)&&!f._paused&&f._duration<f.duration())for(c=(u=f).rawTime()>e._startTime;u._timeline;)c&&u._timeline.smoothChildTiming?u.totalTime(u._totalTime,!0):u._gc&&u._enabled(!0,!1),u=u._timeline;return f},d.remove=function(t){if(t instanceof v.fw){this._remove(t,!1);var e=t._timeline=t.vars.useFrames?v.fw._rootFramesTimeline:v.fw._rootTimeline;return t._startTime=(t._paused?t._pauseTime:e._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&a(t)){for(var i=t.length;--i>-1;)this.remove(t[i]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},d._remove=function(t,e){return v.MQ.prototype._remove.call(this,t,e),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},d.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},d.insert=d.insertMultiple=function(t,e,i,r){return this.add(t,e||0,i,r)},d.appendMultiple=function(t,e,i,r){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,r)},d.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},d.addPause=function(t,e,i,r){var n=v.ZP.delayedCall(0,c,i,r||this);return n.vars.onComplete=n.vars.onReverseComplete=e,n.data="isPause",this._hasPause=!0,this.add(n,t)},d.removeLabel=function(t){return delete this._labels[t],this},d.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},d._parseTimeOrLabel=function(t,e,i,r){var n,s;if(r instanceof v.fw&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&a(r)))for(s=r.length;--s>-1;)r[s]instanceof v.fw&&r[s].timeline===this&&this.remove(r[s]);if(n="number"!=typeof t||e?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"==typeof e)return this._parseTimeOrLabel(e,i&&"number"==typeof t&&null==this._labels[e]?t-n:0,i);if(e=e||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=n);else{if(-1===(s=t.indexOf("=")))return null==this._labels[t]?i?this._labels[t]=n+e:e:this._labels[t]+e;e=parseInt(t.charAt(s-1)+"1",10)*Number(t.substr(s+1)),t=s>1?this._parseTimeOrLabel(t.substr(0,s-1),0,i):n}return Number(t)+e},d.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},d.stop=function(){return this.paused(!0)},d.gotoAndPlay=function(t,e){return this.play(t,e)},d.gotoAndStop=function(t,e){return this.pause(t,e)},d.render=function(t,i,r){this._gc&&this._enabled(!0,!1);var n,a,h,l,u,c,f,p,d=this,_=d._time,m=d._dirty?d.totalDuration():d._totalDuration,y=d._startTime,g=d._timeScale,v=d._paused;if(_!==d._time&&(t+=d._time-_),d._hasPause&&!d._forcingPlayhead&&!i){if(t>_)for(n=d._first;n&&n._startTime<=t&&!c;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===d._rawPrevTime||(c=n),n=n._next;else for(n=d._last;n&&n._startTime>=t&&!c;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(c=n),n=n._prev;c&&(d._time=d._totalTime=t=c._startTime,p=d._startTime+(d._reversed?d._duration-t:t)/d._timeScale)}if(t>=m-e&&t>=0)d._totalTime=d._time=m,d._reversed||d._hasPausedChild()||(a=!0,l="onComplete",u=!!d._timeline.autoRemoveChildren,0===d._duration&&(t<=0&&t>=-1e-8||d._rawPrevTime<0||d._rawPrevTime===e)&&d._rawPrevTime!==t&&d._first&&(u=!0,d._rawPrevTime>e&&(l="onReverseComplete"))),d._rawPrevTime=d._duration||!i||t||d._rawPrevTime===t?t:e,t=m+1e-4;else if(t<e)if(d._totalTime=d._time=0,t>-1e-8&&(t=0),(0!==_||0===d._duration&&d._rawPrevTime!==e&&(d._rawPrevTime>0||t<0&&d._rawPrevTime>=0))&&(l="onReverseComplete",a=d._reversed),t<0)d._active=!1,d._timeline.autoRemoveChildren&&d._reversed?(u=a=!0,l="onReverseComplete"):d._rawPrevTime>=0&&d._first&&(u=!0),d._rawPrevTime=t;else{if(d._rawPrevTime=d._duration||!i||t||d._rawPrevTime===t?t:e,0===t&&a)for(n=d._first;n&&0===n._startTime;)n._duration||(a=!1),n=n._next;t=0,d._initted||(u=!0)}else d._totalTime=d._time=d._rawPrevTime=t;if(d._time!==_&&d._first||r||u||c){if(d._initted||(d._initted=!0),d._active||!d._paused&&d._time!==_&&t>0&&(d._active=!0),0===_&&d.vars.onStart&&(0===d._time&&d._duration||i||d._callback("onStart")),(f=d._time)>=_)for(n=d._first;n&&(h=n._next,f===d._time&&(!d._paused||v));)(n._active||n._startTime<=f&&!n._paused&&!n._gc)&&(c===n&&(d.pause(),d._pauseTime=p),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,i,r):n.render((t-n._startTime)*n._timeScale,i,r)),n=h;else for(n=d._last;n&&(h=n._prev,f===d._time&&(!d._paused||v));){if(n._active||n._startTime<=_&&!n._paused&&!n._gc){if(c===n){for(c=n._prev;c&&c.endTime()>d._time;)c.render(c._reversed?c.totalDuration()-(t-c._startTime)*c._timeScale:(t-c._startTime)*c._timeScale,i,r),c=c._prev;c=null,d.pause(),d._pauseTime=p}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,i,r):n.render((t-n._startTime)*n._timeScale,i,r)}n=h}d._onUpdate&&(i||(s.length&&o(),d._callback("onUpdate"))),l&&(d._gc||y!==d._startTime&&g===d._timeScale||(0===d._time||m>=d.totalDuration())&&(a&&(s.length&&o(),d._timeline.autoRemoveChildren&&d._enabled(!1,!1),d._active=!1),!i&&d.vars[l]&&d._callback(l)))}},d._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof t&&e._hasPausedChild())return!0;e=e._next}return!1},d.getChildren=function(t,e,i,r){r=r||-9999999999;for(var n=[],a=this._first,s=0;a;)a._startTime<r||(a instanceof v.ZP?!1!==e&&(n[s++]=a):(!1!==i&&(n[s++]=a),!1!==t&&(s=(n=n.concat(a.getChildren(!0,e,i))).length))),a=a._next;return n},d.getTweensOf=function(t,e){var i,r,n=this._gc,a=[],s=0;for(n&&this._enabled(!0,!0),r=(i=v.ZP.getTweensOf(t)).length;--r>-1;)(i[r].timeline===this||e&&this._contains(i[r]))&&(a[s++]=i[r]);return n&&this._enabled(!1,!0),a},d.recent=function(){return this._recent},d._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},d.shiftChildren=function(t,e,i){i=i||0;for(var r,n=this._first,a=this._labels;n;)n._startTime>=i&&(n._startTime+=t),n=n._next;if(e)for(r in a)a[r]>=i&&(a[r]+=t);return this._uncache(!0)},d._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),r=i.length,n=!1;--r>-1;)i[r]._kill(t,e)&&(n=!0);return n},d.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},d.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return v.fw.prototype.invalidate.call(this)},d._enabled=function(t,e){if(t===this._gc)for(var i=this._first;i;)i._enabled(t,!0),i=i._next;return v.MQ.prototype._enabled.call(this,t,e)},d.totalTime=function(t,e,i){this._forcingPlayhead=!0;var r=v.fw.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},d.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},d.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,r=0,n=this,a=n._last,s=999999999999;a;)e=a._prev,a._dirty&&a.totalDuration(),a._startTime>s&&n._sortChildren&&!a._paused&&!n._calculatingDuration?(n._calculatingDuration=1,n.add(a,a._startTime-a._delay),n._calculatingDuration=0):s=a._startTime,a._startTime<0&&!a._paused&&(r-=a._startTime,n._timeline.smoothChildTiming&&(n._startTime+=a._startTime/n._timeScale,n._time-=a._startTime,n._totalTime-=a._startTime,n._rawPrevTime-=a._startTime),n.shiftChildren(-a._startTime,!1,-9999999999),s=0),(i=a._startTime+a._totalDuration/a._timeScale)>r&&(r=i),a=e;n._duration=n._totalDuration=r,n._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},d.paused=function(t){if(!1===t&&this._paused)for(var e=this._first;e;)e._startTime===this._time&&"isPause"===e.data&&(e._rawPrevTime=0),e=e._next;return v.fw.prototype.paused.apply(this,arguments)},d.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===v.fw._rootFramesTimeline},d.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},t}),!0);var b=v.li.TimelineLite;v.ML._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],(function(){var t=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},e=function(t,e,i){var r,n,a=t.cycle;for(r in a)n=a[r],t[r]="function"==typeof n?n(i,e[i],e):n[i%n.length];delete t.cycle},i=function(t){if("function"==typeof t)return t;var e="object"==typeof t?t:{each:t},i=e.ease,r=e.from||0,n=e.base||0,a={},s=isNaN(r),o=e.axis,h={center:.5,end:1}[r]||0;return function(t,l,u){var c,f,p,d,_,m,y,g,v,b=(u||e).length,T=a[b];if(!T){if(!(v="auto"===e.grid?0:(e.grid||[1/0])[0])){for(y=-1/0;y<(y=u[v++].getBoundingClientRect().left)&&v<b;);v--}for(T=a[b]=[],c=s?Math.min(v,b)*h-.5:r%v,f=s?b*h/v-.5:r/v|0,y=0,g=1/0,m=0;m<b;m++)p=m%v-c,d=f-(m/v|0),T[m]=_=o?Math.abs("y"===o?d:p):Math.sqrt(p*p+d*d),_>y&&(y=_),_<g&&(g=_);T.max=y-g,T.min=g,T.v=b=e.amount||e.each*(v>b?b-1:o?"y"===o?b/v:v:Math.max(v,b/v))||0,T.b=b<0?n-b:n}return b=(T[t]-T.min)/T.max,T.b+(i?i.getRatio(b):b)*T.v}},r=function(t,e,i){v.ZP.call(this,t,e,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=r.prototype.render},n=1e-8,a=v.ZP._internals,s=a.isSelector,o=a.isArray,h=r.prototype=v.ZP.to({},.1,{}),l=[];r.version="2.1.3",h.constructor=r,h.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=v.ZP.killTweensOf,r.getTweensOf=v.ZP.getTweensOf,r.lagSmoothing=v.ZP.lagSmoothing,r.ticker=v.ZP.ticker,r.render=v.ZP.render,r.distribute=i,h.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),v.ZP.prototype.invalidate.call(this)},h.updateTo=function(t,e){var i,r=this,n=r.ratio,a=r.vars.immediateRender||t.immediateRender;for(i in e&&r._startTime<r._timeline._time&&(r._startTime=r._timeline._time,r._uncache(!1),r._gc?r._enabled(!0,!1):r._timeline.insert(r,r._startTime-r._delay)),t)r.vars[i]=t[i];if(r._initted||a)if(e)r._initted=!1,a&&r.render(0,!0,!0);else if(r._gc&&r._enabled(!0,!1),r._notifyPluginsOfEnabled&&r._firstPT&&v.ZP._onPluginEvent("_onDisable",r),r._time/r._duration>.998){var s=r._totalTime;r.render(0,!0,!1),r._initted=!1,r.render(s,!0,!1)}else if(r._initted=!1,r._init(),r._time>0||a)for(var o,h=1/(1-n),l=r._firstPT;l;)o=l.s+l.c,l.c*=h,l.s=o-l.c,l=l._next;return r},h.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,s,o,h,l,u,c,f,p,d=this,_=d._dirty?d.totalDuration():d._totalDuration,m=d._time,y=d._totalTime,g=d._cycle,b=d._duration,T=d._rawPrevTime;if(t>=_-n&&t>=0?(d._totalTime=_,d._cycle=d._repeat,d._yoyo&&0!=(1&d._cycle)?(d._time=0,d.ratio=d._ease._calcEnd?d._ease.getRatio(0):0):(d._time=b,d.ratio=d._ease._calcEnd?d._ease.getRatio(1):1),d._reversed||(r=!0,s="onComplete",i=i||d._timeline.autoRemoveChildren),0===b&&(d._initted||!d.vars.lazy||i)&&(d._startTime===d._timeline._duration&&(t=0),(T<0||t<=0&&t>=-1e-8||T===n&&"isPause"!==d.data)&&T!==t&&(i=!0,T>n&&(s="onReverseComplete")),d._rawPrevTime=f=!e||t||T===t?t:n)):t<n?(d._totalTime=d._time=d._cycle=0,d.ratio=d._ease._calcEnd?d._ease.getRatio(0):0,(0!==y||0===b&&T>0)&&(s="onReverseComplete",r=d._reversed),t>-1e-8?t=0:t<0&&(d._active=!1,0===b&&(d._initted||!d.vars.lazy||i)&&(T>=0&&(i=!0),d._rawPrevTime=f=!e||t||T===t?t:n)),d._initted||(i=!0)):(d._totalTime=d._time=t,0!==d._repeat&&(h=b+d._repeatDelay,d._cycle=d._totalTime/h>>0,0!==d._cycle&&d._cycle===d._totalTime/h&&y<=t&&d._cycle--,d._time=d._totalTime-d._cycle*h,d._yoyo&&0!=(1&d._cycle)&&(d._time=b-d._time,(p=d._yoyoEase||d.vars.yoyoEase)&&(d._yoyoEase||(!0!==p||d._initted?d._yoyoEase=p=!0===p?d._ease:p instanceof v.SX?p:v.SX.map[p]:(p=d.vars.ease,d._yoyoEase=p=p?p instanceof v.SX?p:"function"==typeof p?new v.SX(p,d.vars.easeParams):v.SX.map[p]||v.ZP.defaultEase:v.ZP.defaultEase)),d.ratio=p?1-p.getRatio((b-d._time)/b):0)),d._time>b?d._time=b:d._time<0&&(d._time=0)),d._easeType&&!p?(l=d._time/b,(1===(u=d._easeType)||3===u&&l>=.5)&&(l=1-l),3===u&&(l*=2),1===(c=d._easePower)?l*=l:2===c?l*=l*l:3===c?l*=l*l*l:4===c&&(l*=l*l*l*l),d.ratio=1===u?1-l:2===u?l:d._time/b<.5?l/2:1-l/2):p||(d.ratio=d._ease.getRatio(d._time/b))),m!==d._time||i||g!==d._cycle){if(!d._initted){if(d._init(),!d._initted||d._gc)return;if(!i&&d._firstPT&&(!1!==d.vars.lazy&&d._duration||d.vars.lazy&&!d._duration))return d._time=m,d._totalTime=y,d._rawPrevTime=T,d._cycle=g,a.lazyTweens.push(d),void(d._lazy=[t,e]);!d._time||r||p?r&&this._ease._calcEnd&&!p&&(d.ratio=d._ease.getRatio(0===d._time?0:1)):d.ratio=d._ease.getRatio(d._time/b)}for(!1!==d._lazy&&(d._lazy=!1),d._active||!d._paused&&d._time!==m&&t>=0&&(d._active=!0),0===y&&(2===d._initted&&t>0&&d._init(),d._startAt&&(t>=0?d._startAt.render(t,!0,i):s||(s="_dummyGS")),d.vars.onStart&&(0===d._totalTime&&0!==b||e||d._callback("onStart"))),o=d._firstPT;o;)o.f?o.t[o.p](o.c*d.ratio+o.s):o.t[o.p]=o.c*d.ratio+o.s,o=o._next;d._onUpdate&&(t<0&&d._startAt&&d._startTime&&d._startAt.render(t,!0,i),e||(d._totalTime!==y||s)&&d._callback("onUpdate")),d._cycle!==g&&(e||d._gc||d.vars.onRepeat&&d._callback("onRepeat")),s&&(d._gc&&!i||(t<0&&d._startAt&&!d._onUpdate&&d._startTime&&d._startAt.render(t,!0,i),r&&(d._timeline.autoRemoveChildren&&d._enabled(!1,!1),d._active=!1),!e&&d.vars[s]&&d._callback(s),0===b&&d._rawPrevTime===n&&f!==n&&(d._rawPrevTime=0)))}else y!==d._totalTime&&d._onUpdate&&(e||d._callback("onUpdate"))},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new r(t,e,i)},r.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new r(t,e,n)},r.staggerTo=r.allTo=function(n,a,h,u,c,f,p){var d,_,m,y,g=[],b=i(h.stagger||u),T=h.cycle,x=(h.startAt||l).cycle;for(o(n)||("string"==typeof n&&(n=v.ZP.selector(n)||n),s(n)&&(n=t(n))),d=(n=n||[]).length-1,m=0;m<=d;m++){for(y in _={},h)_[y]=h[y];if(T&&(e(_,n,m),null!=_.duration&&(a=_.duration,delete _.duration)),x){for(y in x=_.startAt={},h.startAt)x[y]=h.startAt[y];e(_.startAt,n,m)}_.delay=b(m,n[m],n)+(_.delay||0),m===d&&c&&(_.onComplete=function(){h.onComplete&&h.onComplete.apply(h.onCompleteScope||this,arguments),c.apply(p||h.callbackScope||this,f||l)}),g[m]=new r(n[m],a,_)}return g},r.staggerFrom=r.allFrom=function(t,e,i,n,a,s,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,r.staggerTo(t,e,i,n,a,s,o)},r.staggerFromTo=r.allFromTo=function(t,e,i,n,a,s,o,h){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,r.staggerTo(t,e,n,a,s,o,h)},r.delayedCall=function(t,e,i,n,a){return new r(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:a,overwrite:0})},r.set=function(t,e){return new r(t,0,e)},r.isTweening=function(t){return v.ZP.getTweensOf(t,!0).length>0};var u=function(t,e){for(var i=[],r=0,n=t._first;n;)n instanceof v.ZP?i[r++]=n:(e&&(i[r++]=n),r=(i=i.concat(u(n,e))).length),n=n._next;return i},c=r.getAllTweens=function(t){return u(v.fw._rootTimeline,t).concat(u(v.fw._rootFramesTimeline,t))};r.killAll=function(t,e,i,r){null==e&&(e=!0),null==i&&(i=!0);var n,a,s,o=c(0!=r),h=o.length,l=e&&i&&r;for(s=0;s<h;s++)a=o[s],(l||a instanceof v.MQ||(n=a.target===a.vars.onComplete)&&i||e&&!n)&&(t?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},r.killChildTweensOf=function(e,i){if(null!=e){var n,h,l,u,c,f=a.tweenLookup;if("string"==typeof e&&(e=v.ZP.selector(e)||e),s(e)&&(e=t(e)),o(e))for(u=e.length;--u>-1;)r.killChildTweensOf(e[u],i);else{for(l in n=[],f)for(h=f[l].target.parentNode;h;)h===e&&(n=n.concat(f[l].tweens)),h=h.parentNode;for(c=n.length,u=0;u<c;u++)i&&n[u].totalTime(n[u].totalDuration()),n[u]._enabled(!1,!1)}}};var f=function(t,e,i,r){e=!1!==e,i=!1!==i;for(var n,a,s=c(r=!1!==r),o=e&&i&&r,h=s.length;--h>-1;)a=s[h],(o||a instanceof v.MQ||(n=a.target===a.vars.onComplete)&&i||e&&!n)&&a.paused(t)};return r.pauseAll=function(t,e,i){f(!0,t,e,i)},r.resumeAll=function(t,e,i){f(!1,t,e,i)},r.globalTimeScale=function(t){var e=v.fw._rootTimeline,i=v.ZP.ticker.time;return arguments.length?(t=t||n,e._startTime=i-(i-e._startTime)*e._timeScale/t,e=v.fw._rootFramesTimeline,i=v.ZP.ticker.frame,e._startTime=i-(i-e._startTime)*e._timeScale/t,e._timeScale=v.fw._rootTimeline._timeScale=t,t):e._timeScale},h.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this.duration()?this._time/this._duration:this.ratio},h.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},h.time=function(t,e){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,r=this._cycle,n=r*(i+this._repeatDelay);return t>i&&(t=i),this.totalTime(this._yoyo&&1&r?i-t+n:this._repeat?t+n:t,e)},h.duration=function(t){return arguments.length?v.fw.prototype.duration.call(this,t):this._duration},h.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r}),!0);var T=v.li.TweenMax;v.ML._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],(function(){var t,e,i,r,n=function(){v.VN.call(this,"css"),this._overwriteProps.length=0,this.setRatio=n.prototype.setRatio},a=v.ML._gsDefine.globals,s={},o=n.prototype=new v.VN("css");o.constructor=n,n.version="2.1.3",n.API=2,n.defaultTransformPerspective=0,n.defaultSkewType="compensated",n.defaultSmoothOrigin=!0,o="px",n.suffixMap={top:o,right:o,bottom:o,left:o,width:o,height:o,fontSize:o,padding:o,margin:o,perspective:o,lineHeight:""};var h,l,u,c,f,p,d,_,m=/(?:\-|\.|\b)(\d|\.|e\-)+/g,y=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,g=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,b=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b),?/gi,T=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,x=/(?:\d|\-|\+|=|#|\.)*/g,P=/opacity *= *([^)]*)/i,E=/opacity:([^;]*)/i,A=/alpha\(opacity *=.+?\)/i,S=/^(rgb|hsl)/,w=/([A-Z])/g,D=/-([a-z])/gi,O=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,I=function(t,e){return e.toUpperCase()},M=/(?:Left|Right|Width)/i,C=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,R=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,F=/,(?=[^\)]*(?:\(|$))/gi,B=/[\s,\(]/i,N=Math.PI/180,L=180/Math.PI,k={},U={style:{}},j=v.ML.document||{createElement:function(){return U}},X=function(t,e){var i=j.createElementNS?j.createElementNS(e||"http://www.w3.org/1999/xhtml",t):j.createElement(t);return i.style?i:j.createElement(t)},Y=X("div"),G=X("img"),V=n._internals={_specialProps:s},H=(v.ML.navigator||{}).userAgent||"",z=function(){var t=H.indexOf("Android"),e=X("a");return u=-1!==H.indexOf("Safari")&&-1===H.indexOf("Chrome")&&(-1===t||parseFloat(H.substr(t+8,2))>3),f=u&&parseFloat(H.substr(H.indexOf("Version/")+8,2))<6,c=-1!==H.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(H)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(H))&&(p=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),W=function(t){return P.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},q=function(t){v.ML.console&&console.log(t)},Z="",K="",Q=function(t,e){var i,r,n=(e=e||Y).style;if(void 0!==n[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===n[i[r]+t];);return r>=0?(Z="-"+(K=3===r?"ms":i[r]).toLowerCase()+"-",K+t):null},J="undefined"!=typeof window?window:j.defaultView||{getComputedStyle:function(){}},$=function(t){return J.getComputedStyle(t)},tt=n.getStyle=function(t,e,i,r,n){var a;return z||"opacity"!==e?(!r&&t.style[e]?a=t.style[e]:(i=i||$(t))?a=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(w,"-$1").toLowerCase()):t.currentStyle&&(a=t.currentStyle[e]),null==n||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:n):W(t)},et=V.convertToPixels=function(t,e,i,r,a){if("px"===r||!r&&"lineHeight"!==e)return i;if("auto"===r||!i)return 0;var s,o,h,l=M.test(e),u=t,c=Y.style,f=i<0,p=1===i;if(f&&(i=-i),p&&(i*=100),"lineHeight"!==e||r)if("%"===r&&-1!==e.indexOf("border"))s=i/100*(l?t.clientWidth:t.clientHeight);else{if(c.cssText="border:0 solid red;position:"+tt(t,"position")+";line-height:0;","%"!==r&&u.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)c[l?"borderLeftWidth":"borderTopWidth"]=i+r;else{if(u=t.parentNode||j.body,-1!==tt(u,"display").indexOf("flex")&&(c.position="absolute"),o=u._gsCache,h=v.ZP.ticker.frame,o&&l&&o.time===h)return o.width*i/100;c[l?"width":"height"]=i+r}u.appendChild(Y),s=parseFloat(Y[l?"offsetWidth":"offsetHeight"]),u.removeChild(Y),l&&"%"===r&&!1!==n.cacheWidths&&((o=u._gsCache=u._gsCache||{}).time=h,o.width=s/i*100),0!==s||a||(s=et(t,e,i,r,!0))}else o=$(t).lineHeight,t.style.lineHeight=i,s=parseFloat($(t).lineHeight),t.style.lineHeight=o;return p&&(s/=100),f?-s:s},it=V.calculateOffset=function(t,e,i){if("absolute"!==tt(t,"position",i))return 0;var r="left"===e?"Left":"Top",n=tt(t,"margin"+r,i);return t["offset"+r]-(et(t,e,parseFloat(n),n.replace(x,""))||0)},rt=function(t,e){var i,r,n,a={};if(e=e||$(t))if(i=e.length)for(;--i>-1;)-1!==(n=e[i]).indexOf("-transform")&&Ft!==n||(a[n.replace(D,I)]=e.getPropertyValue(n));else for(i in e)-1!==i.indexOf("Transform")&&Rt!==i||(a[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===a[i]&&(a[i.replace(D,I)]=e[i]);return z||(a.opacity=W(t)),r=Wt(t,e,!1),a.rotation=r.rotation,a.skewX=r.skewX,a.scaleX=r.scaleX,a.scaleY=r.scaleY,a.x=r.x,a.y=r.y,Nt&&(a.z=r.z,a.rotationX=r.rotationX,a.rotationY=r.rotationY,a.scaleZ=r.scaleZ),a.filters&&delete a.filters,a},nt=function(t,e,i,r,n){var a,s,o,h={},l=t.style;for(s in i)"cssText"!==s&&"length"!==s&&isNaN(s)&&(e[s]!==(a=i[s])||n&&n[s])&&-1===s.indexOf("Origin")&&("number"!=typeof a&&"string"!=typeof a||(h[s]="auto"!==a||"left"!==s&&"top"!==s?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof e[s]||""===e[s].replace(T,"")?a:0:it(t,s),void 0!==l[s]&&(o=new vt(l,s,l[s],o))));if(r)for(s in r)"className"!==s&&(h[s]=r[s]);return{difs:h,firstMPT:o}},at={width:["Left","Right"],height:["Top","Bottom"]},st=["marginLeft","marginRight","marginTop","marginBottom"],ot=function(t,e,i){if("svg"===(t.nodeName+"").toLowerCase())return(i||$(t))[e]||0;if(t.getCTM&&Vt(t))return t.getBBox()[e]||0;var r=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),n=at[e],a=n.length;for(i=i||$(t);--a>-1;)r-=parseFloat(tt(t,"padding"+n[a],i,!0))||0,r-=parseFloat(tt(t,"border"+n[a]+"Width",i,!0))||0;return r},ht=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var i,r=t.split(" "),n=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":r[0],a=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":r[1];if(r.length>3&&!e){for(r=t.split(", ").join(",").split(","),t=[],i=0;i<r.length;i++)t.push(ht(r[i]));return t.join(",")}return null==a?a="center"===n?"50%":"0":"center"===a&&(a="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),t=n+" "+a+(r.length>2?" "+r[2]:""),e&&(e.oxp=-1!==n.indexOf("%"),e.oyp=-1!==a.indexOf("%"),e.oxr="="===n.charAt(1),e.oyr="="===a.charAt(1),e.ox=parseFloat(n.replace(T,"")),e.oy=parseFloat(a.replace(T,"")),e.v=t),e||t},lt=function(t,e){return"function"==typeof t&&(t=t(_,d)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ut=function(t,e){"function"==typeof t&&(t=t(_,d));var i="string"==typeof t&&"="===t.charAt(1);return"string"==typeof t&&"v"===t.charAt(t.length-2)&&(t=(i?t.substr(0,2):0)+window["inner"+("vh"===t.substr(-2)?"Height":"Width")]*(parseFloat(i?t.substr(2):t)/100)),null==t?e:i?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ct=function(t,e,i,r){var n,a,s,o,h,l=1e-6;return"function"==typeof t&&(t=t(_,d)),null==t?o=e:"number"==typeof t?o=t:(n=360,a=t.split("_"),s=((h="="===t.charAt(1))?parseInt(t.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===t.indexOf("rad")?1:L)-(h?0:e),a.length&&(r&&(r[i]=e+s),-1!==t.indexOf("short")&&(s%=n)!=s%180&&(s=s<0?s+n:s-n),-1!==t.indexOf("_cw")&&s<0?s=(s+3599999999640)%n-(s/n|0)*n:-1!==t.indexOf("ccw")&&s>0&&(s=(s-3599999999640)%n-(s/n|0)*n)),o=e+s),o<l&&o>-l&&(o=0),o},ft={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},pt=function(t,e,i){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},dt=n.parseColor=function(t,e){var i,r,n,a,s,o,h,l,u,c,f;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),ft[t])i=ft[t];else if("#"===t.charAt(0))4===t.length&&(r=t.charAt(1),n=t.charAt(2),a=t.charAt(3),t="#"+r+r+n+n+a+a),i=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=f=t.match(m),e){if(-1!==t.indexOf("="))return t.match(y)}else s=Number(i[0])%360/360,o=Number(i[1])/100,r=2*(h=Number(i[2])/100)-(n=h<=.5?h*(o+1):h+o-h*o),i.length>3&&(i[3]=Number(i[3])),i[0]=pt(s+1/3,r,n),i[1]=pt(s,r,n),i[2]=pt(s-1/3,r,n);else i=t.match(m)||ft.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=ft.black;return e&&!f&&(r=i[0]/255,n=i[1]/255,a=i[2]/255,h=((l=Math.max(r,n,a))+(u=Math.min(r,n,a)))/2,l===u?s=o=0:(c=l-u,o=h>.5?c/(2-l-u):c/(l+u),s=l===r?(n-a)/c+(n<a?6:0):l===n?(a-r)/c+2:(r-n)/c+4,s*=60),i[0]=s+.5|0,i[1]=100*o+.5|0,i[2]=100*h+.5|0),i},_t=function(t,e){var i,r,n,a=t.match(mt)||[],s=0,o="";if(!a.length)return t;for(i=0;i<a.length;i++)r=a[i],s+=(n=t.substr(s,t.indexOf(r,s)-s)).length+r.length,3===(r=dt(r,e)).length&&r.push(1),o+=n+(e?"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+r[3]:"rgba("+r.join(","))+")";return o+t.substr(s)},mt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(o in ft)mt+="|"+o+"\\b";mt=new RegExp(mt+")","gi"),n.colorStringFilter=function(t){var e,i=t[0]+" "+t[1];mt.test(i)&&(e=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),t[0]=_t(t[0],e),t[1]=_t(t[1],e)),mt.lastIndex=0},v.ZP.defaultStringFilter||(v.ZP.defaultStringFilter=n.colorStringFilter);var yt=function(t,e,i,r){if(null==t)return function(t){return t};var n,a=e?(t.match(mt)||[""])[0]:"",s=t.split(a).join("").match(g)||[],o=t.substr(0,t.indexOf(s[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",u=s.length,c=u>0?s[0].replace(m,""):"";return u?e?(n=function(t){var e,f,p,d;if("number"==typeof t)t+=c;else if(r&&F.test(t)){for(d=t.replace(F,"|").split("|"),p=0;p<d.length;p++)d[p]=n(d[p]);return d.join(",")}if(e=(t.match(mt)||[a])[0],p=(f=t.split(e).join("").match(g)||[]).length,u>p--)for(;++p<u;)f[p]=i?f[(p-1)/2|0]:s[p];return o+f.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")},n):(n=function(t){var e,a,f;if("number"==typeof t)t+=c;else if(r&&F.test(t)){for(a=t.replace(F,"|").split("|"),f=0;f<a.length;f++)a[f]=n(a[f]);return a.join(",")}if(f=(e=t.match(","===l?g:b)||[]).length,u>f--)for(;++f<u;)e[f]=i?e[(f-1)/2|0]:s[f];return(o&&"none"!==t&&t.substr(0,t.indexOf(e[0]))||o)+e.join(l)+h},n):function(t){return t}},gt=function(t){return t=t.split(","),function(e,i,r,n,a,s,o){var h,l=(i+"").split(" ");for(o={},h=0;h<4;h++)o[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return n.parse(e,o,a,s)}},vt=(V._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,r,n,a,s=this.data,o=s.proxy,h=s.firstMPT,l=1e-6;h;)e=o[h.v],h.r?e=h.r(e):e<l&&e>-l&&(e=0),h.t[h.p]=e,h=h._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod.call(this._tween,o.rotation,this.t,this._tween):o.rotation),1===t||0===t)for(h=s.firstMPT,a=1===t?"e":"b";h;){if((i=h.t).type){if(1===i.type){for(n=i.xs0+i.s+i.xs1,r=1;r<i.l;r++)n+=i["xn"+r]+i["xs"+(r+1)];i[a]=n}}else i[a]=i.s+i.xs0;h=h._next}},function(t,e,i,r,n){this.t=t,this.p=e,this.v=i,this.r=n,r&&(r._prev=this,this._next=r)}),bt=(V._parseToProxy=function(t,e,i,r,n,a){var s,o,h,l,u,c=r,f={},p={},d=i._transform,_=k;for(i._transform=null,k=e,r=u=i.parse(t,e,r,n),k=_,a&&(i._transform=d,c&&(c._prev=null,c._prev&&(c._prev._next=null)));r&&r!==c;){if(r.type<=1&&(p[o=r.p]=r.s+r.c,f[o]=r.s,a||(l=new vt(r,"s",o,l,r.r),r.c=0),1===r.type))for(s=r.l;--s>0;)h="xn"+s,p[o=r.p+"_"+h]=r.data[h],f[o]=r[h],a||(l=new vt(r,h,o,l,r.rxp[h]));r=r._next}return{proxy:f,end:p,firstMPT:l,pt:u}},V.CSSPropTween=function(e,i,n,a,s,o,h,l,u,c,f){this.t=e,this.p=i,this.s=n,this.c=a,this.n=h||i,e instanceof bt||r.push(this.n),this.r=l?"function"==typeof l?l:Math.round:l,this.type=o||0,u&&(this.pr=u,t=!0),this.b=void 0===c?n:c,this.e=void 0===f?n+a:f,s&&(this._next=s,s._prev=this)}),Tt=function(t,e,i,r,n,a){var s=new bt(t,e,i,r-i,n,-1,a);return s.b=i,s.e=s.xs0=r,s},xt=n.parseComplex=function(t,e,i,r,a,s,o,l,u,c){i=i||s||"","function"==typeof r&&(r=r(_,d)),o=new bt(t,e,0,0,o,c?2:1,null,!1,l,i,r),r+="",a&&mt.test(r+i)&&(r=[i,r],n.colorStringFilter(r),i=r[0],r=r[1]);var f,p,g,v,b,T,x,P,E,A,S,w,D,O=i.split(", ").join(",").split(" "),I=r.split(", ").join(",").split(" "),M=O.length,C=!1!==h;for(-1===r.indexOf(",")&&-1===i.indexOf(",")||(-1!==(r+i).indexOf("rgb")||-1!==(r+i).indexOf("hsl")?(O=O.join(" ").replace(F,", ").split(" "),I=I.join(" ").replace(F,", ").split(" ")):(O=O.join(" ").split(",").join(", ").split(" "),I=I.join(" ").split(",").join(", ").split(" ")),M=O.length),M!==I.length&&(M=(O=(s||"").split(" ")).length),o.plugin=u,o.setRatio=c,mt.lastIndex=0,f=0;f<M;f++)if(v=O[f],b=I[f]+"",(P=parseFloat(v))||0===P)o.appendXtra("",P,lt(b,P),b.replace(y,""),!(!C||-1===b.indexOf("px"))&&Math.round,!0);else if(a&&mt.test(v))w=")"+((w=b.indexOf(")")+1)?b.substr(w):""),D=-1!==b.indexOf("hsl")&&z,A=b,v=dt(v,D),b=dt(b,D),(E=v.length+b.length>6)&&!z&&0===b[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(I[f]).join("transparent")):(z||(E=!1),D?o.appendXtra(A.substr(0,A.indexOf("hsl"))+(E?"hsla(":"hsl("),v[0],lt(b[0],v[0]),",",!1,!0).appendXtra("",v[1],lt(b[1],v[1]),"%,",!1).appendXtra("",v[2],lt(b[2],v[2]),E?"%,":"%"+w,!1):o.appendXtra(A.substr(0,A.indexOf("rgb"))+(E?"rgba(":"rgb("),v[0],b[0]-v[0],",",Math.round,!0).appendXtra("",v[1],b[1]-v[1],",",Math.round).appendXtra("",v[2],b[2]-v[2],E?",":w,Math.round),E&&(v=v.length<4?1:v[3],o.appendXtra("",v,(b.length<4?1:b[3])-v,w,!1))),mt.lastIndex=0;else if(T=v.match(m)){if(!(x=b.match(y))||x.length!==T.length)return o;for(g=0,p=0;p<T.length;p++)S=T[p],A=v.indexOf(S,g),o.appendXtra(v.substr(g,A-g),Number(S),lt(x[p],S),"",!(!C||"px"!==v.substr(A+S.length,2))&&Math.round,0===p),g=A+S.length;o["xs"+o.l]+=v.substr(g)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+b:b;if(-1!==r.indexOf("=")&&o.data){for(w=o.xs0+o.data.s,f=1;f<o.l;f++)w+=o["xs"+f]+o.data["xn"+f];o.e=w+o["xs"+f]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},Pt=9;for((o=bt.prototype).l=o.pr=0;--Pt>0;)o["xn"+Pt]=0,o["xs"+Pt]="";o.xs0="",o._next=o._prev=o.xfirst=o.data=o.plugin=o.setRatio=o.rxp=null,o.appendXtra=function(t,e,i,r,n,a){var s=this,o=s.l;return s["xs"+o]+=a&&(o||s["xs"+o])?" "+t:t||"",i||0===o||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=r||"",o>0?(s.data["xn"+o]=e+i,s.rxp["xn"+o]=n,s["xn"+o]=e,s.plugin||(s.xfirst=new bt(s,"xn"+o,e,i,s.xfirst||s,0,s.n,n,s.pr),s.xfirst.xs0=0),s):(s.data={s:e+i},s.rxp={},s.s=e,s.c=i,s.r=n,s)):(s["xs"+o]+=e+(r||""),s)};var Et=function(t,e){e=e||{},this.p=e.prefix&&Q(t)||t,s[t]=s[this.p]=this,this.format=e.formatter||yt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.allowFunc=e.allowFunc,this.pr=e.priority||0},At=V._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var r,n=t.split(","),a=e.defaultValue;for(i=i||[a],r=0;r<n.length;r++)e.prefix=0===r&&e.prefix,e.defaultValue=i[r]||a,new Et(n[r],e)},St=V._registerPluginProp=function(t){if(!s[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";At(t,{parser:function(t,i,r,n,o,h,l){var u=a.com.greensock.plugins[e];return u?(u._cssRegister(),s[r].parse(t,i,r,n,o,h,l)):(q("Error: "+e+" js file not loaded."),o)}})}};(o=Et.prototype).parseComplex=function(t,e,i,r,n,a){var s,o,h,l,u,c,f=this.keyword;if(this.multi&&(F.test(i)||F.test(e)?(o=e.replace(F,"|").split("|"),h=i.replace(F,"|").split("|")):f&&(o=[e],h=[i])),h){for(l=h.length>o.length?h.length:o.length,s=0;s<l;s++)e=o[s]=o[s]||this.dflt,i=h[s]=h[s]||this.dflt,f&&(u=e.indexOf(f))!==(c=i.indexOf(f))&&(-1===c?o[s]=o[s].split(f).join(""):-1===u&&(o[s]+=" "+f));e=o.join(", "),i=h.join(", ")}return xt(t,this.p,e,i,this.clrs,this.dflt,r,this.pr,n,a)},o.parse=function(t,e,r,n,a,s,o){return this.parseComplex(t.style,this.format(tt(t,this.p,i,!1,this.dflt)),this.format(e),a,s)},n.registerSpecialProp=function(t,e,i){At(t,{parser:function(t,r,n,a,s,o,h){var l=new bt(t,n,0,0,s,2,n,!1,i);return l.plugin=o,l.setRatio=e(t,r,a._tween,n),l},priority:i})},n.useSVGTransformAttr=!0;var wt,Dt,Ot,It,Mt,Ct="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Rt=Q("transform"),Ft=Z+"transform",Bt=Q("transformOrigin"),Nt=null!==Q("perspective"),Lt=V.Transform=function(){this.perspective=parseFloat(n.defaultTransformPerspective)||0,this.force3D=!(!1===n.defaultForce3D||!Nt)&&(n.defaultForce3D||"auto")},kt=v.ML.SVGElement,Ut=function(t,e,i){var r,n=j.createElementNS("http://www.w3.org/2000/svg",t),a=/([a-z])([A-Z])/g;for(r in i)n.setAttributeNS(null,r.replace(a,"$1-$2").toLowerCase(),i[r]);return e.appendChild(n),n},jt=j.documentElement||{},Xt=(Mt=p||/Android/i.test(H)&&!v.ML.chrome,j.createElementNS&&jt.appendChild&&!Mt&&(Dt=Ut("svg",jt),It=(Ot=Ut("rect",Dt,{width:100,height:50,x:100})).getBoundingClientRect().width,Ot.style[Bt]="50% 50%",Ot.style[Rt]="scaleX(0.5)",Mt=It===Ot.getBoundingClientRect().width&&!(c&&Nt),jt.removeChild(Dt)),Mt),Yt=function(t,e,i,r,a,s){var o,h,l,u,c,f,p,d,_,m,y,g,v,b,T=t._gsTransform,x=zt(t,!0);T&&(v=T.xOrigin,b=T.yOrigin),(!r||(o=r.split(" ")).length<2)&&(0===(p=t.getBBox()).x&&0===p.y&&p.width+p.height===0&&(p={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),o=[(-1!==(e=ht(e).split(" "))[0].indexOf("%")?parseFloat(e[0])/100*p.width:parseFloat(e[0]))+p.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*p.height:parseFloat(e[1]))+p.y]),i.xOrigin=u=parseFloat(o[0]),i.yOrigin=c=parseFloat(o[1]),r&&x!==Ht&&(f=x[0],p=x[1],d=x[2],_=x[3],m=x[4],y=x[5],(g=f*_-p*d)&&(h=u*(_/g)+c*(-d/g)+(d*y-_*m)/g,l=u*(-p/g)+c*(f/g)-(f*y-p*m)/g,u=i.xOrigin=o[0]=h,c=i.yOrigin=o[1]=l)),T&&(s&&(i.xOffset=T.xOffset,i.yOffset=T.yOffset,T=i),a||!1!==a&&!1!==n.defaultSmoothOrigin?(h=u-v,l=c-b,T.xOffset+=h*x[0]+l*x[2]-h,T.yOffset+=h*x[1]+l*x[3]-l):T.xOffset=T.yOffset=0),s||t.setAttribute("data-svg-origin",o.join(" "))},Gt=function(t){var e,i=X("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,n=this.nextSibling,a=this.style.cssText;if(jt.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Gt}catch(t){}else this._originalGetBBox&&(e=this._originalGetBBox());return n?r.insertBefore(this,n):r.appendChild(this),jt.removeChild(i),this.style.cssText=a,e},Vt=function(t){return!(!kt||!t.getCTM||t.parentNode&&!t.ownerSVGElement||!function(t){try{return t.getBBox()}catch(e){return Gt.call(t,!0)}}(t))},Ht=[1,0,0,1,0,0],zt=function(t,e){var i,r,n,a,s,o,h,l=t._gsTransform||new Lt,u=1e5,c=t.style;if(Rt?r=tt(t,Ft,null,!0):t.currentStyle&&(r=(r=t.currentStyle.filter.match(C))&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),l.x||0,l.y||0].join(","):""),i=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,Rt&&i&&!t.offsetParent&&t!==jt&&(a=c.display,c.display="block",(h=t.parentNode)&&t.offsetParent||(s=1,o=t.nextSibling,jt.appendChild(t)),i=!(r=tt(t,Ft,null,!0))||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,a?c.display=a:Qt(c,"display"),s&&(o?h.insertBefore(t,o):h?h.appendChild(t):jt.removeChild(t))),(l.svg||t.getCTM&&Vt(t))&&(i&&-1!==(c[Rt]+"").indexOf("matrix")&&(r=c[Rt],i=0),n=t.getAttribute("transform"),i&&n&&(r="matrix("+(n=t.transform.baseVal.consolidate().matrix).a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")",i=0)),i)return Ht;for(n=(r||"").match(m)||[],Pt=n.length;--Pt>-1;)a=Number(n[Pt]),n[Pt]=(s=a-(a|=0))?(s*u+(s<0?-.5:.5)|0)/u+a:a;return e&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},Wt=V.getTransform=function(t,e,i,r){if(t._gsTransform&&i&&!r)return t._gsTransform;var a,s,o,h,l,u,c=i&&t._gsTransform||new Lt,f=c.scaleX<0,p=2e-5,d=1e5,_=Nt&&(parseFloat(tt(t,Bt,e,!1,"0 0 0").split(" ")[2])||c.zOrigin)||0,m=parseFloat(n.defaultTransformPerspective)||0;if(c.svg=!(!t.getCTM||!Vt(t)),c.svg&&(Yt(t,tt(t,Bt,e,!1,"50% 50%")+"",c,t.getAttribute("data-svg-origin")),wt=n.useSVGTransformAttr||Xt),(a=zt(t))!==Ht){if(16===a.length){var y,g,b,T,x,P=a[0],E=a[1],A=a[2],S=a[3],w=a[4],D=a[5],O=a[6],I=a[7],M=a[8],C=a[9],R=a[10],F=a[12],B=a[13],N=a[14],k=a[11],U=Math.atan2(O,R);c.zOrigin&&(F=M*(N=-c.zOrigin)-a[12],B=C*N-a[13],N=R*N+c.zOrigin-a[14]),c.rotationX=U*L,U&&(y=w*(T=Math.cos(-U))+M*(x=Math.sin(-U)),g=D*T+C*x,b=O*T+R*x,M=w*-x+M*T,C=D*-x+C*T,R=O*-x+R*T,k=I*-x+k*T,w=y,D=g,O=b),U=Math.atan2(-A,R),c.rotationY=U*L,U&&(g=E*(T=Math.cos(-U))-C*(x=Math.sin(-U)),b=A*T-R*x,C=E*x+C*T,R=A*x+R*T,k=S*x+k*T,P=y=P*T-M*x,E=g,A=b),U=Math.atan2(E,P),c.rotation=U*L,U&&(y=P*(T=Math.cos(U))+E*(x=Math.sin(U)),g=w*T+D*x,b=M*T+C*x,E=E*T-P*x,D=D*T-w*x,C=C*T-M*x,P=y,w=g,M=b),c.rotationX&&Math.abs(c.rotationX)+Math.abs(c.rotation)>359.9&&(c.rotationX=c.rotation=0,c.rotationY=180-c.rotationY),U=Math.atan2(w,D),c.scaleX=(Math.sqrt(P*P+E*E+A*A)*d+.5|0)/d,c.scaleY=(Math.sqrt(D*D+O*O)*d+.5|0)/d,c.scaleZ=(Math.sqrt(M*M+C*C+R*R)*d+.5|0)/d,P/=c.scaleX,w/=c.scaleY,E/=c.scaleX,D/=c.scaleY,Math.abs(U)>p?(c.skewX=U*L,w=0,"simple"!==c.skewType&&(c.scaleY*=1/Math.cos(U))):c.skewX=0,c.perspective=k?1/(k<0?-k:k):0,c.x=F,c.y=B,c.z=N,c.svg&&(c.x-=c.xOrigin-(c.xOrigin*P-c.yOrigin*w),c.y-=c.yOrigin-(c.yOrigin*E-c.xOrigin*D))}else if(!Nt||r||!a.length||c.x!==a[4]||c.y!==a[5]||!c.rotationX&&!c.rotationY){var j=a.length>=6,X=j?a[0]:1,Y=a[1]||0,G=a[2]||0,V=j?a[3]:1;c.x=a[4]||0,c.y=a[5]||0,o=Math.sqrt(X*X+Y*Y),h=Math.sqrt(V*V+G*G),l=X||Y?Math.atan2(Y,X)*L:c.rotation||0,u=G||V?Math.atan2(G,V)*L+l:c.skewX||0,c.scaleX=o,c.scaleY=h,c.rotation=l,c.skewX=u,Nt&&(c.rotationX=c.rotationY=c.z=0,c.perspective=m,c.scaleZ=1),c.svg&&(c.x-=c.xOrigin-(c.xOrigin*X+c.yOrigin*G),c.y-=c.yOrigin-(c.xOrigin*Y+c.yOrigin*V))}for(s in Math.abs(c.skewX)>90&&Math.abs(c.skewX)<270&&(f?(c.scaleX*=-1,c.skewX+=c.rotation<=0?180:-180,c.rotation+=c.rotation<=0?180:-180):(c.scaleY*=-1,c.skewX+=c.skewX<=0?180:-180)),c.zOrigin=_,c)c[s]<p&&c[s]>-p&&(c[s]=0)}return i&&(t._gsTransform=c,c.svg&&(wt&&t.style[Rt]?v.ZP.delayedCall(.001,(function(){Qt(t.style,Rt)})):!wt&&t.getAttribute("transform")&&v.ZP.delayedCall(.001,(function(){t.removeAttribute("transform")})))),c},qt=function(t){var e,i,r=this.data,n=-r.rotation*N,a=n+r.skewX*N,s=1e5,o=(Math.cos(n)*r.scaleX*s|0)/s,h=(Math.sin(n)*r.scaleX*s|0)/s,l=(Math.sin(a)*-r.scaleY*s|0)/s,u=(Math.cos(a)*r.scaleY*s|0)/s,c=this.t.style,f=this.t.currentStyle;if(f){i=h,h=-l,l=-i,e=f.filter,c.filter="";var d,_,m=this.t.offsetWidth,y=this.t.offsetHeight,g="absolute"!==f.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+h+", M21="+l+", M22="+u,b=r.x+m*r.xPercent/100,T=r.y+y*r.yPercent/100;if(null!=r.ox&&(b+=(d=(r.oxp?m*r.ox*.01:r.ox)-m/2)-(d*o+(_=(r.oyp?y*r.oy*.01:r.oy)-y/2)*h),T+=_-(d*l+_*u)),v+=g?", Dx="+((d=m/2)-(d*o+(_=y/2)*h)+b)+", Dy="+(_-(d*l+_*u)+T)+")":", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?c.filter=e.replace(R,v):c.filter=v+" "+e,0!==t&&1!==t||1===o&&0===h&&0===l&&1===u&&(g&&-1===v.indexOf("Dx=0, Dy=0")||P.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&c.removeAttribute("filter")),!g){var E,A,S,w=p<8?1:-1;for(d=r.ieOffsetX||0,_=r.ieOffsetY||0,r.ieOffsetX=Math.round((m-((o<0?-o:o)*m+(h<0?-h:h)*y))/2+b),r.ieOffsetY=Math.round((y-((u<0?-u:u)*y+(l<0?-l:l)*m))/2+T),Pt=0;Pt<4;Pt++)S=(i=-1!==(E=f[A=st[Pt]]).indexOf("px")?parseFloat(E):et(this.t,A,parseFloat(E),E.replace(x,""))||0)!==r[A]?Pt<2?-r.ieOffsetX:-r.ieOffsetY:Pt<2?d-r.ieOffsetX:_-r.ieOffsetY,c[A]=(r[A]=Math.round(i-S*(0===Pt||2===Pt?1:w)))+"px"}}},Zt=V.set3DTransformRatio=V.setTransformRatio=function(t){var e,i,r,n,a,s,o,h,l,u,f,p,d,_,m,y,g,v,b,T,x,P,E,A=this.data,S=this.t.style,w=A.rotation,D=A.rotationX,O=A.rotationY,I=A.scaleX,M=A.scaleY,C=A.scaleZ,R=A.x,F=A.y,B=A.z,L=A.svg,k=A.perspective,U=A.force3D,j=A.skewY,X=A.skewX;if(j&&(X+=j,w+=j),!((1!==t&&0!==t||"auto"!==U||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&U||B||k||O||D||1!==C)||wt&&L||!Nt)w||X||L?(w*=N,P=X*N,E=1e5,i=Math.cos(w)*I,a=Math.sin(w)*I,r=Math.sin(w-P)*-M,s=Math.cos(w-P)*M,P&&"simple"===A.skewType&&(e=Math.tan(P-j*N),r*=e=Math.sqrt(1+e*e),s*=e,j&&(e=Math.tan(j*N),i*=e=Math.sqrt(1+e*e),a*=e)),L&&(R+=A.xOrigin-(A.xOrigin*i+A.yOrigin*r)+A.xOffset,F+=A.yOrigin-(A.xOrigin*a+A.yOrigin*s)+A.yOffset,wt&&(A.xPercent||A.yPercent)&&(m=this.t.getBBox(),R+=.01*A.xPercent*m.width,F+=.01*A.yPercent*m.height),R<(m=1e-6)&&R>-m&&(R=0),F<m&&F>-m&&(F=0)),b=(i*E|0)/E+","+(a*E|0)/E+","+(r*E|0)/E+","+(s*E|0)/E+","+R+","+F+")",L&&wt?this.t.setAttribute("transform","matrix("+b):S[Rt]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) matrix(":"matrix(")+b):S[Rt]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) matrix(":"matrix(")+I+",0,0,"+M+","+R+","+F+")";else{if(c&&(I<(m=1e-4)&&I>-m&&(I=C=2e-5),M<m&&M>-m&&(M=C=2e-5),!k||A.z||A.rotationX||A.rotationY||(k=0)),w||X)w*=N,y=i=Math.cos(w),g=a=Math.sin(w),X&&(w-=X*N,y=Math.cos(w),g=Math.sin(w),"simple"===A.skewType&&(e=Math.tan((X-j)*N),y*=e=Math.sqrt(1+e*e),g*=e,A.skewY&&(e=Math.tan(j*N),i*=e=Math.sqrt(1+e*e),a*=e))),r=-g,s=y;else{if(!(O||D||1!==C||k||L))return void(S[Rt]=(A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) translate3d(":"translate3d(")+R+"px,"+F+"px,"+B+"px)"+(1!==I||1!==M?" scale("+I+","+M+")":""));i=s=1,r=a=0}u=1,n=o=h=l=f=p=0,d=k?-1/k:0,_=A.zOrigin,m=1e-6,T=",",x="0",(w=O*N)&&(y=Math.cos(w),h=-(g=Math.sin(w)),f=d*-g,n=i*g,o=a*g,u=y,d*=y,i*=y,a*=y),(w=D*N)&&(e=r*(y=Math.cos(w))+n*(g=Math.sin(w)),v=s*y+o*g,l=u*g,p=d*g,n=r*-g+n*y,o=s*-g+o*y,u*=y,d*=y,r=e,s=v),1!==C&&(n*=C,o*=C,u*=C,d*=C),1!==M&&(r*=M,s*=M,l*=M,p*=M),1!==I&&(i*=I,a*=I,h*=I,f*=I),(_||L)&&(_&&(R+=n*-_,F+=o*-_,B+=u*-_+_),L&&(R+=A.xOrigin-(A.xOrigin*i+A.yOrigin*r)+A.xOffset,F+=A.yOrigin-(A.xOrigin*a+A.yOrigin*s)+A.yOffset),R<m&&R>-m&&(R=x),F<m&&F>-m&&(F=x),B<m&&B>-m&&(B=0)),b=A.xPercent||A.yPercent?"translate("+A.xPercent+"%,"+A.yPercent+"%) matrix3d(":"matrix3d(",b+=(i<m&&i>-m?x:i)+T+(a<m&&a>-m?x:a)+T+(h<m&&h>-m?x:h),b+=T+(f<m&&f>-m?x:f)+T+(r<m&&r>-m?x:r)+T+(s<m&&s>-m?x:s),D||O||1!==C?(b+=T+(l<m&&l>-m?x:l)+T+(p<m&&p>-m?x:p)+T+(n<m&&n>-m?x:n),b+=T+(o<m&&o>-m?x:o)+T+(u<m&&u>-m?x:u)+T+(d<m&&d>-m?x:d)+T):b+=",0,0,0,0,1,0,",b+=R+T+F+T+B+T+(k?1+-B/k:1)+")",S[Rt]=b}};(o=Lt.prototype).x=o.y=o.z=o.skewX=o.skewY=o.rotation=o.rotationX=o.rotationY=o.zOrigin=o.xPercent=o.yPercent=o.xOffset=o.yOffset=0,o.scaleX=o.scaleY=o.scaleZ=1,At("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,r,a,s,o,h){if(a._lastParsedTransform===h)return s;a._lastParsedTransform=h;var l=h.scale&&"function"==typeof h.scale?h.scale:0;l&&(h.scale=l(_,t));var u,c,f,p,m,y,g,v,b,T=t._gsTransform,x=t.style,P=1e-6,E=Ct.length,A=h,S={},w="transformOrigin",D=Wt(t,i,!0,A.parseTransform),O=A.transform&&("function"==typeof A.transform?A.transform(_,d):A.transform);if(D.skewType=A.skewType||D.skewType||n.defaultSkewType,a._transform=D,"rotationZ"in A&&(A.rotation=A.rotationZ),O&&"string"==typeof O&&Rt)(c=Y.style)[Rt]=O,c.display="block",c.position="absolute",-1!==O.indexOf("%")&&(c.width=tt(t,"width"),c.height=tt(t,"height")),j.body.appendChild(Y),u=Wt(Y,null,!1),"simple"===D.skewType&&(u.scaleY*=Math.cos(u.skewX*N)),D.svg&&(y=D.xOrigin,g=D.yOrigin,u.x-=D.xOffset,u.y-=D.yOffset,(A.transformOrigin||A.svgOrigin)&&(O={},Yt(t,ht(A.transformOrigin),O,A.svgOrigin,A.smoothOrigin,!0),y=O.xOrigin,g=O.yOrigin,u.x-=O.xOffset-D.xOffset,u.y-=O.yOffset-D.yOffset),(y||g)&&(v=zt(Y,!0),u.x-=y-(y*v[0]+g*v[2]),u.y-=g-(y*v[1]+g*v[3]))),j.body.removeChild(Y),u.perspective||(u.perspective=D.perspective),null!=A.xPercent&&(u.xPercent=ut(A.xPercent,D.xPercent)),null!=A.yPercent&&(u.yPercent=ut(A.yPercent,D.yPercent));else if("object"==typeof A){if(u={scaleX:ut(null!=A.scaleX?A.scaleX:A.scale,D.scaleX),scaleY:ut(null!=A.scaleY?A.scaleY:A.scale,D.scaleY),scaleZ:ut(A.scaleZ,D.scaleZ),x:ut(A.x,D.x),y:ut(A.y,D.y),z:ut(A.z,D.z),xPercent:ut(A.xPercent,D.xPercent),yPercent:ut(A.yPercent,D.yPercent),perspective:ut(A.transformPerspective,D.perspective)},null!=(m=A.directionalRotation))if("object"==typeof m)for(c in m)A[c]=m[c];else A.rotation=m;"string"==typeof A.x&&-1!==A.x.indexOf("%")&&(u.x=0,u.xPercent=ut(A.x,D.xPercent)),"string"==typeof A.y&&-1!==A.y.indexOf("%")&&(u.y=0,u.yPercent=ut(A.y,D.yPercent)),u.rotation=ct("rotation"in A?A.rotation:"shortRotation"in A?A.shortRotation+"_short":D.rotation,D.rotation,"rotation",S),Nt&&(u.rotationX=ct("rotationX"in A?A.rotationX:"shortRotationX"in A?A.shortRotationX+"_short":D.rotationX||0,D.rotationX,"rotationX",S),u.rotationY=ct("rotationY"in A?A.rotationY:"shortRotationY"in A?A.shortRotationY+"_short":D.rotationY||0,D.rotationY,"rotationY",S)),u.skewX=ct(A.skewX,D.skewX),u.skewY=ct(A.skewY,D.skewY)}for(Nt&&null!=A.force3D&&(D.force3D=A.force3D,p=!0),(f=D.force3D||D.z||D.rotationX||D.rotationY||u.z||u.rotationX||u.rotationY||u.perspective)||null==A.scale||(u.scaleZ=1);--E>-1;)((O=u[b=Ct[E]]-D[b])>P||O<-P||null!=A[b]||null!=k[b])&&(p=!0,s=new bt(D,b,D[b],O,s),b in S&&(s.e=S[b]),s.xs0=0,s.plugin=o,a._overwriteProps.push(s.n));return O="function"==typeof A.transformOrigin?A.transformOrigin(_,d):A.transformOrigin,D.svg&&(O||A.svgOrigin)&&(y=D.xOffset,g=D.yOffset,Yt(t,ht(O),u,A.svgOrigin,A.smoothOrigin),s=Tt(D,"xOrigin",(T?D:u).xOrigin,u.xOrigin,s,w),s=Tt(D,"yOrigin",(T?D:u).yOrigin,u.yOrigin,s,w),y===D.xOffset&&g===D.yOffset||(s=Tt(D,"xOffset",T?y:D.xOffset,D.xOffset,s,w),s=Tt(D,"yOffset",T?g:D.yOffset,D.yOffset,s,w)),O="0px 0px"),(O||Nt&&f&&D.zOrigin)&&(Rt?(p=!0,b=Bt,O||(O=(O=(tt(t,b,i,!1,"50% 50%")+"").split(" "))[0]+" "+O[1]+" "+D.zOrigin+"px"),O+="",(s=new bt(x,b,0,0,s,-1,w)).b=x[b],s.plugin=o,Nt?(c=D.zOrigin,O=O.split(" "),D.zOrigin=(O.length>2?parseFloat(O[2]):c)||0,s.xs0=s.e=O[0]+" "+(O[1]||"50%")+" 0px",(s=new bt(D,"zOrigin",0,0,s,-1,s.n)).b=c,s.xs0=s.e=D.zOrigin):s.xs0=s.e=O):ht(O+"",D)),p&&(a._transformType=D.svg&&wt||!f&&3!==this._transformType?2:3),l&&(h.scale=l),s},allowFunc:!0,prefix:!0}),At("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),At("clipPath",{defaultValue:"inset(0%)",prefix:!0,multi:!0,formatter:yt("inset(0% 0% 0% 0%)",!1,!0)}),At("borderRadius",{defaultValue:"0px",parser:function(t,r,n,a,s,o){r=this.format(r);var h,l,u,c,f,p,d,_,m,y,g,v,b,T,x,P,E=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],A=t.style;for(m=parseFloat(t.offsetWidth),y=parseFloat(t.offsetHeight),h=r.split(" "),l=0;l<E.length;l++)this.p.indexOf("border")&&(E[l]=Q(E[l])),-1!==(f=c=tt(t,E[l],i,!1,"0px")).indexOf(" ")&&(c=f.split(" "),f=c[0],c=c[1]),p=u=h[l],d=parseFloat(f),v=f.substr((d+"").length),(b="="===p.charAt(1))?(_=parseInt(p.charAt(0)+"1",10),p=p.substr(2),_*=parseFloat(p),g=p.substr((_+"").length-(_<0?1:0))||""):(_=parseFloat(p),g=p.substr((_+"").length)),""===g&&(g=e[n]||v),g!==v&&(T=et(t,"borderLeft",d,v),x=et(t,"borderTop",d,v),"%"===g?(f=T/m*100+"%",c=x/y*100+"%"):"em"===g?(f=T/(P=et(t,"borderLeft",1,"em"))+"em",c=x/P+"em"):(f=T+"px",c=x+"px"),b&&(p=parseFloat(f)+_+g,u=parseFloat(c)+_+g)),s=xt(A,E[l],f+" "+c,p+" "+u,!1,"0px",s);return s},prefix:!0,formatter:yt("0px 0px 0px 0px",!1,!0)}),At("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,r,n,a,s){return xt(t.style,r,this.format(tt(t,r,i,!1,"0px 0px")),this.format(e),!1,"0px",a)},prefix:!0,formatter:yt("0px 0px",!1,!0)}),At("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,r,n,a,s){var o,h,l,u,c,f,d="background-position",_=i||$(t),m=this.format((_?p?_.getPropertyValue(d+"-x")+" "+_.getPropertyValue(d+"-y"):_.getPropertyValue(d):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),y=this.format(e);if(-1!==m.indexOf("%")!=(-1!==y.indexOf("%"))&&y.split(",").length<2&&(f=tt(t,"backgroundImage").replace(O,""))&&"none"!==f){for(o=m.split(" "),h=y.split(" "),G.setAttribute("src",f),l=2;--l>-1;)(u=-1!==(m=o[l]).indexOf("%"))!=(-1!==h[l].indexOf("%"))&&(c=0===l?t.offsetWidth-G.width:t.offsetHeight-G.height,o[l]=u?parseFloat(m)/100*c+"px":parseFloat(m)/c*100+"%");m=o.join(" ")}return this.parseComplex(t.style,m,y,a,s)},formatter:ht}),At("backgroundSize",{defaultValue:"0 0",formatter:function(t){return"co"===(t+="").substr(0,2)?t:ht(-1===t.indexOf(" ")?t+" "+t:t)}}),At("perspective",{defaultValue:"0px",prefix:!0}),At("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),At("transformStyle",{prefix:!0}),At("backfaceVisibility",{prefix:!0}),At("userSelect",{prefix:!0}),At("margin",{parser:gt("marginTop,marginRight,marginBottom,marginLeft")}),At("padding",{parser:gt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),At("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,r,n,a,s){var o,h,l;return p<9?(h=t.currentStyle,l=p<8?" ":",",o="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(o=this.format(tt(t,this.p,i,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,a,s)}}),At("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),At("autoRound,strictUnits",{parser:function(t,e,i,r,n){return n}}),At("border",{defaultValue:"0px solid #000",parser:function(t,e,r,n,a,s){var o=tt(t,"borderTopWidth",i,!1,"0px"),h=this.format(e).split(" "),l=h[0].replace(x,"");return"px"!==l&&(o=parseFloat(o)/et(t,"borderTopWidth",1,l)+l),this.parseComplex(t.style,this.format(o+" "+tt(t,"borderTopStyle",i,!1,"solid")+" "+tt(t,"borderTopColor",i,!1,"#000")),h.join(" "),a,s)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(mt)||["#000"])[0]}}),At("borderWidth",{parser:gt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),At("float,cssFloat,styleFloat",{parser:function(t,e,i,r,n,a){var s=t.style,o="cssFloat"in s?"cssFloat":"styleFloat";return new bt(s,o,0,0,n,-1,i,!1,0,s[o],e)}});var Kt=function(t){var e,i=this.t,r=i.filter||tt(this.data,"filter")||"",n=this.s+this.c*t|0;100===n&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(i.removeAttribute("filter"),e=!tt(this.data,"filter")):(i.filter=r.replace(A,""),e=!0)),e||(this.xn1&&(i.filter=r=r||"alpha(opacity="+n+")"),-1===r.indexOf("pacity")?0===n&&this.xn1||(i.filter=r+" alpha(opacity="+n+")"):i.filter=r.replace(P,"opacity="+n))};At("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,r,n,a,s){var o=parseFloat(tt(t,"opacity",i,!1,"1")),h=t.style,l="autoAlpha"===r;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+o),l&&1===o&&"hidden"===tt(t,"visibility",i)&&0!==e&&(o=0),z?a=new bt(h,"opacity",o,e-o,a):((a=new bt(h,"opacity",100*o,100*(e-o),a)).xn1=l?1:0,h.zoom=1,a.type=2,a.b="alpha(opacity="+a.s+")",a.e="alpha(opacity="+(a.s+a.c)+")",a.data=t,a.plugin=s,a.setRatio=Kt),l&&((a=new bt(h,"visibility",0,0,a,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",n._overwriteProps.push(a.n),n._overwriteProps.push(r)),a}});var Qt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(w,"-$1").toLowerCase())):t.removeAttribute(e))},Jt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Qt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};At("className",{parser:function(e,r,n,a,s,o,h){var l,u,c,f,p,d=e.getAttribute("class")||"",_=e.style.cssText;if((s=a._classNamePT=new bt(e,n,0,0,s,2)).setRatio=Jt,s.pr=-11,t=!0,s.b=d,u=rt(e,i),c=e._gsClassPT){for(f={},p=c.data;p;)f[p.p]=1,p=p._next;c.setRatio(1)}return e._gsClassPT=s,s.e="="!==r.charAt(1)?r:d.replace(new RegExp("(?:\\s|^)"+r.substr(2)+"(?![\\w-])"),"")+("+"===r.charAt(0)?" "+r.substr(2):""),e.setAttribute("class",s.e),l=nt(e,u,rt(e),h,f),e.setAttribute("class",d),s.data=l.firstMPT,e.style.cssText!==_&&(e.style.cssText=_),s.xfirst=a.parse(e,l.difs,s,o)}});var $t=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,r,n,a,o=this.t.style,h=s.transform.parse;if("all"===this.e)o.cssText="",n=!0;else for(r=(e=this.e.split(" ").join("").split(",")).length;--r>-1;)i=e[r],s[i]&&(s[i].parse===h?n=!0:i="transformOrigin"===i?Bt:s[i].p),Qt(o,i);n&&(Qt(o,Rt),(a=this.t._gsTransform)&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(At("clearProps",{parser:function(e,i,r,n,a){return(a=new bt(e,r,0,0,a,2)).setRatio=$t,a.e=i,a.pr=-10,a.data=n._tween,t=!0,a}}),o="bezier,throwProps,physicsProps,physics2D".split(","),Pt=o.length;Pt--;)St(o[Pt]);(o=n.prototype)._firstPT=o._lastParsedTransform=o._transform=null,o._onInitTween=function(a,o,c,p){if(!a.nodeType)return!1;this._target=d=a,this._tween=c,this._vars=o,_=p,h=o.autoRound,t=!1,e=o.suffixMap||n.suffixMap,i=$(a),r=this._overwriteProps;var m,y,g,v,b,T,x,P,A,S=a.style;if(l&&""===S.zIndex&&("auto"!==(m=tt(a,"zIndex",i))&&""!==m||this._addLazySet(S,"zIndex",0)),"string"==typeof o&&(v=S.cssText,m=rt(a,i),S.cssText=v+";"+o,m=nt(a,m,rt(a)).difs,!z&&E.test(o)&&(m.opacity=parseFloat(RegExp.$1)),o=m,S.cssText=v),o.className?this._firstPT=y=s.className.parse(a,o.className,"className",this,null,null,o):this._firstPT=y=this.parse(a,o,null),this._transformType){for(A=3===this._transformType,Rt?u&&(l=!0,""===S.zIndex&&("auto"!==(x=tt(a,"zIndex",i))&&""!==x||this._addLazySet(S,"zIndex",0)),f&&this._addLazySet(S,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(A?"visible":"hidden"))):S.zoom=1,g=y;g&&g._next;)g=g._next;P=new bt(a,"transform",0,0,null,2),this._linkCSSP(P,null,g),P.setRatio=Rt?Zt:qt,P.data=this._transform||Wt(a,i,!0),P.tween=c,P.pr=-1,r.pop()}if(t){for(;y;){for(T=y._next,g=v;g&&g.pr>y.pr;)g=g._next;(y._prev=g?g._prev:b)?y._prev._next=y:v=y,(y._next=g)?g._prev=y:b=y,y=T}this._firstPT=v}return!0},o.parse=function(t,r,n,a){var o,l,u,c,f,p,m,y,g,v,b=t.style;for(o in r){if(p=r[o],l=s[o],"function"!=typeof p||l&&l.allowFunc||(p=p(_,d)),l)n=l.parse(t,p,o,this,n,a,r);else{if("--"===o.substr(0,2)){this._tween._propLookup[o]=this._addTween.call(this._tween,t.style,"setProperty",$(t).getPropertyValue(o)+"",p+"",o,!1,o);continue}f=tt(t,o,i)+"",g="string"==typeof p,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||g&&S.test(p)?(g||(p=((p=dt(p)).length>3?"rgba(":"rgb(")+p.join(",")+")"),n=xt(b,o,f,p,!0,"transparent",n,0,a)):g&&B.test(p)?n=xt(b,o,f,p,!0,null,n,0,a):(m=(u=parseFloat(f))||0===u?f.substr((u+"").length):"",""!==f&&"auto"!==f||("width"===o||"height"===o?(u=ot(t,o,i),m="px"):"left"===o||"top"===o?(u=it(t,o,i),m="px"):(u="opacity"!==o?0:1,m="")),(v=g&&"="===p.charAt(1))?(c=parseInt(p.charAt(0)+"1",10),p=p.substr(2),c*=parseFloat(p),y=p.replace(x,"")):(c=parseFloat(p),y=g?p.replace(x,""):""),""===y&&(y=o in e?e[o]:m),p=c||0===c?(v?c+u:c)+y:r[o],m!==y&&(""===y&&"lineHeight"!==o||(c||0===c)&&u&&(u=et(t,o,u,m),"%"===y?(u/=et(t,o,100,"%")/100,!0!==r.strictUnits&&(f=u+"%")):"em"===y||"rem"===y||"vw"===y||"vh"===y?u/=et(t,o,1,y):"px"!==y&&(c=et(t,o,c,y),y="px"),v&&(c||0===c)&&(p=c+u+y))),v&&(c+=u),!u&&0!==u||!c&&0!==c?void 0!==b[o]&&(p||p+""!="NaN"&&null!=p)?(n=new bt(b,o,c||u||0,0,n,-1,o,!1,0,f,p)).xs0="none"!==p||"display"!==o&&-1===o.indexOf("Style")?p:f:q("invalid "+o+" tween value: "+r[o]):(n=new bt(b,o,u,c-u,n,0,o,!1!==h&&("px"===y||"zIndex"===o),0,f,p)).xs0=y)}a&&n&&!n.plugin&&(n.plugin=a)}return n},o.setRatio=function(t){var e,i,r,n=this._firstPT,a=1e-6;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;n;){if(e=n.c*t+n.s,n.r?e=n.r(e):e<a&&e>-a&&(e=0),n.type)if(1===n.type)if(2===(r=n.l))n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2;else if(3===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(i=n.xs0+e+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(t);else n.t[n.p]=e+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(t),n=n._next;else for(;n;){if(2!==n.type)if(n.r&&-1!==n.type)if(e=n.r(n.s+n.c),n.type){if(1===n.type){for(r=n.l,i=n.xs0+e+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}}else n.t[n.p]=e+n.xs0;else n.t[n.p]=n.e;else n.setRatio(t);n=n._next}},o._enableTransforms=function(t){this._transform=this._transform||Wt(this._target,i,!0),this._transformType=this._transform.svg&&wt||!t&&3!==this._transformType?2:3};var te=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};o._addLazySet=function(t,e,i){var r=this._firstPT=new bt(t,e,0,0,this._firstPT,2);r.e=i,r.setRatio=te,r.data=this},o._linkCSSP=function(t,e,i,r){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,r=!0),i?i._next=t:r||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},o._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&(e.r=t[e.p]),e=e._next},o._kill=function(t){var e,i,r,n=t;if(t.autoAlpha||t.alpha){for(i in n={},t)n[i]=t[i];n.opacity=1,n.autoAlpha&&(n.visibility=1)}for(t.className&&(e=this._classNamePT)&&((r=e.xfirst)&&r._prev?this._linkCSSP(r._prev,e._next,r._prev._prev):r===this._firstPT&&(this._firstPT=e._next),e._next&&this._linkCSSP(e._next,e._next._next,r._prev),this._classNamePT=null),e=this._firstPT;e;)e.plugin&&e.plugin!==i&&e.plugin._kill&&(e.plugin._kill(t),i=e.plugin),e=e._next;return v.VN.prototype._kill.call(this,n)};var ee=function(t,e,i){var r,n,a,s;if(t.slice)for(n=t.length;--n>-1;)ee(t[n],e,i);else for(n=(r=t.childNodes).length;--n>-1;)s=(a=r[n]).type,a.style&&(e.push(rt(a)),i&&i.push(a)),1!==s&&9!==s&&11!==s||!a.childNodes.length||ee(a,e,i)};return n.cascadeTo=function(t,e,i){var r,n,a,s,o=v.ZP.to(t,e,i),h=[o],l=[],u=[],c=[],f=v.ZP._internals.reservedProps;for(t=o._targets||o.target,ee(t,l,c),o.render(e,!0,!0),ee(t,u),o.render(0,!0,!0),o._enabled(!0),r=c.length;--r>-1;)if((n=nt(c[r],l[r],u[r])).firstMPT){for(a in n=n.difs,i)f[a]&&(n[a]=i[a]);for(a in s={},n)s[a]=l[r][a];h.push(v.ZP.fromTo(c[r],e,s,n))}return h},v.VN.activate([n]),n}),!0);var x=v.li.CSSPlugin,P=v.ML._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(t,e,i,r){var n,a;if("function"!=typeof t.setAttribute)return!1;for(n in e)"function"==typeof(a=e[n])&&(a=a(r,t)),this._addTween(t,"setAttribute",t.getAttribute(n)+"",a+"",n,!1,n),this._overwriteProps.push(n);return!0}}),E=v.ML._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),A=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(i){return(Math.round(i/t)*t*e|0)/e}},S=function(t,e){for(;t;)t.f||t.blob||(t.m=e||Math.round),t=t._next},w=E.prototype;w._onInitAllProps=function(){var t,e,i,r,n=this._tween,a=n.vars.roundProps,s={},o=n._propLookup.roundProps;if("object"!=typeof a||a.push)for("string"==typeof a&&(a=a.split(",")),i=a.length;--i>-1;)s[a[i]]=Math.round;else for(r in a)s[r]=A(a[r]);for(r in s)for(t=n._firstPT;t;)e=t._next,t.pg?t.t._mod(s):t.n===r&&(2===t.f&&t.t?S(t.t._firstPT,s[r]):(this._add(t.t,r,t.s,t.c,s[r]),e&&(e._prev=t._prev),t._prev?t._prev._next=e:n._firstPT===t&&(n._firstPT=e),t._next=t._prev=null,n._propLookup[r]=o)),t=e;return!1},w._add=function(t,e,i,r,n){this._addTween(t,e,i,i+r,e,n||Math.round),this._overwriteProps.push(e)};var D=v.ML._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(t,e,i,r){"object"!=typeof e&&(e={rotation:e}),this.finals={};var n,a,s,o,h,l,u=!0===e.useRadians?2*Math.PI:360,c=1e-6;for(n in e)"useRadians"!==n&&("function"==typeof(o=e[n])&&(o=o(r,t)),a=(l=(o+"").split("_"))[0],s=parseFloat("function"!=typeof t[n]?t[n]:t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]()),h=(o=this.finals[n]="string"==typeof a&&"="===a.charAt(1)?s+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0)-s,l.length&&(-1!==(a=l.join("_")).indexOf("short")&&(h%=u)!=h%(u/2)&&(h=h<0?h+u:h-u),-1!==a.indexOf("_cw")&&h<0?h=(h+9999999999*u)%u-(h/u|0)*u:-1!==a.indexOf("ccw")&&h>0&&(h=(h-9999999999*u)%u-(h/u|0)*u)),(h>c||h<-c)&&(this._addTween(t,n,s,s+h,n),this._overwriteProps.push(n)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}});D._autoCSS=!0,v.ML._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],(function(){var t=function(t){b.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0},e=1e-8,i=v.ZP._internals,r=i.lazyTweens,n=i.lazyRender,a=v.ML._gsDefine.globals,s=new v.SX(null,null,1,0),o=t.prototype=new b;return o.constructor=t,o.kill()._gc=!1,t.version="2.1.3",o.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),b.prototype.invalidate.call(this)},o.addCallback=function(t,e,i,r){return this.add(v.ZP.delayedCall(0,t,i,r),e)},o.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),r=i.length,n=this._parseTimeOrLabel(e);--r>-1;)i[r]._startTime===n&&i[r]._enabled(!1,!1);return this},o.removePause=function(t){return this.removeCallback(b._internals.pauseCallback,t)},o.tweenTo=function(t,e){e=e||{};var i,r,n,o={ease:s,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},h=e.repeat&&a.TweenMax||v.ZP;for(r in e)o[r]=e[r];return o.time=this._parseTimeOrLabel(t),i=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,n=new h(this,i,o),o.onStart=function(){n.target.paused(!0),n.vars.time===n.target.time()||i!==n.duration()||n.isFromTo||n.duration(Math.abs(n.vars.time-n.target.time())/n.target._timeScale).render(n.time(),!0,!0),e.onStart&&e.onStart.apply(e.onStartScope||e.callbackScope||n,e.onStartParams||[])},n},o.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var r=this.tweenTo(e,i);return r.isFromTo=1,r.duration(Math.abs(r.vars.time-t)/this._timeScale||.001)},o.render=function(t,i,a){this._gc&&this._enabled(!0,!1);var s,o,h,l,u,c,f,p,d,_=this,m=_._time,y=_._dirty?_.totalDuration():_._totalDuration,g=_._duration,v=_._totalTime,b=_._startTime,T=_._timeScale,x=_._rawPrevTime,P=_._paused,E=_._cycle;if(m!==_._time&&(t+=_._time-m),t>=y-e&&t>=0)_._locked||(_._totalTime=y,_._cycle=_._repeat),_._reversed||_._hasPausedChild()||(o=!0,l="onComplete",u=!!_._timeline.autoRemoveChildren,0===_._duration&&(t<=0&&t>=-1e-8||x<0||x===e)&&x!==t&&_._first&&(u=!0,x>e&&(l="onReverseComplete"))),_._rawPrevTime=_._duration||!i||t||_._rawPrevTime===t?t:e,_._yoyo&&1&_._cycle?_._time=t=0:(_._time=g,t=g+1e-4);else if(t<e)if(_._locked||(_._totalTime=_._cycle=0),_._time=0,t>-1e-8&&(t=0),(0!==m||0===g&&x!==e&&(x>0||t<0&&x>=0)&&!_._locked)&&(l="onReverseComplete",o=_._reversed),t<0)_._active=!1,_._timeline.autoRemoveChildren&&_._reversed?(u=o=!0,l="onReverseComplete"):x>=0&&_._first&&(u=!0),_._rawPrevTime=t;else{if(_._rawPrevTime=g||!i||t||_._rawPrevTime===t?t:e,0===t&&o)for(s=_._first;s&&0===s._startTime;)s._duration||(o=!1),s=s._next;t=0,_._initted||(u=!0)}else 0===g&&x<0&&(u=!0),_._time=_._rawPrevTime=t,_._locked||(_._totalTime=t,0!==_._repeat&&(c=g+_._repeatDelay,_._cycle=_._totalTime/c>>0,_._cycle&&_._cycle===_._totalTime/c&&v<=t&&_._cycle--,_._time=_._totalTime-_._cycle*c,_._yoyo&&1&_._cycle&&(_._time=g-_._time),_._time>g?(_._time=g,t=g+1e-4):_._time<0?_._time=t=0:t=_._time));if(_._hasPause&&!_._forcingPlayhead&&!i){if((t=_._time)>m||_._repeat&&E!==_._cycle)for(s=_._first;s&&s._startTime<=t&&!f;)s._duration||"isPause"!==s.data||s.ratio||0===s._startTime&&0===_._rawPrevTime||(f=s),s=s._next;else for(s=_._last;s&&s._startTime>=t&&!f;)s._duration||"isPause"===s.data&&s._rawPrevTime>0&&(f=s),s=s._prev;f&&(d=_._startTime+(_._reversed?_._duration-f._startTime:f._startTime)/_._timeScale,f._startTime<g&&(_._time=_._rawPrevTime=t=f._startTime,_._totalTime=t+_._cycle*(_._totalDuration+_._repeatDelay)))}if(_._cycle!==E&&!_._locked){var A=_._yoyo&&0!=(1&E),S=A===(_._yoyo&&0!=(1&_._cycle)),w=_._totalTime,D=_._cycle,O=_._rawPrevTime,I=_._time;if(_._totalTime=E*g,_._cycle<E?A=!A:_._totalTime+=g,_._time=m,_._rawPrevTime=0===g?x-1e-4:x,_._cycle=E,_._locked=!0,m=A?0:g,_.render(m,i,0===g),i||_._gc||_.vars.onRepeat&&(_._cycle=D,_._locked=!1,_._callback("onRepeat")),m!==_._time)return;if(S&&(_._cycle=E,_._locked=!0,m=A?g+1e-4:-1e-4,_.render(m,!0,!1)),_._locked=!1,_._paused&&!P)return;_._time=I,_._totalTime=w,_._cycle=D,_._rawPrevTime=O}if(_._time!==m&&_._first||a||u||f){if(_._initted||(_._initted=!0),_._active||!_._paused&&_._totalTime!==v&&t>0&&(_._active=!0),0===v&&_.vars.onStart&&(0===_._totalTime&&_._totalDuration||i||_._callback("onStart")),(p=_._time)>=m)for(s=_._first;s&&(h=s._next,p===_._time&&(!_._paused||P));)(s._active||s._startTime<=_._time&&!s._paused&&!s._gc)&&(f===s&&(_.pause(),_._pauseTime=d),s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,i,a):s.render((t-s._startTime)*s._timeScale,i,a)),s=h;else for(s=_._last;s&&(h=s._prev,p===_._time&&(!_._paused||P));){if(s._active||s._startTime<=m&&!s._paused&&!s._gc){if(f===s){for(f=s._prev;f&&f.endTime()>_._time;)f.render(f._reversed?f.totalDuration()-(t-f._startTime)*f._timeScale:(t-f._startTime)*f._timeScale,i,a),f=f._prev;f=null,_.pause(),_._pauseTime=d}s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,i,a):s.render((t-s._startTime)*s._timeScale,i,a)}s=h}_._onUpdate&&(i||(r.length&&n(),_._callback("onUpdate"))),l&&(_._locked||_._gc||b!==_._startTime&&T===_._timeScale||(0===_._time||y>=_.totalDuration())&&(o&&(r.length&&n(),_._timeline.autoRemoveChildren&&_._enabled(!1,!1),_._active=!1),!i&&_.vars[l]&&_._callback(l)))}else v!==_._totalTime&&_._onUpdate&&(i||_._callback("onUpdate"))},o.getActive=function(t,e,i){var r,n,a=[],s=this.getChildren(t||null==t,e||null==t,!!i),o=0,h=s.length;for(r=0;r<h;r++)(n=s[r]).isActive()&&(a[o++]=n);return a},o.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),r=i.length;for(e=0;e<r;e++)if(i[e].time>t)return i[e].name;return null},o.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},o.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort((function(t,e){return t.time-e.time})),e},o.invalidate=function(){return this._locked=!1,b.prototype.invalidate.call(this)},o.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()||0},o.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()||0},o.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(b.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},o.time=function(t,e){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,r=this._cycle,n=r*(i+this._repeatDelay);return t>i&&(t=i),this.totalTime(this._yoyo&&1&r?i-t+n:this._repeat?t+n:t,e)},o.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},o.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},o.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},o.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+e)},t}),!0);var O=v.li.TimelineMax,I=180/Math.PI,M=[],C=[],R=[],F={},B=v.ML._gsDefine.globals,N=function(t,e,i,r){i===r&&(i=r-(r-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=r,this.da=r-t,this.ca=i-t,this.ba=e-t},L=function(t,e,i,r){var n={a:t},a={},s={},o={c:r},h=(t+e)/2,l=(e+i)/2,u=(i+r)/2,c=(h+l)/2,f=(l+u)/2,p=(f-c)/8;return n.b=h+(t-h)/4,a.b=c+p,n.c=a.a=(n.b+a.b)/2,a.c=s.a=(c+f)/2,s.b=f-p,o.b=u+(r-u)/4,s.c=o.a=(s.b+o.b)/2,[n,a,s,o]},k=function(t,e,i,r,n){var a,s,o,h,l,u,c,f,p,d,_,m,y,g=t.length-1,v=0,b=t[0].a;for(a=0;a<g;a++)s=(l=t[v]).a,o=l.d,h=t[v+1].d,n?(_=M[a],y=((m=C[a])+_)*e*.25/(r?.5:R[a]||.5),f=o-((u=o-(o-s)*(r?.5*e:0!==_?y/_:0))+(((c=o+(h-o)*(r?.5*e:0!==m?y/m:0))-u)*(3*_/(_+m)+.5)/4||0))):f=o-((u=o-(o-s)*e*.5)+(c=o+(h-o)*e*.5))/2,u+=f,c+=f,l.c=p=u,l.b=0!==a?b:b=l.a+.6*(l.c-l.a),l.da=o-s,l.ca=p-s,l.ba=b-s,i?(d=L(s,b,p,o),t.splice(v,1,d[0],d[1],d[2],d[3]),v+=4):v++,b=c;(l=t[v]).b=b,l.c=b+.4*(l.d-b),l.da=l.d-l.a,l.ca=l.c-l.a,l.ba=b-l.a,i&&(d=L(l.a,b,l.c,l.d),t.splice(v,1,d[0],d[1],d[2],d[3]))},U=function(t,e,i,r){var n,a,s,o,h,l,u=[];if(r)for(a=(t=[r].concat(t)).length;--a>-1;)"string"==typeof(l=t[a][e])&&"="===l.charAt(1)&&(t[a][e]=r[e]+Number(l.charAt(0)+l.substr(2)));if((n=t.length-2)<0)return u[0]=new N(t[0][e],0,0,t[0][e]),u;for(a=0;a<n;a++)s=t[a][e],o=t[a+1][e],u[a]=new N(s,0,0,o),i&&(h=t[a+2][e],M[a]=(M[a]||0)+(o-s)*(o-s),C[a]=(C[a]||0)+(h-o)*(h-o));return u[a]=new N(t[a][e],0,0,t[a+1][e]),u},j=function(t,e,i,r,n,a){var s,o,h,l,u,c,f,p,d={},_=[],m=a||t[0];for(o in n="string"==typeof n?","+n+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==e&&(e=1),t[0])_.push(o);if(t.length>1){for(p=t[t.length-1],f=!0,s=_.length;--s>-1;)if(o=_[s],Math.abs(m[o]-p[o])>.05){f=!1;break}f&&(t=t.concat(),a&&t.unshift(a),t.push(t[1]),a=t[t.length-3])}for(M.length=C.length=R.length=0,s=_.length;--s>-1;)o=_[s],F[o]=-1!==n.indexOf(","+o+","),d[o]=U(t,o,F[o],a);for(s=M.length;--s>-1;)M[s]=Math.sqrt(M[s]),C[s]=Math.sqrt(C[s]);if(!r){for(s=_.length;--s>-1;)if(F[o])for(c=(h=d[_[s]]).length-1,l=0;l<c;l++)u=h[l+1].da/C[l]+h[l].da/M[l]||0,R[l]=(R[l]||0)+u*u;for(s=R.length;--s>-1;)R[s]=Math.sqrt(R[s])}for(s=_.length,l=i?4:1;--s>-1;)h=d[o=_[s]],k(h,e,i,r,F[o]),f&&(h.splice(0,l),h.splice(h.length-l,l));return d},X=function(t,e,i){for(var r,n,a,s,o,h,l,u,c,f,p,d=1/i,_=t.length;--_>-1;)for(a=(f=t[_]).a,s=f.d-a,o=f.c-a,h=f.b-a,r=n=0,u=1;u<=i;u++)r=n-(n=((l=d*u)*l*s+3*(c=1-l)*(l*o+c*h))*l),e[p=_*i+u-1]=(e[p]||0)+r*r},Y=v.ML._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.9",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var r,n,a,s,o,h=e.values||[],l={},u=h[0],c=e.autoRotate||i.vars.orientToBezier;for(r in this._autoRotate=c?c instanceof Array?c:[["x","y","rotation",!0===c?0:Number(c)||0]]:null,u)this._props.push(r);for(a=this._props.length;--a>-1;)r=this._props[a],this._overwriteProps.push(r),n=this._func[r]="function"==typeof t[r],l[r]=n?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),o||l[r]!==h[0][r]&&(o=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?j(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):function(t,e,i){var r,n,a,s,o,h,l,u,c,f,p,d={},_="cubic"===(e=e||"soft")?3:2,m="soft"===e,y=[];if(m&&i&&(t=[i].concat(t)),null==t||t.length<_+1)throw"invalid Bezier data";for(c in t[0])y.push(c);for(h=y.length;--h>-1;){for(d[c=y[h]]=o=[],f=0,u=t.length,l=0;l<u;l++)r=null==i?t[l][c]:"string"==typeof(p=t[l][c])&&"="===p.charAt(1)?i[c]+Number(p.charAt(0)+p.substr(2)):Number(p),m&&l>1&&l<u-1&&(o[f++]=(r+o[f-2])/2),o[f++]=r;for(u=f-_+1,f=0,l=0;l<u;l+=_)r=o[l],n=o[l+1],a=o[l+2],s=2===_?0:o[l+3],o[f++]=p=3===_?new N(r,n,a,s):new N(r,(2*n+r)/3,(2*n+a)/3,a);o.length=f}return d}(h,e.type,l),this._segCount=this._beziers[r].length,this._timeRes){var f=function(t,e){var i,r,n,a,s=[],o=[],h=0,l=0,u=(e=e>>0||6)-1,c=[],f=[];for(i in t)X(t[i],s,e);for(n=s.length,r=0;r<n;r++)h+=Math.sqrt(s[r]),f[a=r%e]=h,a===u&&(l+=h,c[a=r/e>>0]=f,o[a]=l,h=0,f=[]);return{length:l,lengths:o,segments:c}}(this._beziers,this._timeRes);this._length=f.length,this._lengths=f.lengths,this._segments=f.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(c=this._autoRotate)for(this._initialRotations=[],c[0]instanceof Array||(this._autoRotate=c=[c]),a=c.length;--a>-1;){for(s=0;s<3;s++)r=c[a][s],this._func[r]="function"==typeof t[r]&&t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)];r=c[a][2],this._initialRotations[a]=(this._func[r]?this._func[r].call(this._target):this._target[r])||0,this._overwriteProps.push(r)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(t){var e,i,r,n,a,s,o,h,l,u,c,f=this._segCount,p=this._func,d=this._target,_=t!==this._startRatio;if(this._timeRes){if(l=this._lengths,u=this._curSeg,c=t*this._length,r=this._li,c>this._l2&&r<f-1){for(h=f-1;r<h&&(this._l2=l[++r])<=c;);this._l1=l[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(c<this._l1&&r>0){for(;r>0&&(this._l1=l[--r])>=c;);0===r&&c<this._l1?this._l1=0:r++,this._l2=l[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(e=r,c-=this._l1,r=this._si,c>this._s2&&r<u.length-1){for(h=u.length-1;r<h&&(this._s2=u[++r])<=c;);this._s1=u[r-1],this._si=r}else if(c<this._s1&&r>0){for(;r>0&&(this._s1=u[--r])>=c;);0===r&&c<this._s1?this._s1=0:r++,this._s2=u[r],this._si=r}s=1===t?1:(r+(c-this._s1)/(this._s2-this._s1))*this._prec||0}else s=(t-(e=t<0?0:t>=1?f-1:f*t>>0)*(1/f))*f;for(i=1-s,r=this._props.length;--r>-1;)n=this._props[r],o=(s*s*(a=this._beziers[n][e]).da+3*i*(s*a.ca+i*a.ba))*s+a.a,this._mod[n]&&(o=this._mod[n](o,d)),p[n]?d[n](o):d[n]=o;if(this._autoRotate){var m,y,g,v,b,T,x,P=this._autoRotate;for(r=P.length;--r>-1;)n=P[r][2],T=P[r][3]||0,x=!0===P[r][4]?1:I,a=this._beziers[P[r][0]],m=this._beziers[P[r][1]],a&&m&&(a=a[e],m=m[e],y=a.a+(a.b-a.a)*s,y+=((v=a.b+(a.c-a.b)*s)-y)*s,v+=(a.c+(a.d-a.c)*s-v)*s,g=m.a+(m.b-m.a)*s,g+=((b=m.b+(m.c-m.b)*s)-g)*s,b+=(m.c+(m.d-m.c)*s-b)*s,o=_?Math.atan2(b-g,v-y)*x+T:this._initialRotations[r],this._mod[n]&&(o=this._mod[n](o,d)),p[n]?d[n](o):d[n]=o)}}}),G=Y.prototype;Y.bezierThrough=j,Y.cubicToQuadratic=L,Y._autoCSS=!0,Y.quadraticToCubic=function(t,e,i){return new N(t,(2*e+t)/3,(2*e+i)/3,i)},Y._cssRegister=function(){var t=B.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,r=e._setPluginRatio,n=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,a,s,o,h){e instanceof Array&&(e={values:e}),h=new Y;var l,u,c,f=e.values,p=f.length-1,d=[],_={};if(p<0)return o;for(l=0;l<=p;l++)c=i(t,f[l],s,o,h,p!==l),d[l]=c.end;for(u in e)_[u]=e[u];return _.values=d,(o=new n(t,"bezier",0,0,c.pt,2)).data=c,o.plugin=h,o.setRatio=r,0===_.autoRotate&&(_.autoRotate=!0),!_.autoRotate||_.autoRotate instanceof Array||(l=!0===_.autoRotate?0:Number(_.autoRotate),_.autoRotate=null!=c.end.left?[["left","top","rotation",l,!1]]:null!=c.end.x&&[["x","y","rotation",l,!1]]),_.autoRotate&&(s._transform||s._enableTransforms(!1),c.autoRotate=s._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,s._overwriteProps.push("rotation")),h._onInitTween(c.proxy,_,s._tween),o}})}},G._mod=function(t){for(var e,i=this._overwriteProps,r=i.length;--r>-1;)(e=t[i[r]])&&"function"==typeof e&&(this._mod[i[r]]=e)},G._kill=function(t){var e,i,r=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=r.length;--i>-1;)r[i]===e&&r.splice(i,1);if(r=this._autoRotate)for(i=r.length;--i>-1;)t[r[i][2]]&&r.splice(i,1);return this._super._kill.call(this,t)},v.ML._gsDefine("easing.Back",["easing.Ease"],(function(){var t,e,i,r,n=v.ML.GreenSockGlobals||v.ML,a=n.com.greensock,s=2*Math.PI,o=Math.PI/2,h=a._class,l=function(t,e){var i=h("easing."+t,(function(){}),!0),r=i.prototype=new v.SX;return r.constructor=i,r.getRatio=e,i},u=v.SX.register||function(){},c=function(t,e,i,r,n){var a=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new r},!0);return u(a,t),a},f=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},p=function(t,e){var i=h("easing."+t,(function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1}),!0),r=i.prototype=new v.SX;return r.constructor=i,r.getRatio=e,r.config=function(t){return new i(t)},i},d=c("Back",p("BackOut",(function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1})),p("BackIn",(function(t){return t*t*((this._p1+1)*t-this._p1)})),p("BackInOut",(function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)}))),_=h("easing.SlowMo",(function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i}),!0),m=_.prototype=new v.SX;return m.constructor=_,m.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1===t?0:1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},_.ease=new _(.7,.7),m.config=_.config=function(t,e,i){return new _(t,e,i)},(m=(t=h("easing.SteppedEase",(function(t,e){t=t||1,this._p1=1/t,this._p2=t+(e?0:1),this._p3=e?1:0}),!0)).prototype=new v.SX).constructor=t,m.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),((this._p2*t|0)+this._p3)*this._p1},m.config=t.config=function(e,i){return new t(e,i)},(m=(e=h("easing.ExpoScaleEase",(function(t,e,i){this._p1=Math.log(e/t),this._p2=e-t,this._p3=t,this._ease=i}),!0)).prototype=new v.SX).constructor=e,m.getRatio=function(t){return this._ease&&(t=this._ease.getRatio(t)),(this._p3*Math.exp(this._p1*t)-this._p3)/this._p2},m.config=e.config=function(t,i,r){return new e(t,i,r)},(m=(i=h("easing.RoughEase",(function(t){for(var e,i,r,n,a,s,o=(t=t||{}).taper||"none",h=[],l=0,u=0|(t.points||20),c=u,p=!1!==t.randomize,d=!0===t.clamp,_=t.template instanceof v.SX?t.template:null,m="number"==typeof t.strength?.4*t.strength:.4;--c>-1;)e=p?Math.random():1/u*c,i=_?_.getRatio(e):e,r="none"===o?m:"out"===o?(n=1-e)*n*m:"in"===o?e*e*m:e<.5?(n=2*e)*n*.5*m:(n=2*(1-e))*n*.5*m,p?i+=Math.random()*r-.5*r:c%2?i+=.5*r:i-=.5*r,d&&(i>1?i=1:i<0&&(i=0)),h[l++]={x:e,y:i};for(h.sort((function(t,e){return t.x-e.x})),s=new f(1,1,null),c=u;--c>-1;)a=h[c],s=new f(a.x,a.y,s);this._prev=new f(0,0,0!==s.t?s:s.next)}),!0)).prototype=new v.SX).constructor=i,m.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},m.config=function(t){return new i(t)},i.ease=new i,c("Bounce",l("BounceOut",(function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375})),l("BounceIn",(function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)})),l("BounceInOut",(function(t){var e=t<.5;return(t=e?1-2*t:2*t-1)<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}))),c("Circ",l("CircOut",(function(t){return Math.sqrt(1-(t-=1)*t)})),l("CircIn",(function(t){return-(Math.sqrt(1-t*t)-1)})),l("CircInOut",(function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}))),r=function(t,e,i){var r=h("easing."+t,(function(t,e){this._p1=t>=1?t:1,this._p2=(e||i)/(t<1?t:1),this._p3=this._p2/s*(Math.asin(1/this._p1)||0),this._p2=s/this._p2}),!0),n=r.prototype=new v.SX;return n.constructor=r,n.getRatio=e,n.config=function(t,e){return new r(t,e)},r},c("Elastic",r("ElasticOut",(function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1}),.3),r("ElasticIn",(function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)}),.3),r("ElasticInOut",(function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1}),.45)),c("Expo",l("ExpoOut",(function(t){return 1-Math.pow(2,-10*t)})),l("ExpoIn",(function(t){return Math.pow(2,10*(t-1))-.001})),l("ExpoInOut",(function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}))),c("Sine",l("SineOut",(function(t){return Math.sin(t*o)})),l("SineIn",(function(t){return 1-Math.cos(t*o)})),l("SineInOut",(function(t){return-.5*(Math.cos(Math.PI*t)-1)}))),h("easing.EaseLookup",{find:function(t){return v.SX.map[t]}},!0),u(n.SlowMo,"SlowMo","ease,"),u(i,"RoughEase","ease,"),u(t,"SteppedEase","ease,"),d}),!0);var V=v.li.Back,H=v.li.Elastic,z=v.li.Bounce,W=v.li.RoughEase,q=v.li.SlowMo,Z=v.li.SteppedEase,K=v.li.Circ,Q=v.li.Expo,J=v.li.Sine,$=v.li.ExpoScaleEase,tt=T;tt._autoActivated=[b,O,x,P,Y,E,D,V,H,z,W,q,Z,K,Q,J,$];var et=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),it=function(t){function e(e){var i=t.call(this,e)||this;return i.linear=v.bJ,i.cubic=v.Lp,i}return et(e,t),e}(b),rt=function(){this.linear=v.bJ,this.cubic=v.Lp,this.bounce=z,this.back=V,this.sine=J,this.instance=tt},nt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const at=function(t){function e(e,i,r,n){var a=t.call(this,r)||this;return a.id=i,a.name=e||i,n&&!a.texture.boot&&(a.texture.orig.width*=null==n?void 0:n.gameScale,a.texture.orig.height*=null==n?void 0:n.gameScale,a.texture.boot="true"),a}return nt(e,t),Object.defineProperty(e.prototype,"tintColor",{get:function(){return"#"+this.tint.toString(16)},set:function(t){var e=+"0x".concat(t.split("#")[1]);this.tint=e},enumerable:!1,configurable:!0}),e}(e.Sprite);var st=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),ot=function(t){function e(e,i,r,n,a){var s,o=t.call(this,r,n)||this;return o.game=i,o.resolution=window.devicePixelRatio,(s=o.anchor).set.apply(s,a),o.id=e,o.name=e,o}return st(e,t),e}(e.BitmapText);const ht=ot,lt=function(){function t(){this.pool=[]}return t.prototype.getSprite=function(){if(this.pool.length>0){var t=this.pool.pop();return t&&(t.visible=!0),t}return new at("","",PIXI.Texture.EMPTY)},t.prototype.releaseSprite=function(t){for(var e=0,i=t;e<i.length;e++){var r=i[e];r.visible=!1,this.pool.push(r)}},t}();var ut=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const ct=function(t){function e(e,i,r){return t.call(this,e,i,r)||this}return ut(e,t),e}(at);var ft=function(){function t(t){var i=this;this.generateTexture=function(t){var e=null,i=null;return"[object String]"===Object.prototype.toString.call(t)?(e=PIXI.utils.TextureCache[t],i=t):(e=t,i=t.textureCacheIds?t.textureCacheIds[0]:t),[i,e]},this.image=function(t,e,r,n){var a,s=i.generateTexture(e),o=s[0],h=s[1],l=new at(t,o,h,i.game);return n&&(a=l.anchor).set.apply(a,n),r||(r=i.game.world),r.addChild(l),l},this.sprite=function(t,e,r){var n,a=i.generateTexture(e),s=a[0],o=a[1],h=new at(t,s,o,i.game);return r&&(n=h.anchor).set.apply(n,r),h},this.background=function(t,e){var r=i.generateTexture(e),n=r[0],a=r[1],s=new ct(t,n,a);return s.position.set(0,0),s.tintColor="#ffffff",s.width=i.game.config.width,s.height=i.game.config.height,s},this.button=function(t,r,n,a,s,o){var l=null;if("number"==typeof r){var u=i.graphics().generateRect(r,[0,0,100,100,6],!1);r=h.transformToTexture(i.game,u)}(l=i.image(t||"",r,a,s)).interactive=!0,l.next=null,l.status="on";var c=[l.texture,"[object String]"===Object.prototype.toString.call(n)?e.utils.TextureCache[n]:n],f=c[0],p=c[1];return l.on("pointerdown",(function(t){l.blendMode=PIXI.BLEND_MODES.ADD_NPM,l.start&&l.start(t)})),l.on("pointermove",(function(t){l.move&&l.move(t)})),l.on("pointerupoutside",(function(t){l.blendMode=PIXI.BLEND_MODES.NORMAL,l.outside&&l.outside(t)})),l.on("pointerup",(function(t){l.blendMode===PIXI.BLEND_MODES.ADD_NPM?(l.blendMode=PIXI.BLEND_MODES.NORMAL,n&&("on"===l.status?(l.status="off",l.texture=p):(l.status="on",l.texture=f)),l.next&&l.next(t)):l.cancel&&l.cancel(t)})),o&&(l.tip=i.image(o+"_tip",o,a,[.5,.5])),l},this.ticker=function(){var t=new e.Ticker;return t.autoStart=!1,t.stop(),t},this.game=t}return t.prototype.group=function(t,e){return new n(this.game,t,e)},t.prototype.texture=function(t){return PIXI.utils.TextureCache[t]},t.prototype.animation=function(t,i){var r=new e.AnimatedSprite(t);return r.animationSpeed=i||.5,r},t.prototype.emitter=function(t,e,i){return new m(t,e,i)},t.prototype.graphics=function(t){return new u(this.game,t)},t.prototype.pointer=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),new PIXI.Point(t,e)},t.prototype.tweenline=function(t){return new it(t)},t.prototype.tween=function(){return new rt},t.prototype.text=function(t,e,i,r){var n=Object.assign({},i);console.log("text",this.game.gameScale),i.fontSize&&(n.fontSize=4*i.fontSize);var a=new p(t,this.game,e,n,r);return a.scale.set(.25),a.scale.x*=this.game.gameScale,a.scale.y*=this.game.gameScale,a},t.prototype.bitmapText=function(t,e,i,r){return new ht(t,this.game,e,i,r||[0,0])},t.prototype.section=function(t,e,i,r,n){void 0===t&&(t="");var a=this.group("sect_".concat((new Date).getTime()),r),s=n.padding,o=void 0===s?4:s,h=n.bg,l=void 0===h?13697809:h,u=n.width,c=void 0===u?0:u,f=this.text("labelText",t,{fontSize:i,fill:"#ffffff",stroke:0,strokeThickness:6,wordWrap:!0,wordWrapWidth:c||0},[.5,0]),p=this.text("pureText",e,{fontSize:i,fill:"#000000"},[0,.5]),d=this.graphics().generateRect(l,[0,0,f.width+o,f.height+o,8],!1);return f.position.set(.5*d.width,.5*o),p.position.set(d.width+2,.5*d.height),a.addChild(d,p,f),a},t.prototype.tiling=function(t,i,r,n){var a="[object String]"===Object.prototype.toString.call(t)?e.utils.TextureCache[t]:t,s=new g(a,i,r);return s.initialTiling(n),s},t.prototype.jumpingNumber=function(t,e){var i=e.plusedVal,r=e.interval;+t.text!=i&&(+t.text>i?t.text=i:t.text=+t.text+r)},t.prototype.scrollText=function(t,e,i,r){var n=e.y;r.instance.to(e,.2,{y:n-e.height,delay:i,ease:r.cubic.easeIn,onComplete:function(){e.text=t,e.y=n+e.height,r.instance.to(e,.2,{y:n,ease:r.cubic.easeOut})}})},t.prototype.spritePool=function(){return new lt},t}();const pt=ft;var dt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const _t=function(t){function i(i){var r=t.call(this)||this;return r.game=i,r.preloader=e.Loader.shared,r}return dt(i,t),i.prototype.filling=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var r=i[e];this.preloader.resources[r]||this.preloader.add(r,t[r])}},i}(e.Loader),mt=function(){function t(t){this.game=t,this.generateOverlay(),this.addMask()}return t.prototype.destroy=function(){this.game.world.removeChild(this.overlay),this.game.world.removeChild(this.mask)},t.prototype.addMask=function(){this.mask=this.game.add.graphics(),this.game.world.addChild(this.mask),this.maskReset()},t.prototype.renderMask=function(t){this.mask.clear(),this.mask.generateRect(0,[this.game.config.half_w,this.game.config.half_h,t,t],!0)},t.prototype.generateOverlay=function(){var t=this.game.add.graphics().generateRect(0,[0,0,1,1]);this.overlay=h.transformToSprite(this.game,t,this.game.world),this.overlay.width=this.game.config.width,this.overlay.height=this.game.config.height,this.overlayReset()},t.prototype.overlayReset=function(){this.overlay.visible=!1,this.overlay.alpha=0},t.prototype.maskReset=function(){this.mask.visible=!1,this.game.world.mask=null},t.prototype.leaveScene=function(t){var e=this.game.add.tween();this.overlay.visible=!0,e.instance.to(this.overlay,.34,{alpha:1,ease:e.cubic.easeOut,onComplete:function(){t()}})},t.prototype.entryScene=function(){var t=this,e=this.game.add.tween();this.overlayReset(),this.mask.visible=!0,this.game.world.mask=this.mask,this.renderMask(0);var i={x:0};e.instance.to(i,.34,{x:this.game.config.width,ease:e.cubic.easeIn,onUpdate:function(){t.renderMask(i.x)},onComplete:function(){t.maskReset()}})},t}(),yt=function(){function t(t){this.game=t,this.scenes={}}return t.prototype.addScene=function(t,e,i){console.log("场景已添加 -- ",t);var r=new e(this.game,t,i);return this.scenes[t]=r,r},t.prototype.changeScene=function(t,e){var i=this;if(!t)return this.dispatchScene(e);t.dat&&this.game.gui.remove(t.dat),this.game.overlay=new mt(this.game),this.game.overlay.leaveScene((function(){return t.exit(),i.dispatchScene(e)}))},t.prototype.dispatchScene=function(t){var e=this;if(console.log(t),t.isCached||!t.resources)return console.log(t.id,"已缓存"),t.enter();if("global_preloader"!==t.id)return console.log("首次进入",t.id),this.scenes.global_preloader.enter(t);var i=this.game.loader;i.filling(t.resources),i.preloader.load((function(){console.log("preloadScene resource is ready!"),e.scenes.global_preloader.enter(e.game.entryHive)}))},t}();var gt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const vt=function(t){function e(e,i){var r=t.call(this,e,"cursor",i)||this;return r.game=e,r}return gt(e,t),e}(n);var bt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const Tt=function(t){function e(e,i){var r=t.call(this,e,"coverMask",i)||this;return r.game=e,r.start_X=0,r.start_Y=0,r.curTip_X=0,r.curTip_Y=0,r.move_X=0,r.move_Y=0,r.cursorX=0,r.cursorY=0,r.isDragging=!1,r.scaleRatio=1,r.initial(),r}return bt(e,t),e.prototype.initial=function(){e.COVER_SCALE=this.game.world.scale.x,e.scaleRatio=1,this.lines=this.generateGrid(),this.bindControllerHandler(this.lines)},e.prototype.generateGrid=function(){var t,e,i=null!==(t=this.game.config.width)&&void 0!==t?t:0,r=null!==(e=this.game.config.height)&&void 0!==e?e:0,n=100,a=this.game.add.graphics().generateLine({width:1,color:16777215,alpha:.15});a.interactive=!0;for(var s=[],o=[],h=~~this.game.editX,l=~~this.game.editY,u=n,c=r;u<c;u+=n)a.moveTo(0,u),a.lineTo(i,u),(p=this.game.add.text("","".concat(u-l),{fontSize:14,fontWeight:"bold",fill:9093127},[0,.5])).position.set(0,u),o.push(p);var f=n;for(c=i;f<c;f+=n){var p;a.moveTo(f,0),a.lineTo(f,r),this.addChild(a),(p=this.game.add.text("","".concat(f-h),{fontSize:14,fontWeight:"bold",fill:9093127},[.5,0])).position.set(f,0),s.push(p)}return this.addChild.apply(this,s),this.addChild.apply(this,o),a},e.prototype.translateWheelScalePosition=function(t){return this.curTip_X=t.data.global.x/(e.COVER_SCALE*this.scaleRatio)-this.game.editX,this.curTip_Y=t.data.global.y/(e.COVER_SCALE*this.scaleRatio)-this.game.editY,this.cursorX=~~(this.move_X+this.curTip_X),this.cursorY=~~(this.move_Y+this.curTip_Y),[this.cursorX,this.cursorY]},e.prototype.bindControllerHandler=function(t){var i=this,r=1e3;this.scaleRatio=1;var n=this.game.view.children[0];t.on("mousemove",(function(t){i.translateWheelScalePosition(t)})),n.addEventListener("wheel",(function(t){(r-=t.deltaY)<750&&(r=750),i.scaleRatio=r/1e3,e.scaleRatio=i.scaleRatio,i.scale.set(e.COVER_SCALE*i.scaleRatio),i.game.world.scale.set(e.COVER_SCALE*i.scaleRatio);var n=i.cursorX+i.game.editX,a=i.cursorY+i.game.editY;i.pivot.set(n,a),i.position.set(n*e.COVER_SCALE,a*e.COVER_SCALE),i.game.world.pivot.set(n,a),i.game.world.position.set(n*e.COVER_SCALE,a*e.COVER_SCALE),i.move_X=i.toLocal(i.game.stage.position).x,i.move_Y=i.toLocal(i.game.stage.position).y,1==i.scaleRatio&&(i.game.world.pivot.set(0,0),i.game.world.position.set(0,0),i.pivot.set(0,0),i.position.set(0,0))}))},e}(n),xt=function(){function t(t){window.PIXI=PIXI;var i=this.dpr=t.dpr||window.devicePixelRatio;this.camera={},this.config={width:t.width*i,height:t.height*i,half_w:t.width*i*.5,half_h:t.height*i*.5},this.gameScale=this.config.width/750,this.app=new e.Application({width:this.config.width,height:this.config.height,antialias:t.antialias||!1,transparent:t.transparent||!1,view:t.view,resolution:this.dpr}),this.loader=new _t(this),this.add=new pt(this),this.stage=this.app.stage,this.world=new n(this,"world",this.stage),this.math=s,this.size=this.resizeStage(t),this.sceneManager=new yt(this),this.app.renderer.render(this.stage),this.cursor=new vt(this,this.world),t.isPureCanvas||(this.coverMask=new Tt(this,this.stage),this.coverMask.scale.set(this.size.width/this.config.width)),this.refresh()}return t.prototype.resizeStage=function(t){return this.app.renderer.autoDensity=!0,this.app.renderer.resize(t.width,t.height),e.settings.SCALE_MODE=e.SCALE_MODES.NEAREST,e.settings.FILTER_RESOLUTION=window.devicePixelRatio,this.world.scale.set(1/this.dpr),this.camera.width=t.width,this.camera.height=t.height,this.camera.half_w=.5*t.width,this.camera.half_h=.5*t.height,{width:t.width,height:t.height}},t.prototype.refresh=function(){this.ticker=PIXI.Ticker.shared,this.ticker.autoStart=!1,this.ticker.stop()},t}();var Pt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const Et=function(t){function e(e,i){var r=t.call(this,e,"knmessage",i)||this;return r.game=e,r.initial(),r.tween=r.game.add.tween(),r.lock=!1,r}return Pt(e,t),e.prototype.initial=function(){this.message=this.game.add.text("","",{fontSize:18,fill:"#ffffff",fontWeight:"bold"},[.5,.5]);var t=this.game.add.graphics();this.addChild(t),this.addChild(this.message),this.visible=!1},e.prototype.showMessage=function(t){var e=this;if(!this.lock){this.lock=!0,this.message.text=t;var i=this.children[0];i.clear(),i.setBorder({width:2,color:16777215,alpha:.8}),this.children[0].generateRect(0,[0,0,this.message.width+60,this.message.height+10,.5*this.message.height],!0,.4),this.visible=!0,this.alpha=0,this.scale.set(1),this.y+=50,this.tween.instance.to(this.scale,.1,{x:.9,y:1.15,yoyo:!0,repeat:1,ease:this.tween.back.easeInOut}),this.tween.instance.to(this,.1,{y:this.game.config.half_h,alpha:1,ease:this.tween.cubic.easeOut,onComplete:function(){e.scale.set(1),e.tween.instance.to(e,1,{alpha:1,ease:e.tween.cubic.easeOut,onComplete:function(){e.lock=!1,e.hideMessage()}})}})}},e.prototype.hideMessage=function(){this.visible=!1},e}(n);var At=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const St=function(t){function e(e,i){var r=t.call(this)||this;return r.game=e,r.id=i,r.name=i,r.isBoot=!1,r.isCached=!1,r.isBinded=!1,r.initial(),r}return At(e,t),e.prototype.initial=function(){var t=this.game.world;this.width=t.width,this.height=t.height},e.prototype.enter=function(t,e){var i=this;return this.game.world.addChild(this),this.position.set(this.game.editX,this.game.editY),e&&this.game.overlay.entryScene(),this.game.currentScene=this,this.game.overlay&&(this.game.overlay.destroy(),this.game.overlay=null),this.isBoot||(this.signBooting(),this.create(),this.game.ticker.add((function(t){i.update(t)}))),this.boot(t),this.game.ticker.start(),this},e.prototype.loading=function(t){throw new Error("Method not implemented.")},e.prototype.exit=function(){this.game.ticker.stop(),this.game.ticker.destroy(),this.remove(),this.game.currentScene=null},e.prototype.create=function(){},e.prototype.boot=function(t,e){},e.prototype.signBooting=function(){this.isBoot=!0},e.prototype.update=function(t,e){},e.prototype.remove=function(){this.game.world.removeChild(this)},e.prototype.bootMessage=function(){this.tip=new Et(this.game,this),this.tip.position.set(this.game.config.half_w,this.game.config.half_h)},e}(e.Container);function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}var Dt,Ot,It,Mt,Ct=Dt=function(t,e){return Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Dt(t,e)};Ot=Mt||(Mt={}),It=function(){function t(e){this._clock=new Ot.WorldClock,this._events=[],this._objects=[],this._eventManager=null,this._eventManager=e,console.info("DragonBones: "+t.VERSION+"\nWebsite: http://dragonbones.com/\nSource and Demo: https://github.com/DragonBones/")}return t.prototype.advanceTime=function(t){if(this._objects.length>0){for(var e=0,i=this._objects;e<i.length;e++)i[e].returnToPool();this._objects.length=0}if(this._clock.advanceTime(t),this._events.length>0){for(var r=0;r<this._events.length;++r){var n=this._events[r],a=n.armature;null!==a._armatureData&&(a.eventDispatcher.dispatchDBEvent(n.type,n),n.type===Ot.EventObject.SOUND_EVENT&&this._eventManager.dispatchDBEvent(n.type,n)),this.bufferObject(n)}this._events.length=0}},t.prototype.bufferEvent=function(t){this._events.indexOf(t)<0&&this._events.push(t)},t.prototype.bufferObject=function(t){this._objects.indexOf(t)<0&&this._objects.push(t)},Object.defineProperty(t.prototype,"clock",{get:function(){return this._clock},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventManager",{get:function(){return this._eventManager},enumerable:!0,configurable:!0}),t.VERSION="5.7.000",t.yDown=!0,t.debug=!1,t.debugDraw=!1,t}(),Ot.DragonBones=It,console.warn||(console.warn=function(){}),console.assert||(console.assert=function(){}),Date.now||(Date.now=function(){return(new Date).getTime()}),Ct=function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},function(t){var e=function(){function t(){this.hashCode=t._hashCode++,this._isInPool=!1}return t._returnObject=function(e){var i=String(e.constructor),r=i in t._maxCountMap?t._maxCountMap[i]:t._defaultMaxCount,n=t._poolsMap[i]=t._poolsMap[i]||[];n.length<r&&(e._isInPool?console.warn("The object is already in the pool."):(e._isInPool=!0,n.push(e)))},t.toString=function(){throw new Error},t.setMaxCount=function(e,i){if((i<0||i!=i)&&(i=0),null!==e)null!==(n=(r=String(e))in t._poolsMap?t._poolsMap[r]:null)&&n.length>i&&(n.length=i),t._maxCountMap[r]=i;else for(var r in t._defaultMaxCount=i,t._poolsMap){var n;(n=t._poolsMap[r]).length>i&&(n.length=i),r in t._maxCountMap&&(t._maxCountMap[r]=i)}},t.clearPool=function(e){if(void 0===e&&(e=null),null!==e){var i=String(e);null!==(n=i in t._poolsMap?t._poolsMap[i]:null)&&n.length>0&&(n.length=0)}else for(var r in t._poolsMap){var n;(n=t._poolsMap[r]).length=0}},t.borrowObject=function(e){var i=String(e),r=i in t._poolsMap?t._poolsMap[i]:null;if(null!==r&&r.length>0){var n=r.pop();return n._isInPool=!1,n}var a=new e;return a._onClear(),a},t.prototype.returnToPool=function(){this._onClear(),t._returnObject(this)},t._hashCode=0,t._defaultMaxCount=3e3,t._maxCountMap={},t._poolsMap={},t}();t.BaseObject=e}(Mt||(Mt={})),function(t){var e=function(){function t(t,e,i,r,n,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===a&&(a=0),this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=a}return t.prototype.toString=function(){return"[object dragonBones.Matrix] a:"+this.a+" b:"+this.b+" c:"+this.c+" d:"+this.d+" tx:"+this.tx+" ty:"+this.ty},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.copyFromArray=function(t,e){return void 0===e&&(e=0),this.a=t[e],this.b=t[e+1],this.c=t[e+2],this.d=t[e+3],this.tx=t[e+4],this.ty=t[e+5],this},t.prototype.identity=function(){return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this},t.prototype.concat=function(t){var e=this.a*t.a,i=0,r=0,n=this.d*t.d,a=this.tx*t.a+t.tx,s=this.ty*t.d+t.ty;return 0===this.b&&0===this.c||(e+=this.b*t.c,i+=this.b*t.d,r+=this.c*t.a,n+=this.c*t.b),0===t.b&&0===t.c||(i+=this.a*t.b,r+=this.d*t.c,a+=this.ty*t.c,s+=this.tx*t.b),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=a,this.ty=s,this},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,a=this.ty;if(0===e&&0===i)return this.b=this.c=0,0===t||0===r?this.a=this.b=this.tx=this.ty=0:(t=this.a=1/t,r=this.d=1/r,this.tx=-t*n,this.ty=-r*a),this;var s=t*r-e*i;if(0===s)return this.a=this.d=1,this.b=this.c=0,this.tx=this.ty=0,this;s=1/s;var o=this.a=r*s;return e=this.b=-e*s,i=this.c=-i*s,r=this.d=t*s,this.tx=-(o*n+i*a),this.ty=-(e*n+r*a),this},t.prototype.transformPoint=function(t,e,i,r){void 0===r&&(r=!1),i.x=this.a*t+this.c*e,i.y=this.b*t+this.d*e,r||(i.x+=this.tx,i.y+=this.ty)},t.prototype.transformRectangle=function(t,e){void 0===e&&(e=!1);var i=this.a,r=this.b,n=this.c,a=this.d,s=e?0:this.tx,o=e?0:this.ty,h=t.x,l=t.y,u=h+t.width,c=l+t.height,f=i*h+n*l+s,p=r*h+a*l+o,d=i*u+n*l+s,_=r*u+a*l+o,m=i*u+n*c+s,y=r*u+a*c+o,g=i*h+n*c+s,v=r*h+a*c+o,b=0;f>d&&(b=f,f=d,d=b),m>g&&(b=m,m=g,g=b),t.x=Math.floor(f<m?f:m),t.width=Math.ceil((d>g?d:g)-t.x),p>_&&(b=p,p=_,_=b),y>v&&(b=y,y=v,v=b),t.y=Math.floor(p<y?p:y),t.height=Math.ceil((_>v?_:v)-t.y)},t}();t.Matrix=e}(Mt||(Mt={})),function(t){var e=function(){function t(t,e,i,r,n,a){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===a&&(a=1),this.x=t,this.y=e,this.skew=i,this.rotation=r,this.scaleX=n,this.scaleY=a}return t.normalizeRadian=function(t){return(t=(t+Math.PI)%(2*Math.PI))+(t>0?-Math.PI:Math.PI)},t.prototype.toString=function(){return"[object dragonBones.Transform] x:"+this.x+" y:"+this.y+" skewX:"+180*this.skew/Math.PI+" skewY:"+180*this.rotation/Math.PI+" scaleX:"+this.scaleX+" scaleY:"+this.scaleY},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.skew=t.skew,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this},t.prototype.identity=function(){return this.x=this.y=0,this.skew=this.rotation=0,this.scaleX=this.scaleY=1,this},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.skew+=t.skew,this.rotation+=t.rotation,this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this},t.prototype.minus=function(t){return this.x-=t.x,this.y-=t.y,this.skew-=t.skew,this.rotation-=t.rotation,this.scaleX/=t.scaleX,this.scaleY/=t.scaleY,this},t.prototype.fromMatrix=function(e){var i=this.scaleX,r=this.scaleY,n=t.PI_Q;this.x=e.tx,this.y=e.ty,this.rotation=Math.atan(e.b/e.a);var a=Math.atan(-e.c/e.d);return this.scaleX=this.rotation>-n&&this.rotation<n?e.a/Math.cos(this.rotation):e.b/Math.sin(this.rotation),this.scaleY=a>-n&&a<n?e.d/Math.cos(a):-e.c/Math.sin(a),i>=0&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.rotation=this.rotation-Math.PI),r>=0&&this.scaleY<0&&(this.scaleY=-this.scaleY,a-=Math.PI),this.skew=a-this.rotation,this},t.prototype.toMatrix=function(t){return 0===this.rotation?(t.a=1,t.b=0):(t.a=Math.cos(this.rotation),t.b=Math.sin(this.rotation)),0===this.skew?(t.c=-t.b,t.d=t.a):(t.c=-Math.sin(this.skew+this.rotation),t.d=Math.cos(this.skew+this.rotation)),1!==this.scaleX&&(t.a*=this.scaleX,t.b*=this.scaleX),1!==this.scaleY&&(t.c*=this.scaleY,t.d*=this.scaleY),t.tx=this.x,t.ty=this.y,this},t.PI=Math.PI,t.PI_D=2*Math.PI,t.PI_H=Math.PI/2,t.PI_Q=Math.PI/4,t.RAD_DEG=180/Math.PI,t.DEG_RAD=Math.PI/180,t}();t.Transform=e}(Mt||(Mt={})),function(t){var e=function(){function t(t,e,i,r,n,a,s,o){void 0===t&&(t=1),void 0===e&&(e=1),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===o&&(o=0),this.alphaMultiplier=t,this.redMultiplier=e,this.greenMultiplier=i,this.blueMultiplier=r,this.alphaOffset=n,this.redOffset=a,this.greenOffset=s,this.blueOffset=o}return t.prototype.copyFrom=function(t){this.alphaMultiplier=t.alphaMultiplier,this.redMultiplier=t.redMultiplier,this.greenMultiplier=t.greenMultiplier,this.blueMultiplier=t.blueMultiplier,this.alphaOffset=t.alphaOffset,this.redOffset=t.redOffset,this.greenOffset=t.greenOffset,this.blueOffset=t.blueOffset},t.prototype.identity=function(){this.alphaMultiplier=this.redMultiplier=this.greenMultiplier=this.blueMultiplier=1,this.alphaOffset=this.redOffset=this.greenOffset=this.blueOffset=0},t}();t.ColorTransform=e}(Mt||(Mt={})),function(t){var e=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y},t.prototype.clear=function(){this.x=this.y=0},t}();t.Point=e}(Mt||(Mt={})),function(t){var e=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=i,this.height=r}return t.prototype.copyFrom=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},t.prototype.clear=function(){this.x=this.y=0,this.width=this.height=0},t}();t.Rectangle=e}(Mt||(Mt={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ints=[],e.floats=[],e.strings=[],e}return Ct(e,t),e.toString=function(){return"[class dragonBones.UserData]"},e.prototype._onClear=function(){this.ints.length=0,this.floats.length=0,this.strings.length=0},e.prototype.addInt=function(t){this.ints.push(t)},e.prototype.addFloat=function(t){this.floats.push(t)},e.prototype.addString=function(t){this.strings.push(t)},e.prototype.getInt=function(t){return void 0===t&&(t=0),t>=0&&t<this.ints.length?this.ints[t]:0},e.prototype.getFloat=function(t){return void 0===t&&(t=0),t>=0&&t<this.floats.length?this.floats[t]:0},e.prototype.getString=function(t){return void 0===t&&(t=0),t>=0&&t<this.strings.length?this.strings[t]:""},e}(t.BaseObject);t.UserData=e;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=null,e}return Ct(e,t),e.toString=function(){return"[class dragonBones.ActionData]"},e.prototype._onClear=function(){null!==this.data&&this.data.returnToPool(),this.type=0,this.name="",this.bone=null,this.slot=null,this.data=null},e}(t.BaseObject);t.ActionData=i}(Mt||(Mt={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameIndices=[],e.cachedFrames=[],e.armatureNames=[],e.armatures={},e.userData=null,e}return Ct(e,t),e.toString=function(){return"[class dragonBones.DragonBonesData]"},e.prototype._onClear=function(){for(var t in this.armatures)this.armatures[t].returnToPool(),delete this.armatures[t];null!==this.userData&&this.userData.returnToPool(),this.autoSearch=!1,this.frameRate=0,this.version="",this.name="",this.stage=null,this.frameIndices.length=0,this.cachedFrames.length=0,this.armatureNames.length=0,this.binary=null,this.intArray=null,this.floatArray=null,this.frameIntArray=null,this.frameFloatArray=null,this.frameArray=null,this.timelineArray=null,this.colorArray=null,this.userData=null},e.prototype.addArmature=function(t){t.name in this.armatures?console.warn("Same armature: "+t.name):(t.parent=this,this.armatures[t.name]=t,this.armatureNames.push(t.name))},e.prototype.getArmature=function(t){return t in this.armatures?this.armatures[t]:null},e}(t.BaseObject);t.DragonBonesData=e}(Mt||(Mt={})),function(t){var e=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.aabb=new t.Rectangle,i.animationNames=[],i.sortedBones=[],i.sortedSlots=[],i.defaultActions=[],i.actions=[],i.bones={},i.slots={},i.constraints={},i.skins={},i.animations={},i.canvas=null,i.userData=null,i}return Ct(i,e),i.toString=function(){return"[class dragonBones.ArmatureData]"},i.prototype._onClear=function(){for(var t=0,e=this.defaultActions;t<e.length;t++)e[t].returnToPool();for(var i=0,r=this.actions;i<r.length;i++)r[i].returnToPool();for(var n in this.bones)this.bones[n].returnToPool(),delete this.bones[n];for(var n in this.slots)this.slots[n].returnToPool(),delete this.slots[n];for(var n in this.constraints)this.constraints[n].returnToPool(),delete this.constraints[n];for(var n in this.skins)this.skins[n].returnToPool(),delete this.skins[n];for(var n in this.animations)this.animations[n].returnToPool(),delete this.animations[n];null!==this.canvas&&this.canvas.returnToPool(),null!==this.userData&&this.userData.returnToPool(),this.type=0,this.frameRate=0,this.cacheFrameRate=0,this.scale=1,this.name="",this.aabb.clear(),this.animationNames.length=0,this.sortedBones.length=0,this.sortedSlots.length=0,this.defaultActions.length=0,this.actions.length=0,this.defaultSkin=null,this.defaultAnimation=null,this.canvas=null,this.userData=null,this.parent=null},i.prototype.sortBones=function(){var t=this.sortedBones.length;if(!(t<=0)){var e=this.sortedBones.concat(),i=0,r=0;for(this.sortedBones.length=0;r<t;){var n=e[i++];if(i>=t&&(i=0),!(this.sortedBones.indexOf(n)>=0)){var a=!1;for(var s in this.constraints){var o=this.constraints[s];if(o.root===n&&this.sortedBones.indexOf(o.target)<0){a=!0;break}}a||null!==n.parent&&this.sortedBones.indexOf(n.parent)<0||(this.sortedBones.push(n),r++)}}}},i.prototype.cacheFrames=function(t){if(!(this.cacheFrameRate>0))for(var e in this.cacheFrameRate=t,this.animations)this.animations[e].cacheFrames(this.cacheFrameRate)},i.prototype.setCacheFrame=function(t,e){var i=this.parent.cachedFrames,r=i.length;return i.length+=10,i[r]=t.a,i[r+1]=t.b,i[r+2]=t.c,i[r+3]=t.d,i[r+4]=t.tx,i[r+5]=t.ty,i[r+6]=e.rotation,i[r+7]=e.skew,i[r+8]=e.scaleX,i[r+9]=e.scaleY,r},i.prototype.getCacheFrame=function(t,e,i){var r=this.parent.cachedFrames;t.a=r[i],t.b=r[i+1],t.c=r[i+2],t.d=r[i+3],t.tx=r[i+4],t.ty=r[i+5],e.rotation=r[i+6],e.skew=r[i+7],e.scaleX=r[i+8],e.scaleY=r[i+9],e.x=t.tx,e.y=t.ty},i.prototype.addBone=function(t){t.name in this.bones?console.warn("Same bone: "+t.name):(this.bones[t.name]=t,this.sortedBones.push(t))},i.prototype.addSlot=function(t){t.name in this.slots?console.warn("Same slot: "+t.name):(this.slots[t.name]=t,this.sortedSlots.push(t))},i.prototype.addConstraint=function(t){t.name in this.constraints?console.warn("Same constraint: "+t.name):this.constraints[t.name]=t},i.prototype.addSkin=function(t){t.name in this.skins?console.warn("Same skin: "+t.name):(t.parent=this,this.skins[t.name]=t,null===this.defaultSkin&&(this.defaultSkin=t),"default"===t.name&&(this.defaultSkin=t))},i.prototype.addAnimation=function(t){t.name in this.animations?console.warn("Same animation: "+t.name):(t.parent=this,this.animations[t.name]=t,this.animationNames.push(t.name),null===this.defaultAnimation&&(this.defaultAnimation=t))},i.prototype.addAction=function(t,e){e?this.defaultActions.push(t):this.actions.push(t)},i.prototype.getBone=function(t){return t in this.bones?this.bones[t]:null},i.prototype.getSlot=function(t){return t in this.slots?this.slots[t]:null},i.prototype.getConstraint=function(t){return t in this.constraints?this.constraints[t]:null},i.prototype.getSkin=function(t){return t in this.skins?this.skins[t]:null},i.prototype.getMesh=function(t,e,i){var r=this.getSkin(t);return null===r?null:r.getDisplay(e,i)},i.prototype.getAnimation=function(t){return t in this.animations?this.animations[t]:null},i}(t.BaseObject);t.ArmatureData=e;var i=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.transform=new t.Transform,i.userData=null,i}return Ct(i,e),i.toString=function(){return"[class dragonBones.BoneData]"},i.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.inheritTranslation=!1,this.inheritRotation=!1,this.inheritScale=!1,this.inheritReflection=!1,this.type=0,this.length=0,this.alpha=1,this.name="",this.transform.identity(),this.userData=null,this.parent=null},i}(t.BaseObject);t.BoneData=i;var r=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.geometry=new t.GeometryData,i}return Ct(i,e),i.toString=function(){return"[class dragonBones.SurfaceData]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=1,this.segmentX=0,this.segmentY=0,this.geometry.clear()},i}(i);t.SurfaceData=r;var n=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=null,t.userData=null,t}return Ct(i,e),i.createColor=function(){return new t.ColorTransform},i.toString=function(){return"[class dragonBones.SlotData]"},i.prototype._onClear=function(){null!==this.userData&&this.userData.returnToPool(),this.blendMode=0,this.displayIndex=0,this.zOrder=0,this.zIndex=0,this.alpha=1,this.name="",this.color=null,this.userData=null,this.parent=null},i.DEFAULT_COLOR=new t.ColorTransform,i}(t.BaseObject);t.SlotData=n}(Mt||(Mt={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype._onClear=function(){this.order=0,this.name="",this.type=0,this.target=null,this.root=null,this.bone=null},e}(t.BaseObject);t.ConstraintData=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.IKConstraintData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.scaleEnabled=!1,this.bendPositive=!1,this.weight=1},e}(e);t.IKConstraintData=i;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bones=[],e}return Ct(e,t),e.toString=function(){return"[class dragonBones.PathConstraintData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.pathSlot=null,this.pathDisplayData=null,this.bones.length=0,this.positionMode=0,this.spacingMode=1,this.rotateMode=1,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=0,this.translateMix=0},e.prototype.AddBone=function(t){this.bones.push(t)},e}(e);t.PathConstraintData=r}(Mt||(Mt={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.CanvasData]"},e.prototype._onClear=function(){this.hasBackground=!1,this.color=0,this.x=0,this.y=0,this.width=0,this.height=0},e}(t.BaseObject);t.CanvasData=e}(Mt||(Mt={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.displays={},e}return Ct(e,t),e.toString=function(){return"[class dragonBones.SkinData]"},e.prototype._onClear=function(){for(var t in this.displays){for(var e=0,i=this.displays[t];e<i.length;e++){var r=i[e];null!==r&&r.returnToPool()}delete this.displays[t]}this.name="",this.parent=null},e.prototype.addDisplay=function(t,e){t in this.displays||(this.displays[t]=[]),null!==e&&(e.parent=this),this.displays[t].push(e)},e.prototype.getDisplay=function(t,e){var i=this.getDisplays(t);if(null!==i)for(var r=0,n=i;r<n.length;r++){var a=n[r];if(null!==a&&a.name===e)return a}return null},e.prototype.getDisplays=function(t){return t in this.displays?this.displays[t]:null},e}(t.BaseObject);t.SkinData=e}(Mt||(Mt={})),function(t){var e=function(){function t(){this.weight=null}return t.prototype.clear=function(){this.isShared||null===this.weight||this.weight.returnToPool(),this.isShared=!1,this.inheritDeform=!1,this.offset=0,this.data=null,this.weight=null},t.prototype.shareFrom=function(t){this.isShared=!0,this.offset=t.offset,this.weight=t.weight},Object.defineProperty(t.prototype,"vertexCount",{get:function(){return this.data.intArray[this.offset+0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"triangleCount",{get:function(){return this.data.intArray[this.offset+1]},enumerable:!0,configurable:!0}),t}();t.GeometryData=e;var i=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.transform=new t.Transform,i}return Ct(i,e),i.prototype._onClear=function(){this.name="",this.path="",this.transform.identity(),this.parent=null},i}(t.BaseObject);t.DisplayData=i;var r=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.pivot=new t.Point,i}return Ct(i,e),i.toString=function(){return"[class dragonBones.ImageDisplayData]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.type=0,this.pivot.clear(),this.texture=null},i}(i);t.ImageDisplayData=r;var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actions=[],e}return Ct(e,t),e.toString=function(){return"[class dragonBones.ArmatureDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this);for(var e=0,i=this.actions;e<i.length;e++)i[e].returnToPool();this.type=1,this.inheritAnimation=!1,this.actions.length=0,this.armature=null},e.prototype.addAction=function(t){this.actions.push(t)},e}(i);t.ArmatureDisplayData=n;var a=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.geometry=new e,i}return Ct(i,t),i.toString=function(){return"[class dragonBones.MeshDisplayData]"},i.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=2,this.geometry.clear(),this.texture=null},i}(i);t.MeshDisplayData=a;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boundingBox=null,e}return Ct(e,t),e.toString=function(){return"[class dragonBones.BoundingBoxDisplayData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),null!==this.boundingBox&&this.boundingBox.returnToPool(),this.type=3,this.boundingBox=null},e}(i);t.BoundingBoxDisplayData=s;var o=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.geometry=new e,i.curveLengths=[],i}return Ct(i,t),i.toString=function(){return"[class dragonBones.PathDisplayData]"},i.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=4,this.closed=!1,this.constantSpeed=!1,this.geometry.clear(),this.curveLengths.length=0},i}(i);t.PathDisplayData=o;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bones=[],e}return Ct(e,t),e.toString=function(){return"[class dragonBones.WeightData]"},e.prototype._onClear=function(){this.count=0,this.offset=0,this.bones.length=0},e.prototype.addBone=function(t){this.bones.push(t)},e}(t.BaseObject);t.WeightData=h}(Mt||(Mt={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype._onClear=function(){this.color=0,this.width=0,this.height=0},e}(t.BaseObject);t.BoundingBoxData=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.RectangleBoundingBoxData]"},e._computeOutCode=function(t,e,i,r,n,a){var s=0;return t<i?s|=1:t>n&&(s|=2),e<r?s|=4:e>a&&(s|=8),s},e.rectangleIntersectsSegment=function(t,i,r,n,a,s,o,h,l,u,c){void 0===l&&(l=null),void 0===u&&(u=null),void 0===c&&(c=null);var f=t>a&&t<o&&i>s&&i<h,p=r>a&&r<o&&n>s&&n<h;if(f&&p)return-1;for(var d=0,_=e._computeOutCode(t,i,a,s,o,h),m=e._computeOutCode(r,n,a,s,o,h);;){if(0==(_|m)){d=2;break}if(0!=(_&m))break;var y=0,g=0,v=0,b=0!==_?_:m;0!=(4&b)?(y=t+(r-t)*(s-i)/(n-i),g=s,null!==c&&(v=.5*-Math.PI)):0!=(8&b)?(y=t+(r-t)*(h-i)/(n-i),g=h,null!==c&&(v=.5*Math.PI)):0!=(2&b)?(g=i+(n-i)*(o-t)/(r-t),y=o,null!==c&&(v=0)):0!=(1&b)&&(g=i+(n-i)*(a-t)/(r-t),y=a,null!==c&&(v=Math.PI)),b===_?(t=y,i=g,_=e._computeOutCode(t,i,a,s,o,h),null!==c&&(c.x=v)):(r=y,n=g,m=e._computeOutCode(r,n,a,s,o,h),null!==c&&(c.y=v))}return d&&(f?(d=2,null!==l&&(l.x=r,l.y=n),null!==u&&(u.x=r,u.y=r),null!==c&&(c.x=c.y+Math.PI)):p?(d=1,null!==l&&(l.x=t,l.y=i),null!==u&&(u.x=t,u.y=i),null!==c&&(c.y=c.x+Math.PI)):(d=3,null!==l&&(l.x=t,l.y=i),null!==u&&(u.x=r,u.y=n))),d},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=0},e.prototype.containsPoint=function(t,e){var i=.5*this.width;if(t>=-i&&t<=i){var r=.5*this.height;if(e>=-r&&e<=r)return!0}return!1},e.prototype.intersectsSegment=function(t,i,r,n,a,s,o){void 0===a&&(a=null),void 0===s&&(s=null),void 0===o&&(o=null);var h=.5*this.width,l=.5*this.height;return e.rectangleIntersectsSegment(t,i,r,n,-h,-l,h,l,a,s,o)},e}(e);t.RectangleBoundingBoxData=i;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.EllipseData]"},e.ellipseIntersectsSegment=function(t,e,i,r,n,a,s,o,h,l,u){void 0===h&&(h=null),void 0===l&&(l=null),void 0===u&&(u=null);var c=s/o,f=c*c,p=i-t,d=(r*=c)-(e*=c),_=Math.sqrt(p*p+d*d),m=p/_,y=d/_,g=(n-t)*m+(a-e)*y,v=s*s,b=v-(t*t+e*e)+g*g,T=0;if(b>=0){var x=Math.sqrt(b),P=g-x,E=g+x,A=P<0?-1:P<=_?0:1,S=E<0?-1:E<=_?0:1,w=A*S;if(w<0)return-1;0===w&&(-1===A?(T=2,i=t+E*m,r=(e+E*y)/c,null!==h&&(h.x=i,h.y=r),null!==l&&(l.x=i,l.y=r),null!==u&&(u.x=Math.atan2(r/v*f,i/v),u.y=u.x+Math.PI)):1===S?(T=1,t+=P*m,e=(e+P*y)/c,null!==h&&(h.x=t,h.y=e),null!==l&&(l.x=t,l.y=e),null!==u&&(u.x=Math.atan2(e/v*f,t/v),u.y=u.x+Math.PI)):(T=3,null!==h&&(h.x=t+P*m,h.y=(e+P*y)/c,null!==u&&(u.x=Math.atan2(h.y/v*f,h.x/v))),null!==l&&(l.x=t+E*m,l.y=(e+E*y)/c,null!==u&&(u.y=Math.atan2(l.y/v*f,l.x/v)))))}return T},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=1},e.prototype.containsPoint=function(t,e){var i=.5*this.width;if(t>=-i&&t<=i){var r=.5*this.height;if(e>=-r&&e<=r)return e*=i/r,Math.sqrt(t*t+e*e)<=i}return!1},e.prototype.intersectsSegment=function(t,i,r,n,a,s,o){return void 0===a&&(a=null),void 0===s&&(s=null),void 0===o&&(o=null),e.ellipseIntersectsSegment(t,i,r,n,0,0,.5*this.width,.5*this.height,a,s,o)},e}(e);t.EllipseBoundingBoxData=r;var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.vertices=[],e}return Ct(e,t),e.toString=function(){return"[class dragonBones.PolygonBoundingBoxData]"},e.polygonIntersectsSegment=function(t,e,i,r,n,a,s,o){void 0===a&&(a=null),void 0===s&&(s=null),void 0===o&&(o=null),t===i&&(t=i+1e-6),e===r&&(e=r+1e-6);for(var h=n.length,l=t-i,u=e-r,c=t*r-e*i,f=0,p=n[h-2],d=n[h-1],_=0,m=0,y=0,g=0,v=0,b=0,T=0;T<h;T+=2){var x=n[T],P=n[T+1];p===x&&(p=x+1e-4),d===P&&(d=P+1e-4);var E=p-x,A=d-P,S=p*P-d*x,w=l*A-u*E,D=(c*E-l*S)/w;if((D>=p&&D<=x||D>=x&&D<=p)&&(0===l||D>=t&&D<=i||D>=i&&D<=t)){var O=(c*A-u*S)/w;if((O>=d&&O<=P||O>=P&&O<=d)&&(0===u||O>=e&&O<=r||O>=r&&O<=e)){if(null===s){y=D,g=O,v=D,b=O,f++,null!==o&&(o.x=Math.atan2(P-d,x-p)-.5*Math.PI,o.y=o.x);break}var I=D-t;I<0&&(I=-I),0===f?(_=I,m=I,y=D,g=O,v=D,b=O,null!==o&&(o.x=Math.atan2(P-d,x-p)-.5*Math.PI,o.y=o.x)):(I<_&&(_=I,y=D,g=O,null!==o&&(o.x=Math.atan2(P-d,x-p)-.5*Math.PI)),I>m&&(m=I,v=D,b=O,null!==o&&(o.y=Math.atan2(P-d,x-p)-.5*Math.PI))),f++}}p=x,d=P}return 1===f?(null!==a&&(a.x=y,a.y=g),null!==s&&(s.x=y,s.y=g),null!==o&&(o.y=o.x+Math.PI)):f>1&&(f++,null!==a&&(a.x=y,a.y=g),null!==s&&(s.x=v,s.y=b)),f},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.type=2,this.x=0,this.y=0,this.vertices.length=0},e.prototype.containsPoint=function(t,e){var i=!1;if(t>=this.x&&t<=this.width&&e>=this.y&&e<=this.height)for(var r=0,n=this.vertices.length,a=n-2;r<n;r+=2){var s=this.vertices[a+1],o=this.vertices[r+1];if(o<e&&s>=e||s<e&&o>=e){var h=this.vertices[a],l=this.vertices[r];(e-o)*(h-l)/(s-o)+l<t&&(i=!i)}a=r}return i},e.prototype.intersectsSegment=function(t,r,n,a,s,o,h){void 0===s&&(s=null),void 0===o&&(o=null),void 0===h&&(h=null);var l=0;return 0!==i.rectangleIntersectsSegment(t,r,n,a,this.x,this.y,this.x+this.width,this.y+this.height,null,null,null)&&(l=e.polygonIntersectsSegment(t,r,n,a,this.vertices,s,o,h)),l},e}(e);t.PolygonBoundingBoxData=n}(Mt||(Mt={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cachedFrames=[],e.boneTimelines={},e.slotTimelines={},e.constraintTimelines={},e.animationTimelines={},e.boneCachedFrameIndices={},e.slotCachedFrameIndices={},e.actionTimeline=null,e.zOrderTimeline=null,e}return Ct(e,t),e.toString=function(){return"[class dragonBones.AnimationData]"},e.prototype._onClear=function(){for(var t in this.boneTimelines){for(var e=0,i=this.boneTimelines[t];e<i.length;e++)i[e].returnToPool();delete this.boneTimelines[t]}for(var t in this.slotTimelines){for(var r=0,n=this.slotTimelines[t];r<n.length;r++)n[r].returnToPool();delete this.slotTimelines[t]}for(var t in this.constraintTimelines){for(var a=0,s=this.constraintTimelines[t];a<s.length;a++)s[a].returnToPool();delete this.constraintTimelines[t]}for(var t in this.animationTimelines){for(var o=0,h=this.animationTimelines[t];o<h.length;o++)h[o].returnToPool();delete this.animationTimelines[t]}for(var t in this.boneCachedFrameIndices)delete this.boneCachedFrameIndices[t];for(var t in this.slotCachedFrameIndices)delete this.slotCachedFrameIndices[t];null!==this.actionTimeline&&this.actionTimeline.returnToPool(),null!==this.zOrderTimeline&&this.zOrderTimeline.returnToPool(),this.frameIntOffset=0,this.frameFloatOffset=0,this.frameOffset=0,this.blendType=0,this.frameCount=0,this.playTimes=0,this.duration=0,this.scale=1,this.fadeInTime=0,this.cacheFrameRate=0,this.name="",this.cachedFrames.length=0,this.actionTimeline=null,this.zOrderTimeline=null,this.parent=null},e.prototype.cacheFrames=function(t){if(!(this.cacheFrameRate>0)){this.cacheFrameRate=Math.max(Math.ceil(t*this.scale),1);var e=Math.ceil(this.cacheFrameRate*this.duration)+1;this.cachedFrames.length=e;for(var i=0,r=this.cacheFrames.length;i<r;++i)this.cachedFrames[i]=!1;for(var n=0,a=this.parent.sortedBones;n<a.length;n++){var s=a[n];for(i=0,r=(l=new Array(e)).length;i<r;++i)l[i]=-1;this.boneCachedFrameIndices[s.name]=l}for(var o=0,h=this.parent.sortedSlots;o<h.length;o++){var l,u=h[o];for(i=0,r=(l=new Array(e)).length;i<r;++i)l[i]=-1;this.slotCachedFrameIndices[u.name]=l}}},e.prototype.addBoneTimeline=function(t,e){var i=t in this.boneTimelines?this.boneTimelines[t]:this.boneTimelines[t]=[];i.indexOf(e)<0&&i.push(e)},e.prototype.addSlotTimeline=function(t,e){var i=t in this.slotTimelines?this.slotTimelines[t]:this.slotTimelines[t]=[];i.indexOf(e)<0&&i.push(e)},e.prototype.addConstraintTimeline=function(t,e){var i=t in this.constraintTimelines?this.constraintTimelines[t]:this.constraintTimelines[t]=[];i.indexOf(e)<0&&i.push(e)},e.prototype.addAnimationTimeline=function(t,e){var i=t in this.animationTimelines?this.animationTimelines[t]:this.animationTimelines[t]=[];i.indexOf(e)<0&&i.push(e)},e.prototype.getBoneTimelines=function(t){return t in this.boneTimelines?this.boneTimelines[t]:null},e.prototype.getSlotTimelines=function(t){return t in this.slotTimelines?this.slotTimelines[t]:null},e.prototype.getConstraintTimelines=function(t){return t in this.constraintTimelines?this.constraintTimelines[t]:null},e.prototype.getAnimationTimelines=function(t){return t in this.animationTimelines?this.animationTimelines[t]:null},e.prototype.getBoneCachedFrameIndices=function(t){return t in this.boneCachedFrameIndices?this.boneCachedFrameIndices[t]:null},e.prototype.getSlotCachedFrameIndices=function(t){return t in this.slotCachedFrameIndices?this.slotCachedFrameIndices[t]:null},e}(t.BaseObject);t.AnimationData=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.TimelineData]"},e.prototype._onClear=function(){this.type=10,this.offset=0,this.frameIndicesOffset=-1},e}(t.BaseObject);t.TimelineData=i;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.AnimationTimelineData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.x=0,this.y=0},e}(i);t.AnimationTimelineData=r}(Mt||(Mt={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boneMask=[],e}return Ct(e,t),e.toString=function(){return"[class dragonBones.AnimationConfig]"},e.prototype._onClear=function(){this.pauseFadeOut=!0,this.fadeOutMode=4,this.fadeOutTweenType=1,this.fadeOutTime=-1,this.actionEnabled=!0,this.additive=!1,this.displayControl=!0,this.pauseFadeIn=!0,this.resetToPose=!0,this.fadeInTweenType=1,this.playTimes=-1,this.layer=0,this.position=0,this.duration=-1,this.timeScale=-100,this.weight=1,this.fadeInTime=-1,this.autoFadeOutTime=-1,this.name="",this.animation="",this.group="",this.boneMask.length=0},e.prototype.clear=function(){this._onClear()},e.prototype.copyFrom=function(t){this.pauseFadeOut=t.pauseFadeOut,this.fadeOutMode=t.fadeOutMode,this.autoFadeOutTime=t.autoFadeOutTime,this.fadeOutTweenType=t.fadeOutTweenType,this.actionEnabled=t.actionEnabled,this.additive=t.additive,this.displayControl=t.displayControl,this.pauseFadeIn=t.pauseFadeIn,this.resetToPose=t.resetToPose,this.playTimes=t.playTimes,this.layer=t.layer,this.position=t.position,this.duration=t.duration,this.timeScale=t.timeScale,this.fadeInTime=t.fadeInTime,this.fadeOutTime=t.fadeOutTime,this.fadeInTweenType=t.fadeInTweenType,this.weight=t.weight,this.name=t.name,this.animation=t.animation,this.group=t.group,this.boneMask.length=t.boneMask.length;for(var e=0,i=this.boneMask.length;e<i;++e)this.boneMask[e]=t.boneMask[e]},e}(t.BaseObject);t.AnimationConfig=e}(Mt||(Mt={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textures={},e}return Ct(e,t),e.prototype._onClear=function(){for(var t in this.textures)this.textures[t].returnToPool(),delete this.textures[t];this.autoSearch=!1,this.width=0,this.height=0,this.scale=1,this.name="",this.imagePath=""},e.prototype.copyFrom=function(t){for(var e in this.autoSearch=t.autoSearch,this.scale=t.scale,this.width=t.width,this.height=t.height,this.name=t.name,this.imagePath=t.imagePath,this.textures)this.textures[e].returnToPool(),delete this.textures[e];for(var e in t.textures){var i=this.createTexture();i.copyFrom(t.textures[e]),this.textures[e]=i}},e.prototype.addTexture=function(t){t.name in this.textures?console.warn("Same texture: "+t.name):(t.parent=this,this.textures[t.name]=t)},e.prototype.getTexture=function(t){return t in this.textures?this.textures[t]:null},e}(t.BaseObject);t.TextureAtlasData=e;var i=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.region=new t.Rectangle,i.frame=null,i}return Ct(i,e),i.createRectangle=function(){return new t.Rectangle},i.prototype._onClear=function(){this.rotated=!1,this.name="",this.region.clear(),this.parent=null,this.frame=null},i.prototype.copyFrom=function(t){this.rotated=t.rotated,this.name=t.name,this.region.copyFrom(t.region),this.parent=t.parent,null===this.frame&&null!==t.frame?this.frame=i.createRectangle():null!==this.frame&&null===t.frame&&(this.frame=null),null!==this.frame&&null!==t.frame&&this.frame.copyFrom(t.frame)},i}(t.BaseObject);t.TextureData=i}(Mt||(Mt={})),function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._bones=[],t._slots=[],t._constraints=[],t._actions=[],t._animation=null,t._proxy=null,t._replaceTextureAtlasData=null,t._clock=null,t}return Ct(i,e),i.toString=function(){return"[class dragonBones.Armature]"},i._onSortSlots=function(t,e){return 1e3*t._zIndex+t._zOrder>1e3*e._zIndex+e._zOrder?1:-1},i.prototype._onClear=function(){null!==this._clock&&this._clock.remove(this);for(var t=0,e=this._bones;t<e.length;t++)e[t].returnToPool();for(var i=0,r=this._slots;i<r.length;i++)r[i].returnToPool();for(var n=0,a=this._constraints;n<a.length;n++)a[n].returnToPool();for(var s=0,o=this._actions;s<o.length;s++)o[s].returnToPool();null!==this._animation&&this._animation.returnToPool(),null!==this._proxy&&this._proxy.dbClear(),null!==this._replaceTextureAtlasData&&this._replaceTextureAtlasData.returnToPool(),this.inheritAnimation=!0,this.userData=null,this._lockUpdate=!1,this._slotsDirty=!0,this._zOrderDirty=!1,this._zIndexDirty=!1,this._alphaDirty=!0,this._flipX=!1,this._flipY=!1,this._cacheFrameIndex=-1,this._alpha=1,this._globalAlpha=1,this._bones.length=0,this._slots.length=0,this._constraints.length=0,this._actions.length=0,this._armatureData=null,this._animation=null,this._proxy=null,this._display=null,this._replaceTextureAtlasData=null,this._replacedTexture=null,this._dragonBones=null,this._clock=null,this._parent=null},i.prototype._sortZOrder=function(t,e){var i=this._armatureData.sortedSlots,r=null===t;if(this._zOrderDirty||!r){for(var n=0,a=i.length;n<a;++n){var s=r?n:t[e+n];if(!(s<0||s>=a)){var o=i[s],h=this.getSlot(o.name);null!==h&&h._setZOrder(n)}}this._slotsDirty=!0,this._zOrderDirty=!r}},i.prototype._addBone=function(t){this._bones.indexOf(t)<0&&this._bones.push(t)},i.prototype._addSlot=function(t){this._slots.indexOf(t)<0&&this._slots.push(t)},i.prototype._addConstraint=function(t){this._constraints.indexOf(t)<0&&this._constraints.push(t)},i.prototype._bufferAction=function(t,e){this._actions.indexOf(t)<0&&(e?this._actions.push(t):this._actions.unshift(t))},i.prototype.dispose=function(){null!==this._armatureData&&(this._lockUpdate=!0,this._dragonBones.bufferObject(this))},i.prototype.init=function(e,i,r,n){null===this._armatureData&&(this._armatureData=e,this._animation=t.BaseObject.borrowObject(t.Animation),this._proxy=i,this._display=r,this._dragonBones=n,this._proxy.dbInit(this),this._animation.init(this),this._animation.animations=this._armatureData.animations)},i.prototype.advanceTime=function(t){if(!this._lockUpdate)if(this._lockUpdate=!0,null!==this._armatureData)if(null!==this._armatureData.parent){var e=this._cacheFrameIndex;if(this._animation.advanceTime(t),this._slotsDirty||this._zIndexDirty){if(this._slots.sort(i._onSortSlots),this._zIndexDirty)for(var r=0,n=this._slots.length;r<n;++r)this._slots[r]._setZOrder(r);this._slotsDirty=!1,this._zIndexDirty=!1}if(this._alphaDirty){this._alphaDirty=!1,this._globalAlpha=this._alpha*(null!==this._parent?this._parent._globalAlpha:1);for(var a=0,s=this._bones;a<s.length;a++)s[a]._updateAlpha();for(var o=0,h=this._slots;o<h.length;o++)(_=h[o])._updateAlpha()}if(this._cacheFrameIndex<0||this._cacheFrameIndex!==e){for(r=0,n=0,r=0,n=this._bones.length;r<n;++r)this._bones[r].update(this._cacheFrameIndex);for(r=0,n=this._slots.length;r<n;++r)this._slots[r].update(this._cacheFrameIndex)}if(this._actions.length>0){for(var l=0,u=this._actions;l<u.length;l++){var c=u[l],f=c.actionData;if(null!==f&&0===f.type)if(null!==c.slot)null!==(m=c.slot.childArmature)&&m.animation.fadeIn(f.name);else if(null!==c.bone)for(var p=0,d=this.getSlots();p<d.length;p++){var _,m;(_=d[p]).parent===c.bone&&null!==(m=_.childArmature)&&m.animation.fadeIn(f.name)}else this._animation.fadeIn(f.name);c.returnToPool()}this._actions.length=0}this._lockUpdate=!1,this._proxy.dbUpdate()}else console.warn("The armature data has been disposed.\nPlease make sure dispose armature before call factory.clear().");else console.warn("The armature has been disposed.")},i.prototype.invalidUpdate=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=!1),null!==t&&t.length>0){if(null!==(s=this.getBone(t))&&(s.invalidUpdate(),e))for(var i=0,r=this._slots;i<r.length;i++)(l=r[i]).parent===s&&l.invalidUpdate()}else{for(var n=0,a=this._bones;n<a.length;n++){var s;(s=a[n]).invalidUpdate()}if(e)for(var o=0,h=this._slots;o<h.length;o++){var l;(l=h[o]).invalidUpdate()}}},i.prototype.containsPoint=function(t,e){for(var i=0,r=this._slots;i<r.length;i++){var n=r[i];if(n.containsPoint(t,e))return n}return null},i.prototype.intersectsSegment=function(t,e,i,r,n,a,s){void 0===n&&(n=null),void 0===a&&(a=null),void 0===s&&(s=null);for(var o=t===i,h=0,l=0,u=0,c=0,f=0,p=0,d=0,_=0,m=null,y=null,g=0,v=this._slots;g<v.length;g++){var b=v[g];if(b.intersectsSegment(t,e,i,r,n,a,s)>0){if(null===n&&null===a){m=b;break}var T;null!==n&&((T=o?n.y-e:n.x-t)<0&&(T=-T),(null===m||T<h)&&(h=T,u=n.x,c=n.y,m=b,s&&(d=s.x))),null!==a&&((T=a.x-t)<0&&(T=-T),(null===y||T>l)&&(l=T,f=a.x,p=a.y,y=b,null!==s&&(_=s.y)))}}return null!==m&&null!==n&&(n.x=u,n.y=c,null!==s&&(s.x=d)),null!==y&&null!==a&&(a.x=f,a.y=p,null!==s&&(s.y=_)),m},i.prototype.getBone=function(t){for(var e=0,i=this._bones;e<i.length;e++){var r=i[e];if(r.name===t)return r}return null},i.prototype.getBoneByDisplay=function(t){var e=this.getSlotByDisplay(t);return null!==e?e.parent:null},i.prototype.getSlot=function(t){for(var e=0,i=this._slots;e<i.length;e++){var r=i[e];if(r.name===t)return r}return null},i.prototype.getSlotByDisplay=function(t){if(null!==t)for(var e=0,i=this._slots;e<i.length;e++){var r=i[e];if(r.display===t)return r}return null},i.prototype.getBones=function(){return this._bones},i.prototype.getSlots=function(){return this._slots},Object.defineProperty(i.prototype,"flipX",{get:function(){return this._flipX},set:function(t){this._flipX!==t&&(this._flipX=t,this.invalidUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"flipY",{get:function(){return this._flipY},set:function(t){this._flipY!==t&&(this._flipY=t,this.invalidUpdate())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cacheFrameRate",{get:function(){return this._armatureData.cacheFrameRate},set:function(t){if(this._armatureData.cacheFrameRate!==t){this._armatureData.cacheFrames(t);for(var e=0,i=this._slots;e<i.length;e++){var r=i[e].childArmature;null!==r&&(r.cacheFrameRate=t)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._armatureData.name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"armatureData",{get:function(){return this._armatureData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"proxy",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"eventDispatcher",{get:function(){return this._proxy},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"display",{get:function(){return this._display},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"replacedTexture",{get:function(){return this._replacedTexture},set:function(t){if(this._replacedTexture!==t){null!==this._replaceTextureAtlasData&&(this._replaceTextureAtlasData.returnToPool(),this._replaceTextureAtlasData=null),this._replacedTexture=t;for(var e=0,i=this._slots;e<i.length;e++){var r=i[e];r.invalidUpdate(),r.update(-1)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"clock",{get:function(){return this._clock},set:function(t){if(this._clock!==t){null!==this._clock&&this._clock.remove(this),this._clock=t,this._clock&&this._clock.add(this);for(var e=0,i=this._slots;e<i.length;e++){var r=i[e].childArmature;null!==r&&(r.clock=this._clock)}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),i.prototype.getDisplay=function(){return this._display},i}(t.BaseObject);t.Armature=e}(Mt||(Mt={})),function(t){var e=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.globalTransformMatrix=new t.Matrix,i.global=new t.Transform,i.offset=new t.Transform,i}return Ct(i,e),i.prototype._onClear=function(){this.globalTransformMatrix.identity(),this.global.identity(),this.offset.identity(),this.origin=null,this.userData=null,this._globalDirty=!1,this._alpha=1,this._globalAlpha=1,this._armature=null},i.prototype.updateGlobalTransform=function(){this._globalDirty&&(this._globalDirty=!1,this.global.fromMatrix(this.globalTransformMatrix))},Object.defineProperty(i.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),i._helpMatrix=new t.Matrix,i._helpTransform=new t.Transform,i._helpPoint=new t.Point,i}(t.BaseObject);t.TransformObject=e}(Mt||(Mt={})),function(t){var e=function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.animationPose=new t.Transform,i}return Ct(i,e),i.toString=function(){return"[class dragonBones.Bone]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.offsetMode=1,this.animationPose.identity(),this._transformDirty=!1,this._childrenTransformDirty=!1,this._localDirty=!0,this._hasConstraint=!1,this._visible=!0,this._cachedFrameIndex=-1,this._boneData=null,this._parent=null,this._cachedFrameIndices=null},i.prototype._updateGlobalTransformMatrix=function(e){var i=this._boneData,r=this.global,n=this.globalTransformMatrix,a=this.origin,s=this.offset,o=this.animationPose,h=this._parent,l=this._armature.flipX,u=this._armature.flipY===t.DragonBones.yDown,c=null!==h,f=0;if(1===this.offsetMode?null!==a?(r.x=a.x+s.x+o.x,r.scaleX=a.scaleX*s.scaleX*o.scaleX,r.scaleY=a.scaleY*s.scaleY*o.scaleY,t.DragonBones.yDown?(r.y=a.y+s.y+o.y,r.skew=a.skew+s.skew+o.skew,r.rotation=a.rotation+s.rotation+o.rotation):(r.y=a.y-s.y+o.y,r.skew=a.skew-s.skew+o.skew,r.rotation=a.rotation-s.rotation+o.rotation)):(r.copyFrom(s),t.DragonBones.yDown||(r.y=-r.y,r.skew=-r.skew,r.rotation=-r.rotation),r.add(o)):0===this.offsetMode?null!==a?r.copyFrom(a).add(o):r.copyFrom(o):(c=!1,r.copyFrom(s),t.DragonBones.yDown||(r.y=-r.y,r.skew=-r.skew,r.rotation=-r.rotation)),c){var p=1===h._boneData.type,d=p?h._bone:null,_=p?h._getGlobalTransformMatrix(r.x,r.y):h.globalTransformMatrix;if(!i.inheritScale||p&&null===d){if(i.inheritTranslation){var m=r.x,y=r.y;r.x=_.a*m+_.c*y+_.tx,r.y=_.b*m+_.d*y+_.ty}else l&&(r.x=-r.x),u&&(r.y=-r.y);i.inheritRotation?(h.updateGlobalTransform(),f=h.global.scaleX<0?r.rotation+h.global.rotation+Math.PI:r.rotation+h.global.rotation,_.a*_.d-_.b*_.c<0&&(f-=2*r.rotation,(l!==u||i.inheritReflection)&&(r.skew+=Math.PI),t.DragonBones.yDown||(r.skew=-r.skew)),r.rotation=f):(l||u)&&(l&&u?f=r.rotation+Math.PI:(f=l?Math.PI-r.rotation:-r.rotation,r.skew+=Math.PI),r.rotation=f),r.toMatrix(n)}else p?(i.inheritRotation&&(r.rotation+=h.global.rotation),d.updateGlobalTransform(),r.scaleX*=d.global.scaleX,r.scaleY*=d.global.scaleY,_.transformPoint(r.x,r.y,r),r.toMatrix(n),i.inheritTranslation?(r.x=n.tx,r.y=n.ty):(n.tx=r.x,n.ty=r.y)):(i.inheritRotation||(h.updateGlobalTransform(),f=l&&u?r.rotation-(h.global.rotation+Math.PI):l?r.rotation+h.global.rotation+Math.PI:u?r.rotation+h.global.rotation:r.rotation-h.global.rotation,r.rotation=f),r.toMatrix(n),n.concat(_),i.inheritTranslation?(r.x=n.tx,r.y=n.ty):(n.tx=r.x,n.ty=r.y),e?r.fromMatrix(n):this._globalDirty=!0)}else(l||u)&&(l&&(r.x=-r.x),u&&(r.y=-r.y),l&&u?f=r.rotation+Math.PI:(f=l?Math.PI-r.rotation:-r.rotation,r.skew+=Math.PI),r.rotation=f),r.toMatrix(n)},i.prototype._updateAlpha=function(){null!==this._parent?this._globalAlpha=this._alpha*this._parent._globalAlpha:this._globalAlpha=this._alpha*this._armature._globalAlpha},i.prototype.init=function(t,e){null===this._boneData&&(this._boneData=t,this._armature=e,this._alpha=this._boneData.alpha,null!==this._boneData.parent&&(this._parent=this._armature.getBone(this._boneData.parent.name)),this._armature._addBone(this),this.origin=this._boneData.transform)},i.prototype.update=function(t){if(t>=0&&null!==this._cachedFrameIndices){var e=this._cachedFrameIndices[t];if(e>=0&&this._cachedFrameIndex===e)this._transformDirty=!1;else if(e>=0)this._transformDirty=!0,this._cachedFrameIndex=e;else{if(this._hasConstraint)for(var i=0,r=this._armature._constraints;i<r.length;i++)(s=r[i])._root===this&&s.update();this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var n=0,a=this._armature._constraints;n<a.length;n++){var s;(s=a[n])._root===this&&s.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty)if(this._transformDirty=!1,this._childrenTransformDirty=!0,this._cachedFrameIndex<0){var o=t>=0;this._localDirty&&this._updateGlobalTransformMatrix(o),o&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},i.prototype.updateByConstraint=function(){this._localDirty&&(this._localDirty=!1,(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&this._updateGlobalTransformMatrix(!0),this._transformDirty=!0)},i.prototype.invalidUpdate=function(){this._transformDirty=!0},i.prototype.contains=function(t){if(t===this)return!1;for(var e=t;e!==this&&null!==e;)e=e.parent;return e===this},Object.defineProperty(i.prototype,"boneData",{get:function(){return this._boneData},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"visible",{get:function(){return this._visible},set:function(t){if(this._visible!==t){this._visible=t;for(var e=0,i=this._armature.getSlots();e<i.length;e++){var r=i[e];r.parent===this&&r._updateVisible()}}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._boneData.name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),i}(t.TransformObject);t.Bone=e}(Mt||(Mt={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._vertices=[],e._deformVertices=[],e._hullCache=[],e._matrixCahce=[],e}return Ct(e,t),e.toString=function(){return"[class dragonBones.Surface]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._dX=0,this._dY=0,this._k=0,this._kX=0,this._kY=0,this._vertices.length=0,this._deformVertices.length=0,this._matrixCahce.length=0,this._hullCache.length=0,this._bone=null},e.prototype._getAffineTransform=function(t,e,i,r,n,a,s,o,h,l,u,c,f){var p=s-n,d=o-a,_=h-n,m=l-a;u.rotation=Math.atan2(d,p),u.skew=Math.atan2(m,_)-.5*Math.PI-u.rotation,f&&(u.rotation+=Math.PI),u.scaleX=Math.sqrt(p*p+d*d)/i,u.scaleY=Math.sqrt(_*_+m*m)/r,u.toMatrix(c),u.x=c.tx=n-(c.a*t+c.c*e),u.y=c.ty=a-(c.b*t+c.d*e)},e.prototype._updateVertices=function(){var t=this._armature.armatureData.parent,e=this._boneData.geometry,i=t.intArray,r=t.floatArray,n=i[e.offset+0],a=i[e.offset+2],s=this._vertices,o=this._deformVertices;if(null!==this._parent)if(1===this._parent._boneData.type)for(var h=0,l=n;h<l;++h){var u=r[a+(d=2*h)]+o[d],c=r[a+d+1]+o[d+1],f=this._parent._getGlobalTransformMatrix(u,c);s[d]=f.a*u+f.c*c+f.tx,s[d+1]=f.b*u+f.d*c+f.ty}else{var p=this._parent.globalTransformMatrix;for(h=0,l=n;h<l;++h)u=r[a+(d=2*h)]+o[d],c=r[a+d+1]+o[d+1],s[d]=p.a*u+p.c*c+p.tx,s[d+1]=p.b*u+p.d*c+p.ty}else for(h=0,l=n;h<l;++h){var d;s[d=2*h]=r[a+d]+o[d],s[d+1]=r[a+d+1]+o[d+1]}},e.prototype._updateGlobalTransformMatrix=function(t){var e=2*this._boneData.segmentX,i=this._vertices.length-2,r=this._vertices[0],n=this._vertices[1],a=this._vertices[e],s=this._vertices[e+1],o=this._vertices[i],h=this._vertices[i+1],l=this._vertices[i-e],u=this._vertices[i-e+1],c=r+.5*(o-r),f=n+.5*(h-n),p=c+.5*(a+.5*(l-a)-c),d=f+.5*(s+.5*(u-s)-f),_=a+.5*(o-a),m=s+.5*(h-s),y=l+.5*(o-l),g=u+.5*(h-u);this._getAffineTransform(0,0,200,200,p,d,_,m,y,g,this.global,this.globalTransformMatrix,!1),this._globalDirty=!1},e.prototype._getGlobalTransformMatrix=function(t,i){var r=200,n=1e3;if(t<-n||n<t||i<-n||n<i)return this.globalTransformMatrix;var a=!1,s=this._boneData,o=s.segmentX,h=s.segmentY,l=2*s.segmentX,u=this._dX,c=this._dY,f=Math.floor((t+r)/u),p=Math.floor((i+r)/c),d=0,_=f*u-r,m=p*c-r,y=this._matrixCahce,g=e._helpMatrix;if(t<-r){if(i<-r||i>=r)return this.globalTransformMatrix;if(y[d=7*(2*(o*h+o+h+h+p)+((a=i>this._kX*(t+r)+m)?1:0))]>0)g.copyFromArray(y,d+1);else{var v=p*(l+2),b=this._hullCache[4],T=this._hullCache[5],x=this._hullCache[2]-(h-p)*b,P=this._hullCache[3]-(h-p)*T,E=this._vertices;a?this._getAffineTransform(-r,m+c,800,c,E[v+l+2],E[v+l+3],x+b,P+T,E[v],E[v+1],e._helpTransform,g,!0):this._getAffineTransform(-n,m,800,c,x,P,E[v],E[v+1],x+b,P+T,e._helpTransform,g,!1),y[d]=1,y[d+1]=g.a,y[d+2]=g.b,y[d+3]=g.c,y[d+4]=g.d,y[d+5]=g.tx,y[d+6]=g.ty}}else if(t>=r){if(i<-r||i>=r)return this.globalTransformMatrix;y[d=7*(2*(o*h+o+p)+((a=i>this._kX*(t-n)+m)?1:0))]>0?g.copyFromArray(y,d+1):(v=(p+1)*(l+2)-2,b=this._hullCache[4],T=this._hullCache[5],x=this._hullCache[0]+p*b,P=this._hullCache[1]+p*T,E=this._vertices,a?this._getAffineTransform(n,m+c,800,c,x+b,P+T,E[v+l+2],E[v+l+3],x,P,e._helpTransform,g,!0):this._getAffineTransform(r,m,800,c,E[v],E[v+1],x,P,E[v+l+2],E[v+l+3],e._helpTransform,g,!1),y[d]=1,y[d+1]=g.a,y[d+2]=g.b,y[d+3]=g.c,y[d+4]=g.d,y[d+5]=g.tx,y[d+6]=g.ty)}else if(i<-r){if(t<-r||t>=r)return this.globalTransformMatrix;y[d=7*(2*(o*h+f)+((a=i>this._kY*(t-_-u)-n)?1:0))]>0?g.copyFromArray(y,d+1):(v=2*f,b=this._hullCache[10],T=this._hullCache[11],x=this._hullCache[8]+f*b,P=this._hullCache[9]+f*T,E=this._vertices,a?this._getAffineTransform(_+u,-r,u,800,E[v+2],E[v+3],E[v],E[v+1],x+b,P+T,e._helpTransform,g,!0):this._getAffineTransform(_,-n,u,800,x,P,x+b,P+T,E[v],E[v+1],e._helpTransform,g,!1),y[d]=1,y[d+1]=g.a,y[d+2]=g.b,y[d+3]=g.c,y[d+4]=g.d,y[d+5]=g.tx,y[d+6]=g.ty)}else if(i>=r){if(t<-r||t>=r)return this.globalTransformMatrix;y[d=7*(2*(o*h+o+h+f)+((a=i>this._kY*(t-_-u)+r)?1:0))]>0?g.copyFromArray(y,d+1):(v=h*(l+2)+2*f,b=this._hullCache[10],T=this._hullCache[11],x=this._hullCache[6]-(o-f)*b,P=this._hullCache[7]-(o-f)*T,E=this._vertices,a?this._getAffineTransform(_+u,n,u,800,x+b,P+T,x,P,E[v+2],E[v+3],e._helpTransform,g,!0):this._getAffineTransform(_,r,u,800,E[v],E[v+1],E[v+2],E[v+3],x,P,e._helpTransform,g,!1),y[d]=1,y[d+1]=g.a,y[d+2]=g.b,y[d+3]=g.c,y[d+4]=g.d,y[d+5]=g.tx,y[d+6]=g.ty)}else y[d=7*(2*(o*p+f)+((a=i>this._k*(t-_-u)+m)?1:0))]>0?g.copyFromArray(y,d+1):(v=2*f+p*(l+2),E=this._vertices,a?this._getAffineTransform(_+u,m+c,u,c,E[v+l+4],E[v+l+5],E[v+l+2],E[v+l+3],E[v+2],E[v+3],e._helpTransform,g,!0):this._getAffineTransform(_,m,u,c,E[v],E[v+1],E[v+2],E[v+3],E[v+l+2],E[v+l+3],e._helpTransform,g,!1),y[d]=1,y[d+1]=g.a,y[d+2]=g.b,y[d+3]=g.c,y[d+4]=g.d,y[d+5]=g.tx,y[d+6]=g.ty);return g},e.prototype.init=function(e,i){if(null===this._boneData){t.prototype.init.call(this,e,i);var r=e.segmentX,n=e.segmentY,a=this._armature.armatureData.parent.intArray[e.geometry.offset+0];this._dX=400/r,this._dY=400/n,this._k=-this._dY/this._dX,this._kX=-this._dY/800,this._kY=-800/this._dX,this._vertices.length=2*a,this._deformVertices.length=2*a,this._matrixCahce.length=2*(r*n+2*r+2*n)*7,this._hullCache.length=10;for(var s=0;s<2*a;++s)this._deformVertices[s]=0;null!==this._parent&&(0===this._parent.boneData.type?this._bone=this._parent:this._bone=this._parent._bone)}},e.prototype.update=function(t){if(t>=0&&null!==this._cachedFrameIndices){var i=this._cachedFrameIndices[t];if(i>=0&&this._cachedFrameIndex===i)this._transformDirty=!1;else if(i>=0)this._transformDirty=!0,this._cachedFrameIndex=i;else{if(this._hasConstraint)for(var r=0,n=this._armature._constraints;r<n.length;r++)(o=n[r])._root===this&&o.update();this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}}else{if(this._hasConstraint)for(var a=0,s=this._armature._constraints;a<s.length;a++){var o;(o=s[a])._root===this&&o.update()}(this._transformDirty||null!==this._parent&&this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1)}if(this._transformDirty){this._transformDirty=!1,this._childrenTransformDirty=!0;for(var h=0,l=this._matrixCahce.length;h<l;h+=7)this._matrixCahce[h]=-1;if(this._updateVertices(),this._cachedFrameIndex<0){var u=t>=0;this._localDirty&&this._updateGlobalTransformMatrix(u),u&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);var c=2*this.global.x,f=2*this.global.y,p=e._helpPoint;this.globalTransformMatrix.transformPoint(1e3,-200,p),this._hullCache[0]=p.x,this._hullCache[1]=p.y,this._hullCache[2]=c-p.x,this._hullCache[3]=f-p.y,this.globalTransformMatrix.transformPoint(0,this._dY,p,!0),this._hullCache[4]=p.x,this._hullCache[5]=p.y,this.globalTransformMatrix.transformPoint(200,1e3,p),this._hullCache[6]=p.x,this._hullCache[7]=p.y,this._hullCache[8]=c-p.x,this._hullCache[9]=f-p.y,this.globalTransformMatrix.transformPoint(this._dX,0,p,!0),this._hullCache[10]=p.x,this._hullCache[11]=p.y}else this._childrenTransformDirty&&(this._childrenTransformDirty=!1);this._localDirty=!0},e}(t.Bone);t.Surface=e}(Mt||(Mt={})),function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.deformVertices=[],e}return Ct(e,t),e.toString=function(){return"[class dragonBones.DisplayFrame]"},e.prototype._onClear=function(){this.rawDisplayData=null,this.displayData=null,this.textureData=null,this.display=null,this.deformVertices.length=0},e.prototype.updateDeformVertices=function(){if(null!==this.rawDisplayData&&0===this.deformVertices.length){var t;if(2===this.rawDisplayData.type)t=this.rawDisplayData.geometry;else{if(4!==this.rawDisplayData.type)return;t=this.rawDisplayData.geometry}var e;e=null!==t.weight?2*t.weight.count:2*t.data.intArray[t.offset+0],this.deformVertices.length=e;for(var i=0,r=this.deformVertices.length;i<r;++i)this.deformVertices[i]=0}},e.prototype.getGeometryData=function(){if(null!==this.displayData){if(2===this.displayData.type)return this.displayData.geometry;if(4===this.displayData.type)return this.displayData.geometry}if(null!==this.rawDisplayData){if(2===this.rawDisplayData.type)return this.rawDisplayData.geometry;if(4===this.rawDisplayData.type)return this.rawDisplayData.geometry}return null},e.prototype.getBoundingBox=function(){return null!==this.displayData&&3===this.displayData.type?this.displayData.boundingBox:null!==this.rawDisplayData&&3===this.rawDisplayData.type?this.rawDisplayData.boundingBox:null},e.prototype.getTextureData=function(){if(null!==this.displayData){if(0===this.displayData.type)return this.displayData.texture;if(2===this.displayData.type)return this.displayData.texture}if(null!==this.textureData)return this.textureData;if(null!==this.rawDisplayData){if(0===this.rawDisplayData.type)return this.rawDisplayData.texture;if(2===this.rawDisplayData.type)return this.rawDisplayData.texture}return null},e}(t.BaseObject);t.DisplayFrame=e;var i=function(i){function r(){var e=null!==i&&i.apply(this,arguments)||this;return e._localMatrix=new t.Matrix,e._colorTransform=new t.ColorTransform,e._displayFrames=[],e._geometryBones=[],e._rawDisplay=null,e._meshDisplay=null,e._display=null,e}return Ct(r,i),r.prototype._onClear=function(){i.prototype._onClear.call(this);for(var e=[],r=0,n=this._displayFrames;r<n.length;r++){var a=n[r],s=a.display;s!==this._rawDisplay&&s!==this._meshDisplay&&e.indexOf(s)<0&&e.push(s),a.returnToPool()}for(var o=0,h=e;o<h.length;o++){var l=h[o];l instanceof t.Armature?l.dispose():this._disposeDisplay(l,!0)}null!==this._meshDisplay&&this._meshDisplay!==this._rawDisplay&&this._disposeDisplay(this._meshDisplay,!1),null!==this._rawDisplay&&this._disposeDisplay(this._rawDisplay,!1),this.displayController=null,this._displayDataDirty=!1,this._displayDirty=!1,this._geometryDirty=!1,this._textureDirty=!1,this._visibleDirty=!1,this._blendModeDirty=!1,this._zOrderDirty=!1,this._colorDirty=!1,this._verticesDirty=!1,this._transformDirty=!1,this._visible=!0,this._blendMode=0,this._displayIndex=-1,this._animationDisplayIndex=-1,this._zOrder=0,this._zIndex=0,this._cachedFrameIndex=-1,this._pivotX=0,this._pivotY=0,this._localMatrix.identity(),this._colorTransform.identity(),this._displayFrames.length=0,this._geometryBones.length=0,this._slotData=null,this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._rawDisplay=null,this._meshDisplay=null,this._display=null,this._childArmature=null,this._parent=null,this._cachedFrameIndices=null},r.prototype._hasDisplay=function(t){for(var e=0,i=this._displayFrames;e<i.length;e++)if(i[e].display===t)return!0;return!1},r.prototype._isBonesUpdate=function(){for(var t=0,e=this._geometryBones;t<e.length;t++){var i=e[t];if(null!==i&&i._childrenTransformDirty)return!0}return!1},r.prototype._updateAlpha=function(){var t=this._alpha*this._parent._globalAlpha;this._globalAlpha!==t&&(this._globalAlpha=t,this._colorDirty=!0)},r.prototype._updateDisplayData=function(){var e=this._displayFrame,i=this._geometryData,n=this._textureData,a=null,s=null;if(this._displayFrame=null,this._geometryData=null,this._boundingBoxData=null,this._textureData=null,this._displayIndex>=0&&this._displayIndex<this._displayFrames.length&&(this._displayFrame=this._displayFrames[this._displayIndex],a=this._displayFrame.rawDisplayData,s=this._displayFrame.displayData,this._geometryData=this._displayFrame.getGeometryData(),this._boundingBoxData=this._displayFrame.getBoundingBox(),this._textureData=this._displayFrame.getTextureData()),this._displayFrame!==e||this._geometryData!==i||this._textureData!==n){if(null===this._geometryData&&null!==this._textureData){var o=null!==s&&0===s.type?s:a,h=this._textureData.parent.scale*this._armature._armatureData.scale,l=this._textureData.frame;this._pivotX=o.pivot.x,this._pivotY=o.pivot.y;var u=null!==l?l:this._textureData.region,c=u.width,f=u.height;this._textureData.rotated&&null===l&&(c=u.height,f=u.width),this._pivotX*=c*h,this._pivotY*=f*h,null!==l&&(this._pivotX+=l.x*h,this._pivotY+=l.y*h),null!==a&&o!==a&&(a.transform.toMatrix(r._helpMatrix),r._helpMatrix.invert(),r._helpMatrix.transformPoint(0,0,r._helpPoint),this._pivotX-=r._helpPoint.x,this._pivotY-=r._helpPoint.y,o.transform.toMatrix(r._helpMatrix),r._helpMatrix.invert(),r._helpMatrix.transformPoint(0,0,r._helpPoint),this._pivotX+=r._helpPoint.x,this._pivotY+=r._helpPoint.y),t.DragonBones.yDown||(this._pivotY=(this._textureData.rotated?this._textureData.region.width:this._textureData.region.height)*h-this._pivotY)}else this._pivotX=0,this._pivotY=0;if(this.origin=null!==a?a.transform:null!==s?s.transform:null,null!==this.origin?this.global.copyFrom(this.origin).add(this.offset).toMatrix(this._localMatrix):this.global.copyFrom(this.offset).toMatrix(this._localMatrix),this._geometryData!==i)if(this._geometryDirty=!0,this._verticesDirty=!0,null!==this._geometryData){if(this._geometryBones.length=0,null!==this._geometryData.weight)for(var p=0,d=this._geometryData.weight.bones.length;p<d;++p){var _=this._armature.getBone(this._geometryData.weight.bones[p].name);this._geometryBones.push(_)}}else this._geometryBones.length=0,this._geometryData=null;this._textureDirty=this._textureData!==n,this._transformDirty=!0}},r.prototype._updateDisplay=function(){var e=null!==this._display?this._display:this._rawDisplay,i=this._childArmature;if(null!==this._displayFrame?(this._display=this._displayFrame.display,null!==this._display&&this._display instanceof t.Armature?(this._childArmature=this._display,this._display=this._childArmature.display):this._childArmature=null):(this._display=null,this._childArmature=null),(null!==this._display?this._display:this._rawDisplay)!==e&&(this._textureDirty=!0,this._visibleDirty=!0,this._blendModeDirty=!0,this._colorDirty=!0,this._transformDirty=!0,this._onUpdateDisplay(),this._replaceDisplay(e)),this._childArmature!==i&&(null!==i&&(i._parent=null,i.clock=null,i.inheritAnimation&&i.animation.reset()),null!==this._childArmature&&(this._childArmature._parent=this,this._childArmature.clock=this._armature.clock,this._childArmature.inheritAnimation))){if(0===this._childArmature.cacheFrameRate){var r=this._armature.cacheFrameRate;0!==r&&(this._childArmature.cacheFrameRate=r)}if(null!==this._displayFrame){var n=null,a=null!==this._displayFrame.displayData?this._displayFrame.displayData:this._displayFrame.rawDisplayData;if(null!==a&&1===a.type&&(n=a.actions),null!==n&&n.length>0)for(var s=0,o=n;s<o.length;s++){var h=o[s],l=t.BaseObject.borrowObject(t.EventObject);t.EventObject.actionDataToInstance(h,l,this._armature),l.slot=this,this._armature._bufferAction(l,!1)}else this._childArmature.animation.play()}}},r.prototype._updateGlobalTransformMatrix=function(t){var e=0===this._parent._boneData.type?this._parent.globalTransformMatrix:this._parent._getGlobalTransformMatrix(this.global.x,this.global.y);this.globalTransformMatrix.copyFrom(this._localMatrix),this.globalTransformMatrix.concat(e),t?this.global.fromMatrix(this.globalTransformMatrix):this._globalDirty=!0},r.prototype._setDisplayIndex=function(t,e){if(void 0===e&&(e=!1),e){if(this._animationDisplayIndex===t)return;this._animationDisplayIndex=t}this._displayIndex!==t&&(this._displayIndex=t<this._displayFrames.length?t:this._displayFrames.length-1,this._displayDataDirty=!0,this._displayDirty=this._displayIndex<0||this._display!==this._displayFrames[this._displayIndex].display)},r.prototype._setZOrder=function(t){return this._zOrder,this._zOrder=t,this._zOrderDirty=!0,this._zOrderDirty},r.prototype._setColor=function(t){return this._colorTransform.copyFrom(t),this._colorDirty=!0},r.prototype.init=function(t,e,i,r){if(null===this._slotData){this._slotData=t,this._colorDirty=!0,this._blendModeDirty=!0,this._blendMode=this._slotData.blendMode,this._zOrder=this._slotData.zOrder,this._zIndex=this._slotData.zIndex,this._alpha=this._slotData.alpha,this._colorTransform.copyFrom(this._slotData.color),this._rawDisplay=i,this._meshDisplay=r,this._armature=e;var n=this._armature.getBone(this._slotData.parent.name);null!==n&&(this._parent=n),this._armature._addSlot(this),this._initDisplay(this._rawDisplay,!1),this._rawDisplay!==this._meshDisplay&&this._initDisplay(this._meshDisplay,!1),this._onUpdateDisplay(),this._addDisplay()}},r.prototype.update=function(t){if(this._displayDataDirty&&(this._updateDisplayData(),this._displayDataDirty=!1),this._displayDirty&&(this._updateDisplay(),this._displayDirty=!1),(this._geometryDirty||this._textureDirty)&&(null!==this._display&&this._display!==this._rawDisplay&&this._display!==this._meshDisplay||this._updateFrame(),this._geometryDirty=!1,this._textureDirty=!1),null!==this._display){if(this._visibleDirty&&(this._updateVisible(),this._visibleDirty=!1),this._blendModeDirty&&(this._updateBlendMode(),this._blendModeDirty=!1),this._colorDirty&&(this._updateColor(),this._colorDirty=!1),this._zOrderDirty&&(this._updateZOrder(),this._zOrderDirty=!1),null!==this._geometryData&&this._display===this._meshDisplay){var e=null!==this._geometryData.weight,i=0!==this._parent._boneData.type;if((this._verticesDirty||e&&this._isBonesUpdate()||i&&this._parent._childrenTransformDirty)&&(this._verticesDirty=!1,this._updateMesh()),e||i)return}if(t>=0&&null!==this._cachedFrameIndices){var r=this._cachedFrameIndices[t];r>=0&&this._cachedFrameIndex===r?this._transformDirty=!1:r>=0?(this._transformDirty=!0,this._cachedFrameIndex=r):this._transformDirty||this._parent._childrenTransformDirty?(this._transformDirty=!0,this._cachedFrameIndex=-1):this._cachedFrameIndex>=0?(this._transformDirty=!1,this._cachedFrameIndices[t]=this._cachedFrameIndex):(this._transformDirty=!0,this._cachedFrameIndex=-1)}else(this._transformDirty||this._parent._childrenTransformDirty)&&(t=-1,this._transformDirty=!0,this._cachedFrameIndex=-1);if(this._transformDirty){if(this._cachedFrameIndex<0){var n=t>=0;this._updateGlobalTransformMatrix(n),n&&null!==this._cachedFrameIndices&&(this._cachedFrameIndex=this._cachedFrameIndices[t]=this._armature._armatureData.setCacheFrame(this.globalTransformMatrix,this.global))}else this._armature._armatureData.getCacheFrame(this.globalTransformMatrix,this.global,this._cachedFrameIndex);this._updateTransform(),this._transformDirty=!1}}},r.prototype.invalidUpdate=function(){this._displayDataDirty=!0,this._displayDirty=!0,this._transformDirty=!0},r.prototype.updateTransformAndMatrix=function(){this._transformDirty&&(this._updateGlobalTransformMatrix(!1),this._transformDirty=!1)},r.prototype.replaceRawDisplayData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var i=this._displayFrames[e];if(i.rawDisplayData!==t){if(i.deformVertices.length=0,i.rawDisplayData=t,null===i.rawDisplayData){var r=this._armature._armatureData.defaultSkin;if(null!==r){var n=r.getDisplays(this._slotData.name);null!==n&&e<n.length&&(i.rawDisplayData=n[e])}}e===this._displayIndex&&(this._displayDataDirty=!0)}},r.prototype.replaceDisplayData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var i=this._displayFrames[e];i.displayData!==t&&i.rawDisplayData!==t&&(i.displayData=t,e===this._displayIndex&&(this._displayDataDirty=!0))},r.prototype.replaceTextureData=function(t,e){if(void 0===e&&(e=-1),e<0)e=this._displayIndex<0?0:this._displayIndex;else if(e>=this._displayFrames.length)return;var i=this._displayFrames[e];i.textureData!==t&&(i.textureData=t,e===this._displayIndex&&(this._displayDataDirty=!0))},r.prototype.replaceDisplay=function(e,i){if(void 0===i&&(i=-1),i<0)i=this._displayIndex<0?0:this._displayIndex;else if(i>=this._displayFrames.length)return;var r=this._displayFrames[i];if(r.display!==e){var n=r.display;r.display=e,null===n||n===this._rawDisplay||n===this._meshDisplay||this._hasDisplay(n)||n instanceof t.Armature||this._disposeDisplay(n,!0),null===e||e===this._rawDisplay||e===this._meshDisplay||this._hasDisplay(n)||e instanceof t.Armature||this._initDisplay(e,!0),i===this._displayIndex&&(this._displayDirty=!0)}},r.prototype.containsPoint=function(t,e){return null!==this._boundingBoxData&&(this.updateTransformAndMatrix(),r._helpMatrix.copyFrom(this.globalTransformMatrix),r._helpMatrix.invert(),r._helpMatrix.transformPoint(t,e,r._helpPoint),this._boundingBoxData.containsPoint(r._helpPoint.x,r._helpPoint.y))},r.prototype.intersectsSegment=function(t,e,i,n,a,s,o){if(void 0===a&&(a=null),void 0===s&&(s=null),void 0===o&&(o=null),null===this._boundingBoxData)return 0;this.updateTransformAndMatrix(),r._helpMatrix.copyFrom(this.globalTransformMatrix),r._helpMatrix.invert(),r._helpMatrix.transformPoint(t,e,r._helpPoint),t=r._helpPoint.x,e=r._helpPoint.y,r._helpMatrix.transformPoint(i,n,r._helpPoint),i=r._helpPoint.x,n=r._helpPoint.y;var h=this._boundingBoxData.intersectsSegment(t,e,i,n,a,s,o);return h>0&&(1===h||2===h?null!==a?(this.globalTransformMatrix.transformPoint(a.x,a.y,a),null!==s&&(s.x=a.x,s.y=a.y)):null!==s&&this.globalTransformMatrix.transformPoint(s.x,s.y,s):(null!==a&&this.globalTransformMatrix.transformPoint(a.x,a.y,a),null!==s&&this.globalTransformMatrix.transformPoint(s.x,s.y,s)),null!==o&&(this.globalTransformMatrix.transformPoint(Math.cos(o.x),Math.sin(o.x),r._helpPoint,!0),o.x=Math.atan2(r._helpPoint.y,r._helpPoint.x),this.globalTransformMatrix.transformPoint(Math.cos(o.y),Math.sin(o.y),r._helpPoint,!0),o.y=Math.atan2(r._helpPoint.y,r._helpPoint.x))),h},r.prototype.getDisplayFrameAt=function(t){return this._displayFrames[t]},Object.defineProperty(r.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible!==t&&(this._visible=t,this._updateVisible())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"displayFrameCount",{get:function(){return this._displayFrames.length},set:function(i){var r=this._displayFrames.length;if(r<i){this._displayFrames.length=i;for(var n=r;n<i;++n)this._displayFrames[n]=t.BaseObject.borrowObject(e)}else if(r>i){for(n=r-1;n<i;--n)this.replaceDisplay(null,n),this._displayFrames[n].returnToPool();this._displayFrames.length=i}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"displayIndex",{get:function(){return this._displayIndex},set:function(t){this._setDisplayIndex(t),this.update(-1)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._slotData.name},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"displayList",{get:function(){for(var t=new Array,e=0,i=this._displayFrames;e<i.length;e++){var r=i[e];t.push(r.display)}return t},set:function(t){this.displayFrameCount=t.length;for(var e=0,i=0,r=t;i<r.length;i++){var n=r[i];this.replaceDisplay(n,e++)}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"slotData",{get:function(){return this._slotData},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"boundingBoxData",{get:function(){return this._boundingBoxData},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rawDisplay",{get:function(){return this._rawDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"meshDisplay",{get:function(){return this._meshDisplay},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"display",{get:function(){return this._display},set:function(t){this._display!==t&&(0===this._displayFrames.length&&(this.displayFrameCount=1,this._displayIndex=0),this.replaceDisplay(t,this._displayIndex))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"childArmature",{get:function(){return this._childArmature},set:function(t){this._childArmature!==t&&(this.display=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),r.prototype.getDisplay=function(){return this._display},r.prototype.setDisplay=function(t){this.display=t},r}(t.TransformObject);t.Slot=i}(Mt||(Mt={})),function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ct(i,e),i.prototype._onClear=function(){this._armature=null,this._target=null,this._root=null,this._bone=null},Object.defineProperty(i.prototype,"name",{get:function(){return this._constraintData.name},enumerable:!0,configurable:!0}),i._helpMatrix=new t.Matrix,i._helpTransform=new t.Transform,i._helpPoint=new t.Point,i}(t.BaseObject);t.Constraint=e;var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ct(i,e),i.toString=function(){return"[class dragonBones.IKConstraint]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this._scaleEnabled=!1,this._bendPositive=!1,this._weight=1,this._constraintData=null},i.prototype._computeA=function(){var e=this._target.global,i=this._root.global,r=this._root.globalTransformMatrix,n=Math.atan2(e.y-i.y,e.x-i.x);i.scaleX<0&&(n+=Math.PI),i.rotation+=t.Transform.normalizeRadian(n-i.rotation)*this._weight,i.toMatrix(r)},i.prototype._computeB=function(){var e=this._bone._boneData.length,i=this._root,r=this._target.global,n=i.global,a=this._bone.global,s=this._bone.globalTransformMatrix,o=s.a*e,h=s.b*e,l=o*o+h*h,u=Math.sqrt(l),c=a.x-n.x,f=a.y-n.y,p=c*c+f*f,d=Math.sqrt(p),_=a.rotation,m=n.rotation,y=Math.atan2(f,c),g=(c=r.x-n.x)*c+(f=r.y-n.y)*f,v=Math.sqrt(g),b=0;if(u+d<=v||v+u<=d||v+d<=u)b=Math.atan2(r.y-n.y,r.x-n.x),u+d<=v||d<u&&(b+=Math.PI);else{var T=(p-l+g)/(2*g),x=Math.sqrt(p-T*T*g)/v,P=n.x+c*T,E=n.y+f*T,A=-f*x,S=c*x,w=!1,D=i.parent;if(null!==D){var O=D.globalTransformMatrix;w=O.a*O.d-O.b*O.c<0}w!==this._bendPositive?(a.x=P-A,a.y=E-S):(a.x=P+A,a.y=E+S),b=Math.atan2(a.y-n.y,a.x-n.x)}var I=t.Transform.normalizeRadian(b-y);n.rotation=m+I*this._weight,n.toMatrix(i.globalTransformMatrix);var M=y+I*this._weight;a.x=n.x+Math.cos(M)*d,a.y=n.y+Math.sin(M)*d;var C=Math.atan2(r.y-a.y,r.x-a.x);a.scaleX<0&&(C+=Math.PI),a.rotation=n.rotation+_-m+t.Transform.normalizeRadian(C-I-_)*this._weight,a.toMatrix(s)},i.prototype.init=function(t,e){if(null===this._constraintData){this._constraintData=t,this._armature=e,this._target=this._armature.getBone(this._constraintData.target.name),this._root=this._armature.getBone(this._constraintData.root.name),this._bone=null!==this._constraintData.bone?this._armature.getBone(this._constraintData.bone.name):null;var i=this._constraintData;this._scaleEnabled=i.scaleEnabled,this._bendPositive=i.bendPositive,this._weight=i.weight,this._root._hasConstraint=!0}},i.prototype.update=function(){this._root.updateByConstraint(),null!==this._bone?(this._bone.updateByConstraint(),this._computeB()):this._computeA()},i.prototype.invalidUpdate=function(){this._root.invalidUpdate(),null!==this._bone&&this._bone.invalidUpdate()},i}(e);t.IKConstraint=i;var r=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._bones=[],t._spaces=[],t._positions=[],t._curves=[],t._boneLengths=[],t._pathGlobalVertices=[],t._segments=[10],t}return Ct(i,e),i.toString=function(){return"[class dragonBones.PathConstraint]"},i.prototype._onClear=function(){e.prototype._onClear.call(this),this.dirty=!1,this.pathOffset=0,this.position=0,this.spacing=0,this.rotateOffset=0,this.rotateMix=1,this.translateMix=1,this._pathSlot=null,this._bones.length=0,this._spaces.length=0,this._positions.length=0,this._curves.length=0,this._boneLengths.length=0,this._pathGlobalVertices.length=0},i.prototype._updatePathVertices=function(t){var e=this._armature,i=e.armatureData.parent,r=e.armatureData.scale,n=i.intArray,a=i.floatArray,s=t.offset,o=n[s+0],h=n[s+2];this._pathGlobalVertices.length=2*o;var l=t.weight;if(null!==l)for(var u=this._pathSlot._geometryBones,c=l.bones.length,f=l.offset,p=n[f+1],d=f+2+c,_=(E=0,0);E<o;E++){for(var m=0,y=0,g=0,v=n[d++];g<v;g++){var b=u[n[d++]];if(null!==b){b.updateByConstraint(),P=b.globalTransformMatrix;var T=a[p++];S=a[p++]*r,w=a[p++]*r,m+=(P.a*S+P.c*w+P.tx)*T,y+=(P.b*S+P.d*w+P.ty)*T}}this._pathGlobalVertices[_++]=m,this._pathGlobalVertices[_++]=y}else{var x=this._pathSlot.parent;x.updateByConstraint();for(var P=x.globalTransformMatrix,E=0,A=h;E<o;E+=2){var S=a[A++]*r,w=a[A++]*r,D=P.a*S+P.c*w+P.tx,O=P.b*S+P.d*w+P.ty;this._pathGlobalVertices[E]=D,this._pathGlobalVertices[E+1]=O}}},i.prototype._computeVertices=function(t,e,i,r){for(var n=i,a=t;n<e;n+=2)r[n]=this._pathGlobalVertices[a++],r[n+1]=this._pathGlobalVertices[a++]},i.prototype._computeBezierCurve=function(t,e,i,r,n){var a=this._armature.armatureData.parent.intArray[t.geometry.offset+0],s=this._positions,o=this._spaces,h=t.closed,l=Array(),u=2*a,c=u/6,f=-1,p=this.position;s.length=3*e+2;var d=0;if(t.constantSpeed){h?(u+=2,l.length=a,this._computeVertices(2,u-4,0,l),this._computeVertices(0,2,u-4,l),l[u-2]=l[0],l[u-1]=l[1]):(c--,u-=4,l.length=u,this._computeVertices(2,u,0,l));var _=new Array(c);d=0;for(var m,y,g,v,b,T,x,P,E=l[0],A=l[1],S=0,w=0,D=0,O=0,I=0,M=0,C=(Y=0,2);Y<c;Y++,C+=6)S=l[C],w=l[C+1],D=l[C+2],O=l[C+3],b=2*(m=.1875*(E-2*S+D))+(g=.09375*(3*(S-D)-E+(I=l[C+4]))),T=2*(y=.1875*(A-2*w+O))+(v=.09375*(3*(w-O)-A+(M=l[C+5]))),x=.75*(S-E)+m+.16666667*g,P=.75*(w-A)+y+.16666667*v,d+=Math.sqrt(x*x+P*P),x+=b,P+=T,b+=g,T+=v,d+=Math.sqrt(x*x+P*P),x+=b,P+=T,d+=Math.sqrt(x*x+P*P),x+=b+g,P+=T+v,d+=Math.sqrt(x*x+P*P),_[Y]=d,E=I,A=M;if(r&&(p*=d),n)for(Y=0;Y<e;Y++)o[Y]*=d;for(var R=this._segments,F=0,B=(Y=0,G=0,V=0,0);Y<e;Y++,G+=3){var N=p+=o[Y];if(h)(N%=d)<0&&(N+=d),V=0;else{if(N<0)continue;if(N>d)continue}for(;;V++){var L=_[V];if(!(N>L)){0===V?N/=L:N=(N-(j=_[V-1]))/(L-j);break}}if(V!==f){f=V;var k=6*V;for(E=l[k],A=l[k+1],S=l[k+2],w=l[k+3],D=l[k+4],O=l[k+5],b=2*(m=.03*(E-2*S+D))+(g=.006*(3*(S-D)-E+(I=l[k+6]))),T=2*(y=.03*(A-2*w+O))+(v=.006*(3*(w-O)-A+(M=l[k+7]))),x=.3*(S-E)+m+.16666667*g,P=.3*(w-A)+y+.16666667*v,F=Math.sqrt(x*x+P*P),R[0]=F,k=1;k<8;k++)x+=b,P+=T,b+=g,T+=v,F+=Math.sqrt(x*x+P*P),R[k]=F;x+=b,P+=T,F+=Math.sqrt(x*x+P*P),R[8]=F,x+=b+g,P+=T+v,F+=Math.sqrt(x*x+P*P),R[9]=F,B=0}for(N*=F;;B++){var U=R[B];if(!(N>U)){var j;0===B?N/=U:N=B+(N-(j=R[B-1]))/(U-j);break}}this.addCurvePosition(.1*N,E,A,S,w,D,O,I,M,s,G,i)}}else{var X=t.curveLengths;if(d=X[c-=h?1:2],r&&(p*=d),n)for(var Y=0;Y<e;Y++)o[Y]*=d;l.length=8;Y=0;for(var G=0,V=0;Y<e;Y++,G+=3){if(p+=o[Y],h)(p%=d)<0&&(p+=d),V=0;else{if(p<0)continue;if(p>d)continue}for(var H=0;;V++){var z=X[V];if(!(p>z)){if(0===V)H=p/z;else{var W=X[V-1];H=(p-W)/(z-W)}break}}V!==f&&(f=V,h&&V===c?(this._computeVertices(u-4,4,0,l),this._computeVertices(0,4,4,l)):this._computeVertices(6*V+2,8,0,l)),this.addCurvePosition(H,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],s,G,i)}}},i.prototype.addCurvePosition=function(t,e,i,r,n,a,s,o,h,l,u,c){if(0===t)return l[u]=e,l[u+1]=i,void(l[u+2]=0);if(1===t)return l[u]=o,l[u+1]=h,void(l[u+2]=0);var f=1-t,p=f*f,d=t*t,_=p*f,m=p*t*3,y=f*d*3,g=t*d,v=_*e+m*r+y*a+g*o,b=_*i+m*n+y*s+g*h;l[u]=v,l[u+1]=b,l[u+2]=c?Math.atan2(b-(_*i+m*n+y*s),v-(_*e+m*r+y*a)):0},i.prototype.init=function(t,e){this._constraintData=t,this._armature=e;var i=t;this.pathOffset=i.pathDisplayData.geometry.offset,this.position=i.position,this.spacing=i.spacing,this.rotateOffset=i.rotateOffset,this.rotateMix=i.rotateMix,this.translateMix=i.translateMix,this._root=this._armature.getBone(i.root.name),this._target=this._armature.getBone(i.target.name),this._pathSlot=this._armature.getSlot(i.pathSlot.name);for(var r=0,n=i.bones.length;r<n;r++){var a=this._armature.getBone(i.bones[r].name);null!==a&&this._bones.push(a)}2===i.rotateMode&&(this._boneLengths.length=this._bones.length),this._root._hasConstraint=!0},i.prototype.update=function(){var e=this._pathSlot;if(null!==e._geometryData&&e._geometryData.offset===this.pathOffset){var i=this._constraintData,r=!1;if(this._root._childrenTransformDirty?(this._updatePathVertices(e._geometryData),r=!0):(e._verticesDirty||e._isBonesUpdate())&&(this._updatePathVertices(e._geometryData),e._verticesDirty=!1,r=!0),r||this.dirty){var n=i.positionMode,a=i.spacingMode,s=i.rotateMode,o=this._bones,h=0===a,l=2===s,u=0===s,c=o.length,f=u?c:c+1,p=this.spacing,d=this._spaces;if(d.length=f,l||h){d[0]=0;for(var _=0,m=f-1;_<m;_++){(O=o[_]).updateByConstraint();var y=O._boneData.length,g=y*(I=O.globalTransformMatrix).a,v=y*I.b,b=Math.sqrt(g*g+v*v);l&&(this._boneLengths[_]=b),d[_+1]=(y+p)*b/y}}else for(_=0;_<f;_++)d[_]=p;this._computeBezierCurve(e._displayFrame.rawDisplayData,f,u,1===n,2===a);var T,x=this._positions,P=this.rotateOffset,E=x[0],A=x[1];0===P?T=1===s:(T=!1,null!==(O=e.parent)&&(P*=(I=O.globalTransformMatrix).a*I.d-I.b*I.c>0?t.Transform.DEG_RAD:-t.Transform.DEG_RAD));for(var S=this.rotateMix,w=this.translateMix,D=(_=0,3);_<c;_++,D+=3){var O,I;(O=o[_]).updateByConstraint(),(I=O.globalTransformMatrix).tx+=(E-I.tx)*w,I.ty+=(A-I.ty)*w;var M=(g=x[D])-E,C=(v=x[D+1])-A;if(l){var R=this._boneLengths[_],F=(Math.sqrt(M*M+C*C)/R-1)*S+1;I.a*=F,I.b*=F}if(E=g,A=v,S>0){var B=I.a,N=I.b,L=I.c,k=I.d,U=void 0,j=void 0,X=void 0;if(U=u?x[D-1]:Math.atan2(C,M),U-=Math.atan2(N,B),T){j=Math.cos(U),X=Math.sin(U);var Y=O._boneData.length;E+=(Y*(j*B-X*N)-M)*S,A+=(Y*(X*B+j*N)-C)*S}else U+=P;U>t.Transform.PI?U-=t.Transform.PI_D:U<-t.Transform.PI&&(U+=t.Transform.PI_D),U*=S,j=Math.cos(U),X=Math.sin(U),I.a=j*B-X*N,I.b=X*B+j*N,I.c=j*L-X*k,I.d=X*L+j*k}O.global.fromMatrix(I)}this.dirty=!1}}},i.prototype.invalidUpdate=function(){},i}(e);t.PathConstraint=r}(Mt||(Mt={})),function(t){var e=function(){function t(t){void 0===t&&(t=0),this.time=0,this.timeScale=1,this._systemTime=0,this._animatebles=[],this._clock=null,this.time=t,this._systemTime=.001*(new Date).getTime()}return t.prototype.advanceTime=function(t){t!=t&&(t=0);var e=.001*Date.now();if(t<0&&(t=e-this._systemTime),this._systemTime=e,1!==this.timeScale&&(t*=this.timeScale),0!==t){t<0?this.time-=t:this.time+=t;for(var i=0,r=0,n=this._animatebles.length;i<n;++i){var a=this._animatebles[i];null!==a?(r>0&&(this._animatebles[i-r]=a,this._animatebles[i]=null),a.advanceTime(t)):r++}if(r>0){for(n=this._animatebles.length;i<n;++i){var s=this._animatebles[i];null!==s?this._animatebles[i-r]=s:r++}this._animatebles.length-=r}}},t.prototype.contains=function(t){if(t===this)return!1;for(var e=t;e!==this&&null!==e;)e=e.clock;return e===this},t.prototype.add=function(t){this._animatebles.indexOf(t)<0&&(this._animatebles.push(t),t.clock=this)},t.prototype.remove=function(t){var e=this._animatebles.indexOf(t);e>=0&&(this._animatebles[e]=null,t.clock=null)},t.prototype.clear=function(){for(var t=0,e=this._animatebles;t<e.length;t++){var i=e[t];null!==i&&(i.clock=null)}},Object.defineProperty(t.prototype,"clock",{get:function(){return this._clock},set:function(t){this._clock!==t&&(null!==this._clock&&this._clock.remove(this),this._clock=t,null!==this._clock&&this._clock.add(this))},enumerable:!0,configurable:!0}),t}();t.WorldClock=e}(Mt||(Mt={})),function(t){var e=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._animationNames=[],t._animationStates=[],t._animations={},t._blendStates={},t._animationConfig=null,t}return Ct(i,e),i.toString=function(){return"[class dragonBones.Animation]"},i.prototype._onClear=function(){for(var t=0,e=this._animationStates;t<e.length;t++)e[t].returnToPool();for(var i in this._animations)delete this._animations[i];for(var i in this._blendStates){var r=this._blendStates[i];for(var n in r)r[n].returnToPool();delete this._blendStates[i]}null!==this._animationConfig&&this._animationConfig.returnToPool(),this.timeScale=1,this._animationDirty=!1,this._inheritTimeScale=1,this._animationNames.length=0,this._animationStates.length=0,this._armature=null,this._animationConfig=null,this._lastAnimationState=null},i.prototype._fadeOut=function(t){switch(t.fadeOutMode){case 1:for(var e=0,i=this._animationStates;e<i.length;e++)null===(l=i[e])._parent&&l.layer===t.layer&&l.fadeOut(t.fadeOutTime,t.pauseFadeOut);break;case 2:for(var r=0,n=this._animationStates;r<n.length;r++)null===(l=n[r])._parent&&l.group===t.group&&l.fadeOut(t.fadeOutTime,t.pauseFadeOut);break;case 3:for(var a=0,s=this._animationStates;a<s.length;a++)null===(l=s[a])._parent&&l.layer===t.layer&&l.group===t.group&&l.fadeOut(t.fadeOutTime,t.pauseFadeOut);break;case 4:for(var o=0,h=this._animationStates;o<h.length;o++){var l;null===(l=h[o])._parent&&l.fadeOut(t.fadeOutTime,t.pauseFadeOut)}}},i.prototype.init=function(e){null===this._armature&&(this._armature=e,this._animationConfig=t.BaseObject.borrowObject(t.AnimationConfig))},i.prototype.advanceTime=function(t){for(var e in t<0&&(t=-t),this._armature.inheritAnimation&&null!==this._armature._parent?this._inheritTimeScale=this._armature._parent._armature.animation._inheritTimeScale*this.timeScale:this._inheritTimeScale=this.timeScale,1!==this._inheritTimeScale&&(t*=this._inheritTimeScale),this._blendStates){var i=this._blendStates[e];for(var r in i)i[r].reset()}var n=this._animationStates.length;if(1===n)if((m=this._animationStates[0])._fadeState>0&&m._subFadeState>0)this._armature._dragonBones.bufferObject(m),this._animationStates.length=0,this._lastAnimationState=null;else{var a=m.animationData,s=a.cacheFrameRate;if(this._animationDirty&&s>0){this._animationDirty=!1;for(var o=0,h=this._armature.getBones();o<h.length;o++){var l=h[o];l._cachedFrameIndices=a.getBoneCachedFrameIndices(l.name)}for(var u=0,c=this._armature.getSlots();u<c.length;u++){var f=c[u];if(f.displayFrameCount>0){var p=f.getDisplayFrameAt(0).rawDisplayData;if(null!==p&&p.parent===this._armature.armatureData.defaultSkin){f._cachedFrameIndices=a.getSlotCachedFrameIndices(f.name);continue}}f._cachedFrameIndices=null}}m.advanceTime(t,s)}else if(n>1){for(var d=0,_=0;d<n;++d){var m;(m=this._animationStates[d])._fadeState>0&&m._subFadeState>0?(_++,this._armature._dragonBones.bufferObject(m),this._animationDirty=!0,this._lastAnimationState===m&&(this._lastAnimationState=null)):(_>0&&(this._animationStates[d-_]=m),m.advanceTime(t,0)),d===n-1&&_>0&&(this._animationStates.length-=_,null===this._lastAnimationState&&this._animationStates.length>0&&(this._lastAnimationState=this._animationStates[this._animationStates.length-1]))}this._armature._cacheFrameIndex=-1}else this._armature._cacheFrameIndex=-1},i.prototype.reset=function(){for(var t=0,e=this._animationStates;t<e.length;t++)e[t].returnToPool();this._animationDirty=!1,this._animationConfig.clear(),this._animationStates.length=0,this._lastAnimationState=null},i.prototype.stop=function(t){if(void 0===t&&(t=null),null!==t)null!==(r=this.getState(t))&&r.stop();else for(var e=0,i=this._animationStates;e<i.length;e++){var r;(r=i[e]).stop()}},i.prototype.playConfig=function(e){var i=e.animation;if(!(i in this._animations))return console.warn("Non-existent animation.\n","DragonBones name: "+this._armature.armatureData.parent.name,"Armature name: "+this._armature.name,"Animation name: "+i),null;var r=this._animations[i];if(5===e.fadeOutMode)for(var n=0,a=this._animationStates;n<a.length;n++){var s=a[n];if(s._fadeState<1&&s.layer===e.layer&&s.animationData===r)return s}0===this._animationStates.length?e.fadeInTime=0:e.fadeInTime<0&&(e.fadeInTime=r.fadeInTime),e.fadeOutTime<0&&(e.fadeOutTime=e.fadeInTime),e.timeScale<=-100&&(e.timeScale=1/r.scale),r.frameCount>0?(e.position<0?(e.position%=r.duration,e.position=r.duration-e.position):e.position===r.duration?e.position-=1e-6:e.position>r.duration&&(e.position%=r.duration),e.duration>0&&e.position+e.duration>r.duration&&(e.duration=r.duration-e.position),e.playTimes<0&&(e.playTimes=r.playTimes)):(e.playTimes=1,e.position=0,e.duration>0&&(e.duration=0)),0===e.duration&&(e.duration=-1),this._fadeOut(e);var o=t.BaseObject.borrowObject(t.AnimationState);if(o.init(this._armature,r,e),this._animationDirty=!0,this._armature._cacheFrameIndex=-1,this._animationStates.length>0){for(var h=!1,l=0,u=this._animationStates.length;l<u;++l){if(o.layer>this._animationStates[l].layer){h=!0,this._animationStates.splice(l,0,o);break}if(l!==u-1&&o.layer>this._animationStates[l+1].layer){h=!0,this._animationStates.splice(l+1,0,o);break}}h||this._animationStates.push(o)}else this._animationStates.push(o);for(var c=0,f=this._armature.getSlots();c<f.length;c++){var p=f[c].childArmature;null!==p&&p.inheritAnimation&&p.animation.hasAnimation(i)&&null===p.animation.getState(i)&&p.animation.fadeIn(i)}for(var d in r.animationTimelines){var _=this.fadeIn(d,0,1,o.layer,"",5);if(null!==_){var m=r.animationTimelines[d];_.actionEnabled=!1,_.resetToPose=!1,_.stop(),o.addState(_,m);var y=this._animationStates.indexOf(o),g=this._animationStates.indexOf(_);g<y&&(this._animationStates.splice(y,1),this._animationStates.splice(g,0,o))}}return this._lastAnimationState=o,o},i.prototype.play=function(t,e){if(void 0===t&&(t=null),void 0===e&&(e=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=e,this._animationConfig.fadeInTime=0,this._animationConfig.animation=null!==t?t:"",null!==t&&t.length>0)this.playConfig(this._animationConfig);else if(null===this._lastAnimationState){var i=this._armature.armatureData.defaultAnimation;null!==i&&(this._animationConfig.animation=i.name,this.playConfig(this._animationConfig))}else this._lastAnimationState.isPlaying||this._lastAnimationState.isCompleted?(this._animationConfig.animation=this._lastAnimationState.name,this.playConfig(this._animationConfig)):this._lastAnimationState.play();return this._lastAnimationState},i.prototype.fadeIn=function(t,e,i,r,n,a){return void 0===e&&(e=-1),void 0===i&&(i=-1),void 0===r&&(r=0),void 0===n&&(n=null),void 0===a&&(a=3),this._animationConfig.clear(),this._animationConfig.fadeOutMode=a,this._animationConfig.playTimes=i,this._animationConfig.layer=r,this._animationConfig.fadeInTime=e,this._animationConfig.animation=t,this._animationConfig.group=null!==n?n:"",this.playConfig(this._animationConfig)},i.prototype.gotoAndPlayByTime=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=i,this._animationConfig.position=e,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t,this.playConfig(this._animationConfig)},i.prototype.gotoAndPlayByFrame=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=i,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t;var r=t in this._animations?this._animations[t]:null;return null!==r&&(this._animationConfig.position=r.frameCount>0?r.duration*e/r.frameCount:0),this.playConfig(this._animationConfig)},i.prototype.gotoAndPlayByProgress=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._animationConfig.clear(),this._animationConfig.resetToPose=!0,this._animationConfig.playTimes=i,this._animationConfig.fadeInTime=0,this._animationConfig.animation=t;var r=t in this._animations?this._animations[t]:null;return null!==r&&(this._animationConfig.position=r.duration*(e>0?e:0)),this.playConfig(this._animationConfig)},i.prototype.gotoAndStopByTime=function(t,e){void 0===e&&(e=0);var i=this.gotoAndPlayByTime(t,e,1);return null!==i&&i.stop(),i},i.prototype.gotoAndStopByFrame=function(t,e){void 0===e&&(e=0);var i=this.gotoAndPlayByFrame(t,e,1);return null!==i&&i.stop(),i},i.prototype.gotoAndStopByProgress=function(t,e){void 0===e&&(e=0);var i=this.gotoAndPlayByProgress(t,e,1);return null!==i&&i.stop(),i},i.prototype.getBlendState=function(e,i,r){e in this._blendStates||(this._blendStates[e]={});var n=this._blendStates[e];return i in n||((n[i]=t.BaseObject.borrowObject(t.BlendState)).target=r),n[i]},i.prototype.getState=function(t,e){void 0===e&&(e=-1);for(var i=this._animationStates.length;i--;){var r=this._animationStates[i];if(r.name===t&&(e<0||r.layer===e))return r}return null},i.prototype.hasAnimation=function(t){return t in this._animations},i.prototype.getStates=function(){return this._animationStates},Object.defineProperty(i.prototype,"isPlaying",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++)if(e[t].isPlaying)return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isCompleted",{get:function(){for(var t=0,e=this._animationStates;t<e.length;t++)if(!e[t].isCompleted)return!1;return this._animationStates.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastAnimationName",{get:function(){return null!==this._lastAnimationState?this._lastAnimationState.name:""},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animationNames",{get:function(){return this._animationNames},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animations",{get:function(){return this._animations},set:function(t){if(this._animations!==t){for(var e in this._animationNames.length=0,this._animations)delete this._animations[e];for(var e in t)this._animationNames.push(e),this._animations[e]=t[e]}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"animationConfig",{get:function(){return this._animationConfig.clear(),this._animationConfig},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lastAnimationState",{get:function(){return this._lastAnimationState},enumerable:!0,configurable:!0}),i}(t.BaseObject);t.Animation=e}(Mt||(Mt={})),function(t){var e=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._boneMask=[],t._boneTimelines=[],t._boneBlendTimelines=[],t._slotTimelines=[],t._slotBlendTimelines=[],t._constraintTimelines=[],t._animationTimelines=[],t._poseTimelines=[],t._actionTimeline=null,t._zOrderTimeline=null,t}return Ct(r,e),r.toString=function(){return"[class dragonBones.AnimationState]"},r.prototype._onClear=function(){for(var t=0,e=this._boneTimelines;t<e.length;t++)(f=e[t]).returnToPool();for(var i=0,r=this._boneBlendTimelines;i<r.length;i++)(f=r[i]).returnToPool();for(var n=0,a=this._slotTimelines;n<a.length;n++)(f=a[n]).returnToPool();for(var s=0,o=this._slotBlendTimelines;s<o.length;s++)(f=o[s]).returnToPool();for(var h=0,l=this._constraintTimelines;h<l.length;h++)(f=l[h]).returnToPool();for(var u=0,c=this._animationTimelines;u<c.length;u++){var f,p=(f=c[u]).target;p._parent===this&&(p._fadeState=1,p._subFadeState=1,p._parent=null),f.returnToPool()}null!==this._actionTimeline&&this._actionTimeline.returnToPool(),null!==this._zOrderTimeline&&this._zOrderTimeline.returnToPool(),this.actionEnabled=!1,this.additive=!1,this.displayControl=!1,this.resetToPose=!1,this.blendType=0,this.playTimes=1,this.layer=0,this.timeScale=1,this._weight=1,this.parameterX=0,this.parameterY=0,this.positionX=0,this.positionY=0,this.autoFadeOutTime=0,this.fadeTotalTime=0,this.name="",this.group="",this._timelineDirty=2,this._playheadState=0,this._fadeState=-1,this._subFadeState=-1,this._position=0,this._duration=0,this._fadeTime=0,this._time=0,this._fadeProgress=0,this._weightResult=0,this._boneMask.length=0,this._boneTimelines.length=0,this._boneBlendTimelines.length=0,this._slotTimelines.length=0,this._slotBlendTimelines.length=0,this._constraintTimelines.length=0,this._animationTimelines.length=0,this._poseTimelines.length=0,this._animationData=null,this._armature=null,this._actionTimeline=null,this._zOrderTimeline=null,this._activeChildA=null,this._activeChildB=null,this._parent=null},r.prototype._updateTimelines=function(){for(var e=0,i=this._armature._constraints;e<i.length;e++){var r=i[e],n=this._animationData.getConstraintTimelines(r.name);if(null!==n)for(var a=0,s=n;a<s.length;a++){var o=s[a];30===o.type&&((h=t.BaseObject.borrowObject(t.IKConstraintTimelineState)).target=r,h.init(this._armature,this,o),this._constraintTimelines.push(h))}else if(this.resetToPose){var h;(h=t.BaseObject.borrowObject(t.IKConstraintTimelineState)).target=r,h.init(this._armature,this,null),this._constraintTimelines.push(h),this._poseTimelines.push(h)}}},r.prototype._updateBoneAndSlotTimelines=function(){for(var e={},r=0,n=this._boneTimelines;r<n.length;r++)(u=(g=n[r]).target.target.name)in e||(e[u]=[]),e[u].push(g);for(var a=0,s=this._boneBlendTimelines;a<s.length;a++)(u=(g=s[a]).target.target.name)in e||(e[u]=[]),e[u].push(g);for(var o=0,h=this._armature.getBones();o<h.length;o++){var l=h[o],u=l.name;if(this.containsBoneMask(u))if(u in e)delete e[u];else{var c=this._animationData.getBoneTimelines(u),f=this._armature.animation.getBlendState(i.BONE_TRANSFORM,l.name,l);if(null!==c)for(var p=0,d=c;p<d.length;p++)switch((R=d[p]).type){case 10:(g=t.BaseObject.borrowObject(t.BoneAllTimelineState)).target=f,g.init(this._armature,this,R),this._boneTimelines.push(g);break;case 11:(g=t.BaseObject.borrowObject(t.BoneTranslateTimelineState)).target=f,g.init(this._armature,this,R),this._boneTimelines.push(g);break;case 12:(g=t.BaseObject.borrowObject(t.BoneRotateTimelineState)).target=f,g.init(this._armature,this,R),this._boneTimelines.push(g);break;case 13:(g=t.BaseObject.borrowObject(t.BoneScaleTimelineState)).target=f,g.init(this._armature,this,R),this._boneTimelines.push(g);break;case 60:(g=t.BaseObject.borrowObject(t.AlphaTimelineState)).target=this._armature.animation.getBlendState(i.BONE_ALPHA,l.name,l),g.init(this._armature,this,R),this._boneBlendTimelines.push(g);break;case 50:(g=t.BaseObject.borrowObject(t.SurfaceTimelineState)).target=this._armature.animation.getBlendState(i.SURFACE,l.name,l),g.init(this._armature,this,R),this._boneBlendTimelines.push(g)}else this.resetToPose&&(0===l._boneData.type?((g=t.BaseObject.borrowObject(t.BoneAllTimelineState)).target=f,g.init(this._armature,this,null),this._boneTimelines.push(g),this._poseTimelines.push(g)):((g=t.BaseObject.borrowObject(t.SurfaceTimelineState)).target=this._armature.animation.getBlendState(i.SURFACE,l.name,l),g.init(this._armature,this,null),this._boneBlendTimelines.push(g),this._poseTimelines.push(g)))}}for(var _ in e)for(var m=0,y=e[_];m<y.length;m++){var g=y[m];(j=this._boneTimelines.indexOf(g))>=0&&(this._boneTimelines.splice(j,1),g.returnToPool()),(j=this._boneBlendTimelines.indexOf(g))>=0&&(this._boneBlendTimelines.splice(j,1),g.returnToPool())}for(var v={},b=[],T=0,x=this._slotTimelines;T<x.length;T++)(u=(g=x[T]).target.name)in v||(v[u]=[]),v[u].push(g);for(var P=0,E=this._slotBlendTimelines;P<E.length;P++)(u=(g=E[P]).target.target.name)in v||(v[u]=[]),v[u].push(g);for(var A=0,S=this._armature.getSlots();A<S.length;A++){var w=S[A],D=w.parent.name;if(this.containsBoneMask(D))if((u=w.name)in v)delete v[u];else{var O=!1,I=!1;if(b.length=0,null!==(c=this._animationData.getSlotTimelines(u)))for(var M=0,C=c;M<C.length;M++){var R;switch((R=C[M]).type){case 20:(g=t.BaseObject.borrowObject(t.SlotDisplayTimelineState)).target=w,g.init(this._armature,this,R),this._slotTimelines.push(g),O=!0;break;case 23:(g=t.BaseObject.borrowObject(t.SlotZIndexTimelineState)).target=this._armature.animation.getBlendState(i.SLOT_Z_INDEX,w.name,w),g.init(this._armature,this,R),this._slotBlendTimelines.push(g);break;case 21:(g=t.BaseObject.borrowObject(t.SlotColorTimelineState)).target=w,g.init(this._armature,this,R),this._slotTimelines.push(g),I=!0;break;case 22:(g=t.BaseObject.borrowObject(t.DeformTimelineState)).target=this._armature.animation.getBlendState(i.SLOT_DEFORM,w.name,w),g.init(this._armature,this,R),null!==g.target?(this._slotBlendTimelines.push(g),b.push(g.geometryOffset)):g.returnToPool();break;case 24:(g=t.BaseObject.borrowObject(t.AlphaTimelineState)).target=this._armature.animation.getBlendState(i.SLOT_ALPHA,w.name,w),g.init(this._armature,this,R),this._slotBlendTimelines.push(g)}}if(this.resetToPose){O||((g=t.BaseObject.borrowObject(t.SlotDisplayTimelineState)).target=w,g.init(this._armature,this,null),this._slotTimelines.push(g),this._poseTimelines.push(g)),I||((g=t.BaseObject.borrowObject(t.SlotColorTimelineState)).target=w,g.init(this._armature,this,null),this._slotTimelines.push(g),this._poseTimelines.push(g));for(var F=0,B=w.displayFrameCount;F<B;++F){var N=w.getDisplayFrameAt(F);if(0!==N.deformVertices.length){var L=N.getGeometryData();null!==L&&b.indexOf(L.offset)<0&&((g=t.BaseObject.borrowObject(t.DeformTimelineState)).geometryOffset=L.offset,g.displayFrame=N,g.target=this._armature.animation.getBlendState(i.SLOT_DEFORM,w.name,w),g.init(this._armature,this,null),this._slotBlendTimelines.push(g),this._poseTimelines.push(g))}}}}}for(var _ in v)for(var k=0,U=v[_];k<U.length;k++){var j;g=U[k],(j=this._slotTimelines.indexOf(g))>=0&&(this._slotTimelines.splice(j,1),g.returnToPool()),(j=this._slotBlendTimelines.indexOf(g))>=0&&(this._slotBlendTimelines.splice(j,1),g.returnToPool())}},r.prototype._advanceFadeTime=function(e){var i,r=this._fadeState>0;if(this._subFadeState<0&&(this._subFadeState=0,null===this._parent&&this.actionEnabled)){var n=r?t.EventObject.FADE_OUT:t.EventObject.FADE_IN;this._armature.eventDispatcher.hasDBEventListener(n)&&((i=t.BaseObject.borrowObject(t.EventObject)).type=n,i.armature=this._armature,i.animationState=this,this._armature._dragonBones.bufferEvent(i))}(e<0&&(e=-e),this._fadeTime+=e,this._fadeTime>=this.fadeTotalTime?(this._subFadeState=1,this._fadeProgress=r?0:1):this._fadeTime>0?this._fadeProgress=r?1-this._fadeTime/this.fadeTotalTime:this._fadeTime/this.fadeTotalTime:this._fadeProgress=r?1:0,this._subFadeState>0&&(r||(this._playheadState|=1,this._fadeState=0),null===this._parent&&this.actionEnabled))&&(n=r?t.EventObject.FADE_OUT_COMPLETE:t.EventObject.FADE_IN_COMPLETE,this._armature.eventDispatcher.hasDBEventListener(n)&&((i=t.BaseObject.borrowObject(t.EventObject)).type=n,i.armature=this._armature,i.animationState=this,this._armature._dragonBones.bufferEvent(i)))},r.prototype.init=function(e,i,r){if(null===this._armature){if(this._armature=e,this._animationData=i,this.resetToPose=r.resetToPose,this.additive=r.additive,this.displayControl=r.displayControl,this.actionEnabled=r.actionEnabled,this.blendType=i.blendType,this.layer=r.layer,this.playTimes=r.playTimes,this.timeScale=r.timeScale,this.fadeTotalTime=r.fadeInTime,this.autoFadeOutTime=r.autoFadeOutTime,this.name=r.name.length>0?r.name:r.animation,this.group=r.group,this._weight=r.weight,r.pauseFadeIn?this._playheadState=2:this._playheadState=3,r.duration<0?(this._position=0,this._duration=this._animationData.duration,0!==r.position?this.timeScale>=0?this._time=r.position:this._time=r.position-this._duration:this._time=0):(this._position=r.position,this._duration=r.duration,this._time=0),this.timeScale<0&&0===this._time&&(this._time=-1e-6),this.fadeTotalTime<=0&&(this._fadeProgress=.999999),r.boneMask.length>0){this._boneMask.length=r.boneMask.length;for(var n=0,a=this._boneMask.length;n<a;++n)this._boneMask[n]=r.boneMask[n]}this._actionTimeline=t.BaseObject.borrowObject(t.ActionTimelineState),this._actionTimeline.init(this._armature,this,this._animationData.actionTimeline),this._actionTimeline.currentTime=this._time,this._actionTimeline.currentTime<0&&(this._actionTimeline.currentTime=this._duration-this._actionTimeline.currentTime),null!==this._animationData.zOrderTimeline&&(this._zOrderTimeline=t.BaseObject.borrowObject(t.ZOrderTimelineState),this._zOrderTimeline.init(this._armature,this,this._animationData.zOrderTimeline))}},r.prototype.advanceTime=function(t,e){0===this._fadeState&&0===this._subFadeState||this._advanceFadeTime(t),3===this._playheadState&&(1!==this.timeScale&&(t*=this.timeScale),this._time+=t),0!==this._timelineDirty&&(2===this._timelineDirty&&this._updateTimelines(),this._timelineDirty=0,this._updateBoneAndSlotTimelines());var i=0!==this._fadeState||0===this._subFadeState,r=0===this._fadeState&&e>0,n=!0,a=!0,s=this._time;if(this._weightResult=this._weight*this._fadeProgress,null!==this._parent&&(this._weightResult*=this._parent._weightResult),this._actionTimeline.playState<=0&&this._actionTimeline.update(s),0!==this._weight){if(r){var o=2*e;this._actionTimeline.currentTime=Math.floor(this._actionTimeline.currentTime*o)/o}if(null!==this._zOrderTimeline&&this._zOrderTimeline.playState<=0&&this._zOrderTimeline.update(s),r){var h=Math.floor(this._actionTimeline.currentTime*e);this._armature._cacheFrameIndex===h?(n=!1,a=!1):(this._armature._cacheFrameIndex=h,this._animationData.cachedFrames[h]?a=!1:this._animationData.cachedFrames[h]=!0)}if(n){var l=!1,u=null;if(a)for(var c=0,f=this._boneTimelines.length;c<f;++c){if((E=this._boneTimelines[c]).playState<=0&&E.update(s),E.target!==u&&(l=(_=E.target).update(this),u=_,1===_.dirty)){var p=_.target.animationPose;p.x=0,p.y=0,p.rotation=0,p.skew=0,p.scaleX=1,p.scaleY=1}l&&E.blend(i)}for(c=0,f=this._boneBlendTimelines.length;c<f;++c)(E=this._boneBlendTimelines[c]).playState<=0&&E.update(s),E.target.update(this)&&E.blend(i);if(this.displayControl)for(c=0,f=this._slotTimelines.length;c<f;++c)if((E=this._slotTimelines[c]).playState<=0){var d=E.target.displayController;null!==d&&d!==this.name&&d!==this.group||E.update(s)}for(c=0,f=this._slotBlendTimelines.length;c<f;++c)if((E=this._slotBlendTimelines[c]).playState<=0){var _=E.target;E.update(s),_.update(this)&&E.blend(i)}for(c=0,f=this._constraintTimelines.length;c<f;++c)(E=this._constraintTimelines[c]).playState<=0&&E.update(s);if(this._animationTimelines.length>0){var m=100,y=100,g=null,v=null;for(c=0,f=this._animationTimelines.length;c<f;++c)if((E=this._animationTimelines[c]).playState<=0&&E.update(s),1===this.blendType){var b=E.target,T=this.parameterX-b.positionX;T>=0?T<m&&(m=T,g=b):-T<y&&(y=-T,v=b)}null!==g&&(this._activeChildA!==g&&(null!==this._activeChildA&&(this._activeChildA.weight=0),this._activeChildA=g,this._activeChildA.activeTimeline()),this._activeChildB!==v&&(null!==this._activeChildB&&(this._activeChildB.weight=0),this._activeChildB=v),g.weight=y/(m+y),v&&(v.weight=1-g.weight))}}if(0===this._fadeState){if(this._subFadeState>0&&(this._subFadeState=0,this._poseTimelines.length>0)){for(var x=0,P=this._poseTimelines;x<P.length;x++){var E=P[x],A=this._boneTimelines.indexOf(E);A>=0?(this._boneTimelines.splice(A,1),E.returnToPool()):(A=this._boneBlendTimelines.indexOf(E))>=0?(this._boneBlendTimelines.splice(A,1),E.returnToPool()):(A=this._slotTimelines.indexOf(E))>=0?(this._slotTimelines.splice(A,1),E.returnToPool()):(A=this._slotBlendTimelines.indexOf(E))>=0?(this._slotBlendTimelines.splice(A,1),E.returnToPool()):(A=this._constraintTimelines.indexOf(E))>=0&&(this._constraintTimelines.splice(A,1),E.returnToPool())}this._poseTimelines.length=0}this._actionTimeline.playState>0&&this.autoFadeOutTime>=0&&this.fadeOut(this.autoFadeOutTime)}}},r.prototype.play=function(){this._playheadState=3},r.prototype.stop=function(){this._playheadState&=1},r.prototype.fadeOut=function(t,e){if(void 0===e&&(e=!0),t<0&&(t=0),e&&(this._playheadState&=2),this._fadeState>0){if(t>this.fadeTotalTime-this._fadeTime)return}else{this._fadeState=1,this._subFadeState=-1,(t<=0||this._fadeProgress<=0)&&(this._fadeProgress=1e-6);for(var i=0,r=this._boneTimelines;i<r.length;i++)(d=r[i]).fadeOut();for(var n=0,a=this._boneBlendTimelines;n<a.length;n++)(d=a[n]).fadeOut();for(var s=0,o=this._slotTimelines;s<o.length;s++)(d=o[s]).fadeOut();for(var h=0,l=this._slotBlendTimelines;h<l.length;h++)(d=l[h]).fadeOut();for(var u=0,c=this._constraintTimelines;u<c.length;u++)(d=c[u]).fadeOut();for(var f=0,p=this._animationTimelines;f<p.length;f++){var d;(d=p[f]).fadeOut(),d.target.fadeOut(999999,!0)}}this.displayControl=!1,this.fadeTotalTime=this._fadeProgress>1e-6?t/this._fadeProgress:0,this._fadeTime=this.fadeTotalTime*(1-this._fadeProgress)},r.prototype.containsBoneMask=function(t){return 0===this._boneMask.length||this._boneMask.indexOf(t)>=0},r.prototype.addBoneMask=function(t,e){void 0===e&&(e=!0);var i=this._armature.getBone(t);if(null!==i){if(this._boneMask.indexOf(t)<0&&this._boneMask.push(t),e)for(var r=0,n=this._armature.getBones();r<n.length;r++){var a=n[r];this._boneMask.indexOf(a.name)<0&&i.contains(a)&&this._boneMask.push(a.name)}this._timelineDirty=1}},r.prototype.removeBoneMask=function(t,e){void 0===e&&(e=!0);var i=this._boneMask.indexOf(t);if(i>=0&&this._boneMask.splice(i,1),e){var r=this._armature.getBone(t);if(null!==r){var n=this._armature.getBones();if(this._boneMask.length>0)for(var a=0,s=n;a<s.length;a++){var o=s[a],h=this._boneMask.indexOf(o.name);h>=0&&r.contains(o)&&this._boneMask.splice(h,1)}else for(var l=0,u=n;l<u.length;l++)(o=u[l])!==r&&(r.contains(o)||this._boneMask.push(o.name))}}this._timelineDirty=1},r.prototype.removeAllBoneMask=function(){this._boneMask.length=0,this._timelineDirty=1},r.prototype.addState=function(e,i){if(void 0===i&&(i=null),null!==i)for(var r=0,n=i;r<n.length;r++){var a=n[r];switch(a.type){case 40:if((o=t.BaseObject.borrowObject(t.AnimationProgressTimelineState)).target=e,o.init(this._armature,this,a),this._animationTimelines.push(o),0!==this.blendType){var s=a;e.positionX=s.x,e.positionY=s.y,e.weight=0}e._parent=this,this.resetToPose=!1;break;case 41:(o=t.BaseObject.borrowObject(t.AnimationWeightTimelineState)).target=e,o.init(this._armature,this,a),this._animationTimelines.push(o);break;case 42:var o;(o=t.BaseObject.borrowObject(t.AnimationParametersTimelineState)).target=e,o.init(this._armature,this,a),this._animationTimelines.push(o)}}null===e._parent&&(e._parent=this)},r.prototype.activeTimeline=function(){for(var t=0,e=this._slotTimelines;t<e.length;t++){var i=e[t];i.dirty=!0,i.currentTime=-1}},Object.defineProperty(r.prototype,"isFadeIn",{get:function(){return this._fadeState<0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isFadeOut",{get:function(){return this._fadeState>0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isFadeComplete",{get:function(){return 0===this._fadeState},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isPlaying",{get:function(){return 0!=(2&this._playheadState)&&this._actionTimeline.playState<=0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isCompleted",{get:function(){return this._actionTimeline.playState>0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentPlayTimes",{get:function(){return this._actionTimeline.currentPlayTimes},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"totalTime",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"currentTime",{get:function(){return this._actionTimeline.currentTime},set:function(t){var e=this._actionTimeline.currentPlayTimes-(this._actionTimeline.playState>0?1:0);if((t<0||this._duration<t)&&(t=t%this._duration+e*this._duration)<0&&(t+=this._duration),this.playTimes>0&&e===this.playTimes-1&&t===this._duration&&null===this._parent&&(t=this._duration-1e-6),this._time!==t){this._time=t,this._actionTimeline.setCurrentTime(this._time),null!==this._zOrderTimeline&&(this._zOrderTimeline.playState=-1);for(var i=0,r=this._boneTimelines;i<r.length;i++)r[i].playState=-1;for(var n=0,a=this._slotTimelines;n<a.length;n++)a[n].playState=-1}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"weight",{get:function(){return this._weight},set:function(t){if(this._weight!==t){this._weight=t;for(var e=0,i=this._boneTimelines;e<i.length;e++)i[e].dirty=!0;for(var r=0,n=this._boneBlendTimelines;r<n.length;r++)n[r].dirty=!0;for(var a=0,s=this._slotBlendTimelines;a<s.length;a++)s[a].dirty=!0}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"animationData",{get:function(){return this._animationData},enumerable:!0,configurable:!0}),r}(t.BaseObject);t.AnimationState=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.BlendState]"},e.prototype._onClear=function(){this.reset(),this.target=null},e.prototype.update=function(t){var e=t.layer,i=t._weightResult;if(this.dirty>0){if(this.leftWeight>0){if(this.layer!==e){if(this.layerWeight>=this.leftWeight)return this.dirty++,this.layer=e,this.leftWeight=0,this.blendWeight=0,!1;this.layer=e,this.leftWeight-=this.layerWeight,this.layerWeight=0}return i*=this.leftWeight,this.dirty++,this.blendWeight=i,this.layerWeight+=this.blendWeight,!0}return!1}return this.dirty++,this.layer=e,this.leftWeight=1,this.blendWeight=i,this.layerWeight=i,!0},e.prototype.reset=function(){this.dirty=0,this.layer=0,this.leftWeight=0,this.layerWeight=0,this.blendWeight=0},e.BONE_TRANSFORM="boneTransform",e.BONE_ALPHA="boneAlpha",e.SURFACE="surface",e.SLOT_DEFORM="slotDeform",e.SLOT_ALPHA="slotAlpha",e.SLOT_Z_INDEX="slotZIndex",e}(t.BaseObject);t.BlendState=i}(Mt||(Mt={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype._onClear=function(){this.dirty=!1,this.playState=-1,this.currentPlayTimes=0,this.currentTime=-1,this.target=null,this._isTween=!1,this._valueOffset=0,this._frameValueOffset=0,this._frameOffset=0,this._frameRate=0,this._frameCount=0,this._frameIndex=-1,this._frameRateR=0,this._position=0,this._duration=0,this._timeScale=1,this._timeOffset=0,this._animationData=null,this._timelineData=null,this._armature=null,this._animationState=null,this._actionTimeline=null,this._frameArray=null,this._valueArray=null,this._timelineArray=null,this._frameIndices=null},e.prototype._setCurrentTime=function(t){var e=this.playState,i=this.currentPlayTimes,r=this.currentTime;if(null!==this._actionTimeline&&this._frameCount<=1)this.playState=this._actionTimeline.playState>=0?1:-1,this.currentPlayTimes=1,this.currentTime=this._actionTimeline.currentTime;else if(null===this._actionTimeline||1!==this._timeScale||0!==this._timeOffset){var n=this._animationState.playTimes,a=n*this._duration;t*=this._timeScale,0!==this._timeOffset&&(t+=this._timeOffset*this._animationData.duration),n>0&&(t>=a||t<=-a)?(this.playState<=0&&3===this._animationState._playheadState&&(this.playState=1),this.currentPlayTimes=n,this.currentTime=t<0?0:1===this.playState?this._duration+1e-6:this._duration):(0!==this.playState&&3===this._animationState._playheadState&&(this.playState=0),t<0?(t=-t,this.currentPlayTimes=Math.floor(t/this._duration),this.currentTime=this._duration-t%this._duration):(this.currentPlayTimes=Math.floor(t/this._duration),this.currentTime=t%this._duration)),this.currentTime+=this._position}else this.playState=this._actionTimeline.playState,this.currentPlayTimes=this._actionTimeline.currentPlayTimes,this.currentTime=this._actionTimeline.currentTime;return(this.currentPlayTimes!==i||this.currentTime!==r)&&((e<0&&this.playState!==e||this.playState<=0&&this.currentPlayTimes!==i)&&(this._frameIndex=-1),!0)},e.prototype.init=function(t,e,i){if(this._armature=t,this._animationState=e,this._timelineData=i,this._actionTimeline=this._animationState._actionTimeline,this===this._actionTimeline&&(this._actionTimeline=null),this._animationData=this._animationState.animationData,this._frameRate=this._animationData.parent.frameRate,this._frameRateR=1/this._frameRate,this._position=this._animationState._position,this._duration=this._animationState._duration,null!==this._timelineData){var r=this._animationData.parent.parent;this._frameArray=r.frameArray,this._timelineArray=r.timelineArray,this._frameIndices=r.frameIndices,this._frameCount=this._timelineArray[this._timelineData.offset+2],this._frameValueOffset=this._timelineArray[this._timelineData.offset+4],this._timeScale=100/this._timelineArray[this._timelineData.offset+0],this._timeOffset=.01*this._timelineArray[this._timelineData.offset+1]}},e.prototype.fadeOut=function(){this.dirty=!1},e.prototype.update=function(t){if(this._setCurrentTime(t)){if(this._frameCount>1){var e=Math.floor(this.currentTime*this._frameRate),i=this._frameIndices[this._timelineData.frameIndicesOffset+e];this._frameIndex!==i&&(this._frameIndex=i,this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex],this._onArriveAtFrame())}else this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData&&(this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5]),this._onArriveAtFrame());(this._isTween||this.dirty)&&this._onUpdateFrame()}},e.prototype.blend=function(t){},e}(t.BaseObject);t.TimelineState=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e._getEasingValue=function(t,e,i){var r=e;switch(t){case 3:r=Math.pow(e,2);break;case 4:r=1-Math.pow(1-e,2);break;case 5:r=.5*(1-Math.cos(e*Math.PI))}return(r-e)*i+e},e._getEasingCurveValue=function(t,e,i,r){if(t<=0)return 0;if(t>=1)return 1;var n=i>0,a=i+1,s=Math.floor(t*a),o=0,h=0;return n?(o=0===s?0:e[r+s-1],h=s===a-1?1e4:e[r+s]):(o=e[r+s-1],h=e[r+s]),1e-4*(o+(h-o)*(t*a-s))},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._tweenType=0,this._curveCount=0,this._framePosition=0,this._frameDurationR=0,this._tweenEasing=0,this._tweenProgress=0,this._valueScale=1},e.prototype._onArriveAtFrame=function(){if(this._frameCount>1&&(this._frameIndex!==this._frameCount-1||0===this._animationState.playTimes||this._animationState.currentPlayTimes<this._animationState.playTimes-1))if(this._tweenType=this._frameArray[this._frameOffset+1],this._isTween=0!==this._tweenType,this._isTween?2===this._tweenType?this._curveCount=this._frameArray[this._frameOffset+2]:0!==this._tweenType&&1!==this._tweenType&&(this._tweenEasing=.01*this._frameArray[this._frameOffset+2]):this.dirty=!0,this._framePosition=this._frameArray[this._frameOffset]*this._frameRateR,this._frameIndex===this._frameCount-1)this._frameDurationR=1/(this._animationData.duration-this._framePosition);else{var t=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+this._frameIndex+1],e=this._frameArray[t]*this._frameRateR-this._framePosition;this._frameDurationR=e>0?1/e:0}else this.dirty=!0,this._isTween=!1},e.prototype._onUpdateFrame=function(){this._isTween&&(this.dirty=!0,this._tweenProgress=(this.currentTime-this._framePosition)*this._frameDurationR,2===this._tweenType?this._tweenProgress=e._getEasingCurveValue(this._tweenProgress,this._frameArray,this._curveCount,this._frameOffset+3):1!==this._tweenType&&(this._tweenProgress=e._getEasingValue(this._tweenType,this._tweenProgress,this._tweenEasing)))},e}(e);t.TweenTimelineState=i;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._current=0,this._difference=0,this._result=0},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._valueScale,i=this._valueArray,r=this._valueOffset+this._frameValueOffset+this._frameIndex;if(this._isTween){var n=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:r+1;1===e?(this._current=i[r],this._difference=i[n]-this._current):(this._current=i[r]*e,this._difference=i[n]*e-this._current)}else this._result=i[r]*e}else this._result=0},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._result=this._current+this._difference*this._tweenProgress)},e}(i);t.SingleValueTimelineState=r;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._currentA=0,this._currentB=0,this._differenceA=0,this._differenceB=0,this._resultA=0,this._resultB=0},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._valueScale,i=this._valueArray,r=this._valueOffset+this._frameValueOffset+2*this._frameIndex;if(this._isTween){var n=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:r+2;1===e?(this._currentA=i[r],this._currentB=i[r+1],this._differenceA=i[n]-this._currentA,this._differenceB=i[n+1]-this._currentB):(this._currentA=i[r]*e,this._currentB=i[r+1]*e,this._differenceA=i[n]*e-this._currentA,this._differenceB=i[n+1]*e-this._currentB)}else this._resultA=i[r]*e,this._resultB=i[r+1]*e}else this._resultA=0,this._resultB=0},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._resultA=this._currentA+this._differenceA*this._tweenProgress,this._resultB=this._currentB+this._differenceB*this._tweenProgress)},e}(i);t.DoubleValueTimelineState=n;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rd=[],e}return Ct(e,t),e.prototype._onClear=function(){t.prototype._onClear.call(this),this._valueCount=0,this._rd.length=0},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this);var e=this._valueCount,i=this._rd;if(null!==this._timelineData){var r=this._valueScale,n=this._valueArray,a=this._valueOffset+this._frameValueOffset+this._frameIndex*e;if(this._isTween){var s=this._frameIndex===this._frameCount-1?this._valueOffset+this._frameValueOffset:a+e;if(1===r)for(var o=0;o<e;++o)i[e+o]=n[s+o]-n[a+o];else for(o=0;o<e;++o)i[e+o]=(n[s+o]-n[a+o])*r}else if(1===r)for(o=0;o<e;++o)i[o]=n[a+o];else for(o=0;o<e;++o)i[o]=n[a+o]*r}else for(o=0;o<e;++o)i[o]=0},e.prototype._onUpdateFrame=function(){if(t.prototype._onUpdateFrame.call(this),this._isTween){var e=this._valueCount,i=this._valueScale,r=this._tweenProgress,n=this._valueArray,a=this._rd,s=this._valueOffset+this._frameValueOffset+this._frameIndex*e;if(1===i)for(var o=0;o<e;++o)a[o]=n[s+o]+a[e+o]*r;else for(o=0;o<e;++o)a[o]=n[s+o]*i+a[e+o]*r}},e}(i);t.MutilpleValueTimelineState=a}(Mt||(Mt={})),function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ct(i,e),i.toString=function(){return"[class dragonBones.ActionTimelineState]"},i.prototype._onCrossFrame=function(e){var i=this._armature.eventDispatcher;if(this._animationState.actionEnabled)for(var r=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5+e],n=this._frameArray[r+1],a=this._animationData.parent.actions,s=0;s<n;++s){var o=a[this._frameArray[r+2+s]];if(0===o.type)(h=t.BaseObject.borrowObject(t.EventObject)).time=this._frameArray[r]/this._frameRate,h.animationState=this._animationState,t.EventObject.actionDataToInstance(o,h,this._armature),this._armature._bufferAction(h,!0);else{var h,l=10===o.type?t.EventObject.FRAME_EVENT:t.EventObject.SOUND_EVENT;(11===o.type||i.hasDBEventListener(l))&&((h=t.BaseObject.borrowObject(t.EventObject)).time=this._frameArray[r]/this._frameRate,h.animationState=this._animationState,t.EventObject.actionDataToInstance(o,h,this._armature),this._armature._dragonBones.bufferEvent(h))}}},i.prototype._onArriveAtFrame=function(){},i.prototype._onUpdateFrame=function(){},i.prototype.update=function(e){var i=this.playState,r=this.currentPlayTimes,n=this.currentTime;if(this._setCurrentTime(e)){var a=null===this._animationState._parent&&this._animationState.actionEnabled,s=this._armature.eventDispatcher;if(i<0){if(this.playState===i)return;if(this._animationState.displayControl&&this._animationState.resetToPose&&this._armature._sortZOrder(null,0),a&&s.hasDBEventListener(t.EventObject.START)){var o=t.BaseObject.borrowObject(t.EventObject);o.type=t.EventObject.START,o.armature=this._armature,o.animationState=this._animationState,this._armature._dragonBones.bufferEvent(o)}}var h=this._animationState.timeScale<0,l=null,u=null;if(a&&this.currentPlayTimes!==r&&(s.hasDBEventListener(t.EventObject.LOOP_COMPLETE)&&((l=t.BaseObject.borrowObject(t.EventObject)).type=t.EventObject.LOOP_COMPLETE,l.armature=this._armature,l.animationState=this._animationState),this.playState>0&&s.hasDBEventListener(t.EventObject.COMPLETE)&&((u=t.BaseObject.borrowObject(t.EventObject)).type=t.EventObject.COMPLETE,u.armature=this._armature,u.animationState=this._animationState)),this._frameCount>1){var c=this._timelineData,f=Math.floor(this.currentTime*this._frameRate),p=this._frameIndices[c.frameIndicesOffset+f];if(this._frameIndex!==p){var d=this._frameIndex;if(this._frameIndex=p,null!==this._timelineArray)if(this._frameOffset=this._animationData.frameOffset+this._timelineArray[c.offset+5+this._frameIndex],h){if(d<0){var _=Math.floor(n*this._frameRate);d=this._frameIndices[c.frameIndicesOffset+_],this.currentPlayTimes===r&&d===p&&(d=-1)}for(;d>=0;){var m=this._animationData.frameOffset+this._timelineArray[c.offset+5+d],y=this._frameArray[m]/this._frameRate;if(this._position<=y&&y<=this._position+this._duration&&this._onCrossFrame(d),null!==l&&0===d&&(this._armature._dragonBones.bufferEvent(l),l=null),d>0?d--:d=this._frameCount-1,d===p)break}}else for(d<0&&(_=Math.floor(n*this._frameRate),d=this._frameIndices[c.frameIndicesOffset+_],m=this._animationData.frameOffset+this._timelineArray[c.offset+5+d],y=this._frameArray[m]/this._frameRate,this.currentPlayTimes===r&&(n<=y?d>0?d--:d=this._frameCount-1:d===p&&(d=-1)));d>=0&&(d<this._frameCount-1?d++:d=0,m=this._animationData.frameOffset+this._timelineArray[c.offset+5+d],y=this._frameArray[m]/this._frameRate,this._position<=y&&y<=this._position+this._duration&&this._onCrossFrame(d),null!==l&&0===d&&(this._armature._dragonBones.bufferEvent(l),l=null),d!==p););}}else this._frameIndex<0&&(this._frameIndex=0,null!==this._timelineData)&&(this._frameOffset=this._animationData.frameOffset+this._timelineArray[this._timelineData.offset+5],y=this._frameArray[this._frameOffset]/this._frameRate,this.currentPlayTimes===r?n<=y&&this._onCrossFrame(this._frameIndex):this._position<=y&&(h||null===l||(this._armature._dragonBones.bufferEvent(l),l=null),this._onCrossFrame(this._frameIndex)));null!==l&&this._armature._dragonBones.bufferEvent(l),null!==u&&this._armature._dragonBones.bufferEvent(u)}},i.prototype.setCurrentTime=function(t){this._setCurrentTime(t),this._frameIndex=-1},i}(t.TimelineState);t.ActionTimelineState=e;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.ZOrderTimelineState]"},e.prototype._onArriveAtFrame=function(){this.playState>=0&&(this._frameArray[this._frameOffset+1]>0?this._armature._sortZOrder(this._frameArray,this._frameOffset+2):this._armature._sortZOrder(null,0))},e.prototype._onUpdateFrame=function(){},e}(t.TimelineState);t.ZOrderTimelineState=i;var r=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ct(i,e),i.toString=function(){return"[class dragonBones.BoneAllTimelineState]"},i.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._rd[2]=t.Transform.normalizeRadian(this._rd[2]),this._rd[3]=t.Transform.normalizeRadian(this._rd[3])),null===this._timelineData&&(this._rd[4]=1,this._rd[5]=1)},i.prototype.init=function(t,i,r){e.prototype.init.call(this,t,i,r),this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=6,this._valueArray=this._animationData.parent.parent.frameFloatArray},i.prototype.fadeOut=function(){this.dirty=!1,this._rd[2]=t.Transform.normalizeRadian(this._rd[2]),this._rd[3]=t.Transform.normalizeRadian(this._rd[3])},i.prototype.blend=function(t){var e=this._armature.armatureData.scale,i=this._rd,r=this.target,n=r.target,a=r.blendWeight,s=n.animationPose;r.dirty>1?(s.x+=i[0]*a*e,s.y+=i[1]*a*e,s.rotation+=i[2]*a,s.skew+=i[3]*a,s.scaleX+=(i[4]-1)*a,s.scaleY+=(i[5]-1)*a):(s.x=i[0]*a*e,s.y=i[1]*a*e,s.rotation=i[2]*a,s.skew=i[3]*a,s.scaleX=(i[4]-1)*a+1,s.scaleY=(i[5]-1)*a+1),(t||this.dirty)&&(this.dirty=!1,n._transformDirty=!0)},i}(t.MutilpleValueTimelineState);t.BoneAllTimelineState=r;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.BoneTranslateTimelineState]"},e.prototype.init=function(e,i,r){t.prototype.init.call(this,e,i,r),this._valueOffset=this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight,n=i.animationPose;e.dirty>1?(n.x+=this._resultA*r,n.y+=this._resultB*r):1!==r?(n.x=this._resultA*r,n.y=this._resultB*r):(n.x=this._resultA,n.y=this._resultB),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},e}(t.DoubleValueTimelineState);t.BoneTranslateTimelineState=n;var a=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ct(i,e),i.toString=function(){return"[class dragonBones.BoneRotateTimelineState]"},i.prototype._onArriveAtFrame=function(){e.prototype._onArriveAtFrame.call(this),this._isTween&&this._frameIndex===this._frameCount-1&&(this._differenceA=t.Transform.normalizeRadian(this._differenceA),this._differenceB=t.Transform.normalizeRadian(this._differenceB))},i.prototype.init=function(t,i,r){e.prototype.init.call(this,t,i,r),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},i.prototype.fadeOut=function(){this.dirty=!1,this._resultA=t.Transform.normalizeRadian(this._resultA),this._resultB=t.Transform.normalizeRadian(this._resultB)},i.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight,n=i.animationPose;e.dirty>1?(n.rotation+=this._resultA*r,n.skew+=this._resultB*r):1!==r?(n.rotation=this._resultA*r,n.skew=this._resultB*r):(n.rotation=this._resultA,n.skew=this._resultB),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},i}(t.DoubleValueTimelineState);t.BoneRotateTimelineState=a;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.BoneScaleTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._resultA=1,this._resultB=1)},e.prototype.init=function(e,i,r){t.prototype.init.call(this,e,i,r),this._valueOffset=this._animationData.frameFloatOffset,this._valueArray=this._animationData.parent.parent.frameFloatArray},e.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight,n=i.animationPose;e.dirty>1?(n.scaleX+=(this._resultA-1)*r,n.scaleY+=(this._resultB-1)*r):1!==r?(n.scaleX=(this._resultA-1)*r+1,n.scaleY=(this._resultB-1)*r+1):(n.scaleX=this._resultA,n.scaleY=this._resultB),(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},e}(t.DoubleValueTimelineState);t.BoneScaleTimelineState=s;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.SurfaceTimelineState]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},e.prototype.init=function(e,i,r){if(t.prototype.init.call(this,e,i,r),null!==this._timelineData){var n=this._animationData.parent.parent,a=n.frameIntArray,s=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3];this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=a[s+2],this._deformCount=a[s+1],this._deformOffset=a[s+3],this._sameValueOffset=a[s+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=n.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.target.target._deformVertices.length},e.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight,n=i._deformVertices,a=this._valueArray;if(null!==a)for(var s=this._valueCount,o=this._deformOffset,h=this._sameValueOffset,l=this._rd,u=0;u<this._deformCount;++u){var c;c=u<o?a[h+u]:u<o+s?l[u-o]:a[h+u-s],e.dirty>1?n[u]+=c*r:n[u]=c*r}else if(1===e.dirty)for(u=0;u<this._deformCount;++u)n[u]=0;(t||this.dirty)&&(this.dirty=!1,i._transformDirty=!0)},e}(t.MutilpleValueTimelineState);t.SurfaceTimelineState=o;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.AlphaTimelineState]"},e.prototype._onArriveAtFrame=function(){t.prototype._onArriveAtFrame.call(this),null===this._timelineData&&(this._result=1)},e.prototype.init=function(e,i,r){t.prototype.init.call(this,e,i,r),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},e.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight;e.dirty>1?(i._alpha+=this._result*r,i._alpha>1&&(i._alpha=1)):i._alpha=this._result*r,(t||this.dirty)&&(this.dirty=!1,this._armature._alphaDirty=!0)},e}(t.SingleValueTimelineState);t.AlphaTimelineState=h;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.SlotDisplayTimelineState]"},e.prototype._onArriveAtFrame=function(){if(this.playState>=0){var t=this.target,e=null!==this._timelineData?this._frameArray[this._frameOffset+1]:t._slotData.displayIndex;t.displayIndex!==e&&t._setDisplayIndex(e,!0)}},e.prototype._onUpdateFrame=function(){},e}(t.TimelineState);t.SlotDisplayTimelineState=l;var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._current=[0,0,0,0,0,0,0,0],e._difference=[0,0,0,0,0,0,0,0],e._result=[0,0,0,0,0,0,0,0],e}return Ct(e,t),e.toString=function(){return"[class dragonBones.SlotColorTimelineState]"},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null!==this._timelineData){var e=this._animationData.parent.parent,i=e.colorArray,r=e.frameIntArray,n=this._animationData.frameIntOffset+this._frameValueOffset+this._frameIndex,a=r[n];a<0&&(a+=65536),this._isTween?(this._current[0]=i[a++],this._current[1]=i[a++],this._current[2]=i[a++],this._current[3]=i[a++],this._current[4]=i[a++],this._current[5]=i[a++],this._current[6]=i[a++],this._current[7]=i[a++],(a=this._frameIndex===this._frameCount-1?r[this._animationData.frameIntOffset+this._frameValueOffset]:r[n+1])<0&&(a+=65536),this._difference[0]=i[a++]-this._current[0],this._difference[1]=i[a++]-this._current[1],this._difference[2]=i[a++]-this._current[2],this._difference[3]=i[a++]-this._current[3],this._difference[4]=i[a++]-this._current[4],this._difference[5]=i[a++]-this._current[5],this._difference[6]=i[a++]-this._current[6],this._difference[7]=i[a++]-this._current[7]):(this._result[0]=.01*i[a++],this._result[1]=.01*i[a++],this._result[2]=.01*i[a++],this._result[3]=.01*i[a++],this._result[4]=i[a++],this._result[5]=i[a++],this._result[6]=i[a++],this._result[7]=i[a++])}else{var s=this.target.slotData.color;this._result[0]=s.alphaMultiplier,this._result[1]=s.redMultiplier,this._result[2]=s.greenMultiplier,this._result[3]=s.blueMultiplier,this._result[4]=s.alphaOffset,this._result[5]=s.redOffset,this._result[6]=s.greenOffset,this._result[7]=s.blueOffset}},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this),this._isTween&&(this._result[0]=.01*(this._current[0]+this._difference[0]*this._tweenProgress),this._result[1]=.01*(this._current[1]+this._difference[1]*this._tweenProgress),this._result[2]=.01*(this._current[2]+this._difference[2]*this._tweenProgress),this._result[3]=.01*(this._current[3]+this._difference[3]*this._tweenProgress),this._result[4]=this._current[4]+this._difference[4]*this._tweenProgress,this._result[5]=this._current[5]+this._difference[5]*this._tweenProgress,this._result[6]=this._current[6]+this._difference[6]*this._tweenProgress,this._result[7]=this._current[7]+this._difference[7]*this._tweenProgress)},e.prototype.fadeOut=function(){this._isTween=!1},e.prototype.update=function(e){if(t.prototype.update.call(this,e),this._isTween||this.dirty){var i=this.target,r=i._colorTransform;if(0!==this._animationState._fadeState||0!==this._animationState._subFadeState){if(r.alphaMultiplier!==this._result[0]||r.redMultiplier!==this._result[1]||r.greenMultiplier!==this._result[2]||r.blueMultiplier!==this._result[3]||r.alphaOffset!==this._result[4]||r.redOffset!==this._result[5]||r.greenOffset!==this._result[6]||r.blueOffset!==this._result[7]){var n=Math.pow(this._animationState._fadeProgress,4);r.alphaMultiplier+=(this._result[0]-r.alphaMultiplier)*n,r.redMultiplier+=(this._result[1]-r.redMultiplier)*n,r.greenMultiplier+=(this._result[2]-r.greenMultiplier)*n,r.blueMultiplier+=(this._result[3]-r.blueMultiplier)*n,r.alphaOffset+=(this._result[4]-r.alphaOffset)*n,r.redOffset+=(this._result[5]-r.redOffset)*n,r.greenOffset+=(this._result[6]-r.greenOffset)*n,r.blueOffset+=(this._result[7]-r.blueOffset)*n,i._colorDirty=!0}}else this.dirty&&(this.dirty=!1,r.alphaMultiplier===this._result[0]&&r.redMultiplier===this._result[1]&&r.greenMultiplier===this._result[2]&&r.blueMultiplier===this._result[3]&&r.alphaOffset===this._result[4]&&r.redOffset===this._result[5]&&r.greenOffset===this._result[6]&&r.blueOffset===this._result[7]||(r.alphaMultiplier=this._result[0],r.redMultiplier=this._result[1],r.greenMultiplier=this._result[2],r.blueMultiplier=this._result[3],r.alphaOffset=this._result[4],r.redOffset=this._result[5],r.greenOffset=this._result[6],r.blueOffset=this._result[7],i._colorDirty=!0))}},e}(t.TweenTimelineState);t.SlotColorTimelineState=u;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.SlotZIndexTimelineState]"},e.prototype._onArriveAtFrame=function(){if(t.prototype._onArriveAtFrame.call(this),null===this._timelineData){var e=this.target.target;this._result=e.slotData.zIndex}},e.prototype.init=function(e,i,r){t.prototype.init.call(this,e,i,r),this._valueOffset=this._animationData.frameIntOffset,this._valueArray=this._animationData.parent.parent.frameIntArray},e.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight;e.dirty>1?i._zIndex+=this._result*r:i._zIndex=this._result*r,(t||this.dirty)&&(this.dirty=!1,this._armature._zIndexDirty=!0)},e}(t.SingleValueTimelineState);t.SlotZIndexTimelineState=c;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.DeformTimelineState]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),this.geometryOffset=0,this.displayFrame=null,this._deformCount=0,this._deformOffset=0,this._sameValueOffset=0},e.prototype.init=function(e,i,r){if(t.prototype.init.call(this,e,i,r),null!==this._timelineData){var n=this._animationData.frameIntOffset+this._timelineArray[this._timelineData.offset+3],a=this._animationData.parent.parent,s=a.frameIntArray,o=this.target.target;this.geometryOffset=s[n+0],this.geometryOffset<0&&(this.geometryOffset+=65536);for(var h=0,l=o.displayFrameCount;h<l;++h){var u=o.getDisplayFrameAt(h),c=u.getGeometryData();if(null!==c&&c.offset===this.geometryOffset){this.displayFrame=u,this.displayFrame.updateDeformVertices();break}}if(null===this.displayFrame)return void this.returnToPool();this._valueOffset=this._animationData.frameFloatOffset,this._valueCount=s[n+2],this._deformCount=s[n+1],this._deformOffset=s[n+3],this._sameValueOffset=s[n+4]+this._animationData.frameFloatOffset,this._valueScale=this._armature.armatureData.scale,this._valueArray=a.frameFloatArray,this._rd.length=2*this._valueCount}else this._deformCount=this.displayFrame.deformVertices.length},e.prototype.blend=function(t){var e=this.target,i=e.target,r=e.blendWeight,n=this.displayFrame.deformVertices,a=this._valueArray;if(null!==a)for(var s=this._valueCount,o=this._deformOffset,h=this._sameValueOffset,l=this._rd,u=0;u<this._deformCount;++u){var c;c=u<o?a[h+u]:u<o+s?l[u-o]:a[h+u-s],e.dirty>1?n[u]+=c*r:n[u]=c*r}else if(1===e.dirty)for(u=0;u<this._deformCount;++u)n[u]=0;(t||this.dirty)&&(this.dirty=!1,i._geometryData===this.displayFrame.getGeometryData()&&(i._verticesDirty=!0))},e}(t.MutilpleValueTimelineState);t.DeformTimelineState=f;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.IKConstraintTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;if(null!==this._timelineData)e._bendPositive=this._currentA>0,e._weight=this._currentB;else{var i=e._constraintData;e._bendPositive=i.bendPositive,e._weight=i.weight}e.invalidUpdate(),this.dirty=!1},e.prototype.init=function(e,i,r){t.prototype.init.call(this,e,i,r),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=.01,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.DoubleValueTimelineState);t.IKConstraintTimelineState=p;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.AnimationProgressTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.currentTime=this._result*e.totalTime),this.dirty=!1},e.prototype.init=function(e,i,r){t.prototype.init.call(this,e,i,r),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.SingleValueTimelineState);t.AnimationProgressTimelineState=d;var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.AnimationWeightTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.weight=this._result),this.dirty=!1},e.prototype.init=function(e,i,r){t.prototype.init.call(this,e,i,r),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.SingleValueTimelineState);t.AnimationWeightTimelineState=_;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.toString=function(){return"[class dragonBones.AnimationParametersTimelineState]"},e.prototype._onUpdateFrame=function(){t.prototype._onUpdateFrame.call(this);var e=this.target;null!==e._parent&&(e.parameterX=this._resultA,e.parameterY=this._resultB),this.dirty=!1},e.prototype.init=function(e,i,r){t.prototype.init.call(this,e,i,r),this._valueOffset=this._animationData.frameIntOffset,this._valueScale=1e-4,this._valueArray=this._animationData.parent.parent.frameIntArray},e}(t.DoubleValueTimelineState);t.AnimationParametersTimelineState=m}(Mt||(Mt={})),function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ct(e,t),e.actionDataToInstance=function(t,i,r){0===t.type?i.type=e.FRAME_EVENT:i.type=10===t.type?e.FRAME_EVENT:e.SOUND_EVENT,i.name=t.name,i.armature=r,i.actionData=t,i.data=t.data,null!==t.bone&&(i.bone=r.getBone(t.bone.name)),null!==t.slot&&(i.slot=r.getSlot(t.slot.name))},e.toString=function(){return"[class dragonBones.EventObject]"},e.prototype._onClear=function(){this.time=0,this.type="",this.name="",this.armature=null,this.bone=null,this.slot=null,this.animationState=null,this.actionData=null,this.data=null},e.START="start",e.LOOP_COMPLETE="loopComplete",e.COMPLETE="complete",e.FADE_IN="fadeIn",e.FADE_IN_COMPLETE="fadeInComplete",e.FADE_OUT="fadeOut",e.FADE_OUT_COMPLETE="fadeOutComplete",e.FRAME_EVENT="frameEvent",e.SOUND_EVENT="soundEvent",e}(t.BaseObject);t.EventObject=e}(Mt||(Mt={})),function(t){var e=function(){function t(){}return t._getArmatureType=function(t){switch(t.toLowerCase()){case"stage":return 2;case"armature":default:return 0;case"movieclip":return 1}},t._getBoneType=function(t){switch(t.toLowerCase()){case"bone":default:return 0;case"surface":return 1}},t._getPositionMode=function(t){switch(t.toLocaleLowerCase()){case"percent":default:return 1;case"fixed":return 0}},t._getSpacingMode=function(t){switch(t.toLocaleLowerCase()){case"length":default:return 0;case"percent":return 2;case"fixed":return 1}},t._getRotateMode=function(t){switch(t.toLocaleLowerCase()){case"tangent":default:return 0;case"chain":return 1;case"chainscale":return 2}},t._getDisplayType=function(t){switch(t.toLowerCase()){case"image":default:return 0;case"mesh":return 2;case"armature":return 1;case"boundingbox":return 3;case"path":return 4}},t._getBoundingBoxType=function(t){switch(t.toLowerCase()){case"rectangle":default:return 0;case"ellipse":return 1;case"polygon":return 2}},t._getBlendMode=function(t){switch(t.toLowerCase()){case"normal":default:return 0;case"add":return 1;case"alpha":return 2;case"darken":return 3;case"difference":return 4;case"erase":return 5;case"hardlight":return 6;case"invert":return 7;case"layer":return 8;case"lighten":return 9;case"multiply":return 10;case"overlay":return 11;case"screen":return 12;case"subtract":return 13}},t._getAnimationBlendType=function(t){switch(t.toLowerCase()){case"none":default:return 0;case"1d":return 1}},t._getActionType=function(t){switch(t.toLowerCase()){case"play":default:return 0;case"frame":return 10;case"sound":return 11}},t.DATA_VERSION_2_3="2.3",t.DATA_VERSION_3_0="3.0",t.DATA_VERSION_4_0="4.0",t.DATA_VERSION_4_5="4.5",t.DATA_VERSION_5_0="5.0",t.DATA_VERSION_5_5="5.5",t.DATA_VERSION_5_6="5.6",t.DATA_VERSION=t.DATA_VERSION_5_6,t.DATA_VERSIONS=[t.DATA_VERSION_4_0,t.DATA_VERSION_4_5,t.DATA_VERSION_5_0,t.DATA_VERSION_5_5,t.DATA_VERSION_5_6],t.TEXTURE_ATLAS="textureAtlas",t.SUB_TEXTURE="SubTexture",t.FORMAT="format",t.IMAGE_PATH="imagePath",t.WIDTH="width",t.HEIGHT="height",t.ROTATED="rotated",t.FRAME_X="frameX",t.FRAME_Y="frameY",t.FRAME_WIDTH="frameWidth",t.FRAME_HEIGHT="frameHeight",t.DRADON_BONES="dragonBones",t.USER_DATA="userData",t.ARMATURE="armature",t.CANVAS="canvas",t.BONE="bone",t.SURFACE="surface",t.SLOT="slot",t.CONSTRAINT="constraint",t.SKIN="skin",t.DISPLAY="display",t.FRAME="frame",t.IK="ik",t.PATH_CONSTRAINT="path",t.ANIMATION="animation",t.TIMELINE="timeline",t.FFD="ffd",t.TRANSLATE_FRAME="translateFrame",t.ROTATE_FRAME="rotateFrame",t.SCALE_FRAME="scaleFrame",t.DISPLAY_FRAME="displayFrame",t.COLOR_FRAME="colorFrame",t.DEFAULT_ACTIONS="defaultActions",t.ACTIONS="actions",t.EVENTS="events",t.INTS="ints",t.FLOATS="floats",t.STRINGS="strings",t.TRANSFORM="transform",t.PIVOT="pivot",t.AABB="aabb",t.COLOR="color",t.VERSION="version",t.COMPATIBLE_VERSION="compatibleVersion",t.FRAME_RATE="frameRate",t.TYPE="type",t.SUB_TYPE="subType",t.NAME="name",t.PARENT="parent",t.TARGET="target",t.STAGE="stage",t.SHARE="share",t.PATH="path",t.LENGTH="length",t.DISPLAY_INDEX="displayIndex",t.Z_ORDER="zOrder",t.Z_INDEX="zIndex",t.BLEND_MODE="blendMode",t.INHERIT_TRANSLATION="inheritTranslation",t.INHERIT_ROTATION="inheritRotation",t.INHERIT_SCALE="inheritScale",t.INHERIT_REFLECTION="inheritReflection",t.INHERIT_ANIMATION="inheritAnimation",t.INHERIT_DEFORM="inheritDeform",t.SEGMENT_X="segmentX",t.SEGMENT_Y="segmentY",t.BEND_POSITIVE="bendPositive",t.CHAIN="chain",t.WEIGHT="weight",t.BLEND_TYPE="blendType",t.FADE_IN_TIME="fadeInTime",t.PLAY_TIMES="playTimes",t.SCALE="scale",t.OFFSET="offset",t.POSITION="position",t.DURATION="duration",t.TWEEN_EASING="tweenEasing",t.TWEEN_ROTATE="tweenRotate",t.TWEEN_SCALE="tweenScale",t.CLOCK_WISE="clockwise",t.CURVE="curve",t.SOUND="sound",t.EVENT="event",t.ACTION="action",t.X="x",t.Y="y",t.SKEW_X="skX",t.SKEW_Y="skY",t.SCALE_X="scX",t.SCALE_Y="scY",t.VALUE="value",t.ROTATE="rotate",t.SKEW="skew",t.ALPHA="alpha",t.ALPHA_OFFSET="aO",t.RED_OFFSET="rO",t.GREEN_OFFSET="gO",t.BLUE_OFFSET="bO",t.ALPHA_MULTIPLIER="aM",t.RED_MULTIPLIER="rM",t.GREEN_MULTIPLIER="gM",t.BLUE_MULTIPLIER="bM",t.UVS="uvs",t.VERTICES="vertices",t.TRIANGLES="triangles",t.WEIGHTS="weights",t.SLOT_POSE="slotPose",t.BONE_POSE="bonePose",t.BONES="bones",t.POSITION_MODE="positionMode",t.SPACING_MODE="spacingMode",t.ROTATE_MODE="rotateMode",t.SPACING="spacing",t.ROTATE_OFFSET="rotateOffset",t.ROTATE_MIX="rotateMix",t.TRANSLATE_MIX="translateMix",t.TARGET_DISPLAY="targetDisplay",t.CLOSED="closed",t.CONSTANT_SPEED="constantSpeed",t.VERTEX_COUNT="vertexCount",t.LENGTHS="lengths",t.GOTO_AND_PLAY="gotoAndPlay",t.DEFAULT_NAME="default",t}();t.DataParser=e}(Mt||(Mt={})),function(t){var e=function(e){function r(){var i=null!==e&&e.apply(this,arguments)||this;return i._rawTextureAtlasIndex=0,i._rawBones=[],i._data=null,i._armature=null,i._bone=null,i._geometry=null,i._slot=null,i._skin=null,i._mesh=null,i._animation=null,i._timeline=null,i._rawTextureAtlases=null,i._frameValueType=0,i._defaultColorOffset=-1,i._prevClockwise=0,i._prevRotation=0,i._frameDefaultValue=0,i._frameValueScale=1,i._helpMatrixA=new t.Matrix,i._helpMatrixB=new t.Matrix,i._helpTransform=new t.Transform,i._helpColorTransform=new t.ColorTransform,i._helpPoint=new t.Point,i._helpArray=[],i._intArray=[],i._floatArray=[],i._frameIntArray=[],i._frameFloatArray=[],i._frameArray=[],i._timelineArray=[],i._colorArray=[],i._cacheRawMeshes=[],i._cacheMeshes=[],i._actionFrames=[],i._weightSlotPose={},i._weightBonePoses={},i._cacheBones={},i._slotChildActions={},i}return Ct(r,e),r._getBoolean=function(t,e,i){if(e in t){var r=t[e],n=wt(r);if("boolean"===n)return r;if("string"!==n)return!!r;switch(r){case"0":case"NaN":case"":case"false":case"null":case"undefined":return!1;default:return!0}}return i},r._getNumber=function(t,e,i){if(e in t){var r=t[e];return null===r||"NaN"===r?i:+r||0}return i},r._getString=function(t,e,i){if(e in t){var r=t[e];return"string"===wt(r)?r:String(r)}return i},r.prototype._getCurvePoint=function(t,e,i,r,n,a,s,o,h,l){var u=1-h,c=u*u,f=h*h,p=u*c,d=3*h*c,_=3*u*f,m=h*f;l.x=p*t+d*i+_*n+m*s,l.y=p*e+d*r+_*a+m*o},r.prototype._samplingEasingCurve=function(t,e){var i=t.length;if(i%3==1){for(var r=-2,n=0,a=e.length;n<a;++n){for(var s=(n+1)/(a+1);(r+6<i?t[r+6]:1)<s;)r+=6;for(var o=r>=0&&r+6<i,h=o?t[r]:0,l=o?t[r+1]:0,u=t[r+2],c=t[r+3],f=t[r+4],p=t[r+5],d=o?t[r+6]:1,_=o?t[r+7]:1,m=0,y=1;y-m>1e-4;){var g=.5*(y+m);this._getCurvePoint(h,l,u,c,f,p,d,_,g,this._helpPoint),s-this._helpPoint.x>0?m=g:y=g}e[n]=this._helpPoint.y}return!0}for(r=0,n=0,a=e.length;n<a;++n){for(s=(n+1)/(a+1);t[r+6]<s;)r+=6;for(h=t[r],l=t[r+1],u=t[r+2],c=t[r+3],f=t[r+4],p=t[r+5],d=t[r+6],_=t[r+7],m=0,y=1;y-m>1e-4;)g=.5*(y+m),this._getCurvePoint(h,l,u,c,f,p,d,_,g,this._helpPoint),s-this._helpPoint.x>0?m=g:y=g;e[n]=this._helpPoint.y}return!1},r.prototype._parseActionDataInFrame=function(e,i,r,n){t.DataParser.EVENT in e&&this._mergeActionFrame(e[t.DataParser.EVENT],i,10,r,n),t.DataParser.SOUND in e&&this._mergeActionFrame(e[t.DataParser.SOUND],i,11,r,n),t.DataParser.ACTION in e&&this._mergeActionFrame(e[t.DataParser.ACTION],i,0,r,n),t.DataParser.EVENTS in e&&this._mergeActionFrame(e[t.DataParser.EVENTS],i,10,r,n),t.DataParser.ACTIONS in e&&this._mergeActionFrame(e[t.DataParser.ACTIONS],i,0,r,n)},r.prototype._mergeActionFrame=function(t,e,r,n,a){for(var s=this._armature.actions.length,o=this._parseActionData(t,r,n,a),h=0,l=null,u=0,c=o;u<c.length;u++){var f=c[u];this._armature.addAction(f,!1)}0===this._actionFrames.length&&((l=new i).frameStart=0,this._actionFrames.push(l),l=null);for(var p=0,d=this._actionFrames;p<d.length;p++){var _=d[p];if(_.frameStart===e){l=_;break}if(_.frameStart>e)break;h++}null===l&&((l=new i).frameStart=e,this._actionFrames.splice(h,0,l));for(var m=0;m<o.length;++m)l.actions.push(s+m)},r.prototype._parseArmature=function(e,i){var n=t.BaseObject.borrowObject(t.ArmatureData);if(n.name=r._getString(e,t.DataParser.NAME,""),n.frameRate=r._getNumber(e,t.DataParser.FRAME_RATE,this._data.frameRate),n.scale=i,t.DataParser.TYPE in e&&"string"==typeof e[t.DataParser.TYPE]?n.type=t.DataParser._getArmatureType(e[t.DataParser.TYPE]):n.type=r._getNumber(e,t.DataParser.TYPE,0),0===n.frameRate&&(n.frameRate=24),this._armature=n,t.DataParser.CANVAS in e){var a=e[t.DataParser.CANVAS],s=t.BaseObject.borrowObject(t.CanvasData);t.DataParser.COLOR in a?s.hasBackground=!0:s.hasBackground=!1,s.color=r._getNumber(a,t.DataParser.COLOR,0),s.x=r._getNumber(a,t.DataParser.X,0)*n.scale,s.y=r._getNumber(a,t.DataParser.Y,0)*n.scale,s.width=r._getNumber(a,t.DataParser.WIDTH,0)*n.scale,s.height=r._getNumber(a,t.DataParser.HEIGHT,0)*n.scale,n.canvas=s}if(t.DataParser.AABB in e){var o=e[t.DataParser.AABB];n.aabb.x=r._getNumber(o,t.DataParser.X,0)*n.scale,n.aabb.y=r._getNumber(o,t.DataParser.Y,0)*n.scale,n.aabb.width=r._getNumber(o,t.DataParser.WIDTH,0)*n.scale,n.aabb.height=r._getNumber(o,t.DataParser.HEIGHT,0)*n.scale}if(t.DataParser.BONE in e)for(var h=0,l=e[t.DataParser.BONE];h<l.length;h++){var u=l[h],c=r._getString(u,t.DataParser.PARENT,""),f=this._parseBone(u);if(c.length>0){var p=n.getBone(c);null!==p?f.parent=p:(c in this._cacheBones||(this._cacheBones[c]=[]),this._cacheBones[c].push(f))}if(f.name in this._cacheBones){for(var d=0,_=this._cacheBones[f.name];d<_.length;d++)_[d].parent=f;delete this._cacheBones[f.name]}n.addBone(f),this._rawBones.push(f)}if(t.DataParser.IK in e)for(var m=0,y=e[t.DataParser.IK];m<y.length;m++){var g=y[m];(D=this._parseIKConstraint(g))&&n.addConstraint(D)}if(n.sortBones(),t.DataParser.SLOT in e)for(var v=0,b=0,T=e[t.DataParser.SLOT];b<T.length;b++){var x=T[b];n.addSlot(this._parseSlot(x,v++))}if(t.DataParser.SKIN in e)for(var P=0,E=e[t.DataParser.SKIN];P<E.length;P++){var A=E[P];n.addSkin(this._parseSkin(A))}if(t.DataParser.PATH_CONSTRAINT in e)for(var S=0,w=e[t.DataParser.PATH_CONSTRAINT];S<w.length;S++){var D,O=w[S];(D=this._parsePathConstraint(O))&&n.addConstraint(D)}for(var I=0,M=this._cacheRawMeshes.length;I<M;++I){var C=this._cacheRawMeshes[I],R=r._getString(C,t.DataParser.SHARE,"");if(0!==R.length){var F=r._getString(C,t.DataParser.SKIN,t.DataParser.DEFAULT_NAME);0===F.length&&(F=t.DataParser.DEFAULT_NAME);var B=n.getMesh(F,"",R);null!==B&&this._cacheMeshes[I].geometry.shareFrom(B.geometry)}}if(t.DataParser.ANIMATION in e)for(var N=0,L=e[t.DataParser.ANIMATION];N<L.length;N++){var k=L[N],U=this._parseAnimation(k);n.addAnimation(U)}if(t.DataParser.DEFAULT_ACTIONS in e)for(var j=0,X=this._parseActionData(e[t.DataParser.DEFAULT_ACTIONS],0,null,null);j<X.length;j++){var Y=X[j];n.addAction(Y,!0),0===Y.type&&null!==(U=n.getAnimation(Y.name))&&(n.defaultAnimation=U)}if(t.DataParser.ACTIONS in e)for(var G=0,V=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null);G<V.length;G++)Y=V[G],n.addAction(Y,!1);for(var H in this._rawBones.length=0,this._cacheRawMeshes.length=0,this._cacheMeshes.length=0,this._armature=null,this._weightSlotPose)delete this._weightSlotPose[H];for(var H in this._weightBonePoses)delete this._weightBonePoses[H];for(var H in this._cacheBones)delete this._cacheBones[H];for(var H in this._slotChildActions)delete this._slotChildActions[H];return n},r.prototype._parseBone=function(e){if(0===(t.DataParser.TYPE in e&&"string"==typeof e[t.DataParser.TYPE]?t.DataParser._getBoneType(e[t.DataParser.TYPE]):r._getNumber(e,t.DataParser.TYPE,0))){var i=this._armature.scale,n=t.BaseObject.borrowObject(t.BoneData);return n.inheritTranslation=r._getBoolean(e,t.DataParser.INHERIT_TRANSLATION,!0),n.inheritRotation=r._getBoolean(e,t.DataParser.INHERIT_ROTATION,!0),n.inheritScale=r._getBoolean(e,t.DataParser.INHERIT_SCALE,!0),n.inheritReflection=r._getBoolean(e,t.DataParser.INHERIT_REFLECTION,!0),n.length=r._getNumber(e,t.DataParser.LENGTH,0)*i,n.alpha=r._getNumber(e,t.DataParser.ALPHA,1),n.name=r._getString(e,t.DataParser.NAME,""),t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],n.transform,i),n}var a=t.BaseObject.borrowObject(t.SurfaceData);return a.alpha=r._getNumber(e,t.DataParser.ALPHA,1),a.name=r._getString(e,t.DataParser.NAME,""),a.segmentX=r._getNumber(e,t.DataParser.SEGMENT_X,0),a.segmentY=r._getNumber(e,t.DataParser.SEGMENT_Y,0),this._parseGeometry(e,a.geometry),a},r.prototype._parseIKConstraint=function(e){var i=this._armature.getBone(r._getString(e,t.DataParser.BONE,""));if(null===i)return null;var n=this._armature.getBone(r._getString(e,t.DataParser.TARGET,""));if(null===n)return null;var a=r._getNumber(e,t.DataParser.CHAIN,0),s=t.BaseObject.borrowObject(t.IKConstraintData);return s.scaleEnabled=r._getBoolean(e,t.DataParser.SCALE,!1),s.bendPositive=r._getBoolean(e,t.DataParser.BEND_POSITIVE,!0),s.weight=r._getNumber(e,t.DataParser.WEIGHT,1),s.name=r._getString(e,t.DataParser.NAME,""),s.type=0,s.target=n,a>0&&null!==i.parent?(s.root=i.parent,s.bone=i):(s.root=i,s.bone=null),s},r.prototype._parsePathConstraint=function(e){var i=this._armature.getSlot(r._getString(e,t.DataParser.TARGET,""));if(null===i)return null;var n=this._armature.defaultSkin;if(null===n)return null;var a=n.getDisplay(i.name,r._getString(e,t.DataParser.TARGET_DISPLAY,i.name));if(null===a||!(a instanceof t.PathDisplayData))return null;var s=e[t.DataParser.BONES];if(null===s||0===s.length)return null;var o=t.BaseObject.borrowObject(t.PathConstraintData);o.name=r._getString(e,t.DataParser.NAME,""),o.type=1,o.pathSlot=i,o.pathDisplayData=a,o.target=i.parent,o.positionMode=t.DataParser._getPositionMode(r._getString(e,t.DataParser.POSITION_MODE,"")),o.spacingMode=t.DataParser._getSpacingMode(r._getString(e,t.DataParser.SPACING_MODE,"")),o.rotateMode=t.DataParser._getRotateMode(r._getString(e,t.DataParser.ROTATE_MODE,"")),o.position=r._getNumber(e,t.DataParser.POSITION,0),o.spacing=r._getNumber(e,t.DataParser.SPACING,0),o.rotateOffset=r._getNumber(e,t.DataParser.ROTATE_OFFSET,0),o.rotateMix=r._getNumber(e,t.DataParser.ROTATE_MIX,1),o.translateMix=r._getNumber(e,t.DataParser.TRANSLATE_MIX,1);for(var h=0,l=s;h<l.length;h++){var u=l[h],c=this._armature.getBone(u);null!==c&&(o.AddBone(c),null===o.root&&(o.root=c))}return o},r.prototype._parseSlot=function(e,i){var n=t.BaseObject.borrowObject(t.SlotData);return n.displayIndex=r._getNumber(e,t.DataParser.DISPLAY_INDEX,0),n.zOrder=i,n.zIndex=r._getNumber(e,t.DataParser.Z_INDEX,0),n.alpha=r._getNumber(e,t.DataParser.ALPHA,1),n.name=r._getString(e,t.DataParser.NAME,""),n.parent=this._armature.getBone(r._getString(e,t.DataParser.PARENT,"")),t.DataParser.BLEND_MODE in e&&"string"==typeof e[t.DataParser.BLEND_MODE]?n.blendMode=t.DataParser._getBlendMode(e[t.DataParser.BLEND_MODE]):n.blendMode=r._getNumber(e,t.DataParser.BLEND_MODE,0),t.DataParser.COLOR in e?(n.color=t.SlotData.createColor(),this._parseColorTransform(e[t.DataParser.COLOR],n.color)):n.color=t.SlotData.DEFAULT_COLOR,t.DataParser.ACTIONS in e&&(this._slotChildActions[n.name]=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null)),n},r.prototype._parseSkin=function(e){var i=t.BaseObject.borrowObject(t.SkinData);if(i.name=r._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===i.name.length&&(i.name=t.DataParser.DEFAULT_NAME),t.DataParser.SLOT in e){var n=e[t.DataParser.SLOT];this._skin=i;for(var a=0,s=n;a<s.length;a++){var o=s[a],h=r._getString(o,t.DataParser.NAME,""),l=this._armature.getSlot(h);if(null!==l){if(this._slot=l,t.DataParser.DISPLAY in o)for(var u=0,c=o[t.DataParser.DISPLAY];u<c.length;u++){var f=c[u];f?i.addDisplay(h,this._parseDisplay(f)):i.addDisplay(h,null)}this._slot=null}}this._skin=null}return i},r.prototype._parseDisplay=function(e){var i=r._getString(e,t.DataParser.NAME,""),n=r._getString(e,t.DataParser.PATH,""),a=0,s=null;switch(a=t.DataParser.TYPE in e&&"string"==typeof e[t.DataParser.TYPE]?t.DataParser._getDisplayType(e[t.DataParser.TYPE]):r._getNumber(e,t.DataParser.TYPE,a)){case 0:var o=s=t.BaseObject.borrowObject(t.ImageDisplayData);o.name=i,o.path=n.length>0?n:i,this._parsePivot(e,o);break;case 1:var h=s=t.BaseObject.borrowObject(t.ArmatureDisplayData);if(h.name=i,h.path=n.length>0?n:i,h.inheritAnimation=!0,t.DataParser.ACTIONS in e)for(var l=0,u=this._parseActionData(e[t.DataParser.ACTIONS],0,null,null);l<u.length;l++){var c=u[l];h.addAction(c)}else if(this._slot.name in this._slotChildActions){var f=this._skin.getDisplays(this._slot.name);if(null===f?0===this._slot.displayIndex:this._slot.displayIndex===f.length){for(var p=0,d=this._slotChildActions[this._slot.name];p<d.length;p++)c=d[p],h.addAction(c);delete this._slotChildActions[this._slot.name]}}break;case 2:var _=s=t.BaseObject.borrowObject(t.MeshDisplayData);_.geometry.inheritDeform=r._getBoolean(e,t.DataParser.INHERIT_DEFORM,!0),_.name=i,_.path=n.length>0?n:i,t.DataParser.SHARE in e?(_.geometry.data=this._data,this._cacheRawMeshes.push(e),this._cacheMeshes.push(_)):this._parseMesh(e,_);break;case 3:var m=this._parseBoundingBox(e);if(null!==m){var y=s=t.BaseObject.borrowObject(t.BoundingBoxDisplayData);y.name=i,y.path=n.length>0?n:i,y.boundingBox=m}break;case 4:var g=e[t.DataParser.LENGTHS],v=s=t.BaseObject.borrowObject(t.PathDisplayData);v.closed=r._getBoolean(e,t.DataParser.CLOSED,!1),v.constantSpeed=r._getBoolean(e,t.DataParser.CONSTANT_SPEED,!1),v.name=i,v.path=n.length>0?n:i,v.curveLengths.length=g.length;for(var b=0,T=g.length;b<T;++b)v.curveLengths[b]=g[b];this._parsePath(e,v)}return null!==s&&t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],s.transform,this._armature.scale),s},r.prototype._parsePath=function(t,e){this._parseGeometry(t,e.geometry)},r.prototype._parsePivot=function(e,i){if(t.DataParser.PIVOT in e){var n=e[t.DataParser.PIVOT];i.pivot.x=r._getNumber(n,t.DataParser.X,0),i.pivot.y=r._getNumber(n,t.DataParser.Y,0)}else i.pivot.x=.5,i.pivot.y=.5},r.prototype._parseMesh=function(e,i){if(this._parseGeometry(e,i.geometry),t.DataParser.WEIGHTS in e){var r=e[t.DataParser.SLOT_POSE],n=e[t.DataParser.BONE_POSE],a=this._skin.name+"_"+this._slot.name+"_"+i.name;this._weightSlotPose[a]=r,this._weightBonePoses[a]=n}},r.prototype._parseBoundingBox=function(e){var i=null,n=0;switch(n=t.DataParser.SUB_TYPE in e&&"string"==typeof e[t.DataParser.SUB_TYPE]?t.DataParser._getBoundingBoxType(e[t.DataParser.SUB_TYPE]):r._getNumber(e,t.DataParser.SUB_TYPE,n)){case 0:i=t.BaseObject.borrowObject(t.RectangleBoundingBoxData);break;case 1:i=t.BaseObject.borrowObject(t.EllipseBoundingBoxData);break;case 2:i=this._parsePolygonBoundingBox(e)}return null!==i&&(i.color=r._getNumber(e,t.DataParser.COLOR,0),0!==i.type&&1!==i.type||(i.width=r._getNumber(e,t.DataParser.WIDTH,0),i.height=r._getNumber(e,t.DataParser.HEIGHT,0))),i},r.prototype._parsePolygonBoundingBox=function(e){var i=t.BaseObject.borrowObject(t.PolygonBoundingBoxData);if(t.DataParser.VERTICES in e){var r=this._armature.scale,n=e[t.DataParser.VERTICES],a=i.vertices;a.length=n.length;for(var s=0,o=n.length;s<o;s+=2){var h=n[s]*r,l=n[s+1]*r;a[s]=h,a[s+1]=l,0===s?(i.x=h,i.y=l,i.width=h,i.height=l):(h<i.x?i.x=h:h>i.width&&(i.width=h),l<i.y?i.y=l:l>i.height&&(i.height=l))}i.width-=i.x,i.height-=i.y}else console.warn("Data error.\n Please reexport DragonBones Data to fixed the bug.");return i},r.prototype._parseAnimation=function(e){var i=t.BaseObject.borrowObject(t.AnimationData);if(i.blendType=t.DataParser._getAnimationBlendType(r._getString(e,t.DataParser.BLEND_TYPE,"")),i.frameCount=r._getNumber(e,t.DataParser.DURATION,0),i.playTimes=r._getNumber(e,t.DataParser.PLAY_TIMES,1),i.duration=i.frameCount/this._armature.frameRate,i.fadeInTime=r._getNumber(e,t.DataParser.FADE_IN_TIME,0),i.scale=r._getNumber(e,t.DataParser.SCALE,1),i.name=r._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===i.name.length&&(i.name=t.DataParser.DEFAULT_NAME),i.frameIntOffset=this._frameIntArray.length,i.frameFloatOffset=this._frameFloatArray.length,i.frameOffset=this._frameArray.length,this._animation=i,t.DataParser.FRAME in e){var n=e[t.DataParser.FRAME],a=n.length;if(a>0)for(var s=0,o=0;s<a;++s){var h=n[s];this._parseActionDataInFrame(h,o,null,null),o+=r._getNumber(h,t.DataParser.DURATION,1)}}if(t.DataParser.Z_ORDER in e&&(this._animation.zOrderTimeline=this._parseTimeline(e[t.DataParser.Z_ORDER],null,t.DataParser.FRAME,1,0,0,this._parseZOrderFrame)),t.DataParser.BONE in e)for(var l=0,u=e[t.DataParser.BONE];l<u.length;l++){var c=u[l];this._parseBoneTimeline(c)}if(t.DataParser.SLOT in e)for(var f=0,p=e[t.DataParser.SLOT];f<p.length;f++)c=p[f],this._parseSlotTimeline(c);if(t.DataParser.FFD in e)for(var d=0,_=e[t.DataParser.FFD];d<_.length;d++){c=_[d];var m=r._getString(c,t.DataParser.SKIN,t.DataParser.DEFAULT_NAME),y=r._getString(c,t.DataParser.SLOT,""),g=r._getString(c,t.DataParser.NAME,"");0===m.length&&(m=t.DataParser.DEFAULT_NAME),this._slot=this._armature.getSlot(y),this._mesh=this._armature.getMesh(m,y,g),null!==this._slot&&null!==this._mesh&&(null!==(S=this._parseTimeline(c,null,t.DataParser.FRAME,22,2,0,this._parseSlotDeformFrame))&&this._animation.addSlotTimeline(y,S),this._slot=null,this._mesh=null)}if(t.DataParser.IK in e)for(var v=0,b=e[t.DataParser.IK];v<b.length;v++){c=b[v];var T=r._getString(c,t.DataParser.NAME,"");null!==this._armature.getConstraint(T)&&null!==(S=this._parseTimeline(c,null,t.DataParser.FRAME,30,1,2,this._parseIKConstraintFrame))&&this._animation.addConstraintTimeline(T,S)}if(this._actionFrames.length>0&&(this._animation.actionTimeline=this._parseTimeline(null,this._actionFrames,"",0,0,0,this._parseActionFrame),this._actionFrames.length=0),t.DataParser.TIMELINE in e)for(var x=0,P=e[t.DataParser.TIMELINE];x<P.length;x++){c=P[x];var E=r._getNumber(c,t.DataParser.TYPE,0),A=r._getString(c,t.DataParser.NAME,""),S=null;switch(E){case 0:case 1:break;case 20:case 23:case 60:case 24:case 40:case 41:if(20===E?(this._frameValueType=0,this._frameValueScale=1):(this._frameValueType=1,this._frameValueScale=23===E?1:40===E||41===E?1e4:100),this._frameDefaultValue=60===E||24===E||41===E?1:0,40===E&&0!==i.blendType){var w=S=t.BaseObject.borrowObject(t.AnimationTimelineData);w.x=r._getNumber(c,t.DataParser.X,0),w.y=r._getNumber(c,t.DataParser.Y,0)}S=this._parseTimeline(c,null,t.DataParser.FRAME,E,this._frameValueType,1,this._parseSingleValueFrame,S);break;case 11:case 12:case 13:case 30:case 42:30===E||42===E?(this._frameValueType=1,this._frameValueScale=42===E?1e4:100):(this._frameValueScale=12===E?t.Transform.DEG_RAD:1,this._frameValueType=2),this._frameDefaultValue=13===E||30===E?1:0,S=this._parseTimeline(c,null,t.DataParser.FRAME,E,this._frameValueType,2,this._parseDoubleValueFrame);break;case 50:var D=this._armature.getBone(A);if(null===D)continue;this._geometry=D.geometry,S=this._parseTimeline(c,null,t.DataParser.FRAME,E,2,0,this._parseDeformFrame),this._geometry=null;break;case 22:for(var m in this._geometry=null,this._armature.skins){var O=this._armature.skins[m];for(var I in O.displays)for(var M=0,C=O.displays[I];M<C.length;M++){var R=C[M];if(null!==R&&R.name===A){this._geometry=R.geometry;break}}}if(null===this._geometry)continue;S=this._parseTimeline(c,null,t.DataParser.FRAME,E,2,0,this._parseDeformFrame),this._geometry=null;break;case 21:S=this._parseTimeline(c,null,t.DataParser.FRAME,E,1,1,this._parseSlotColorFrame)}if(null!==S)switch(E){case 0:case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(A,S);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(A,S);break;case 30:this._animation.addConstraintTimeline(A,S);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(A,S)}}return this._animation=null,i},r.prototype._parseTimeline=function(e,n,a,s,o,h,l,u){if(void 0===u&&(u=null),null!==e&&a.length>0&&a in e&&(n=e[a]),null===n)return null;var c=n.length;if(0===c)return null;var f=this._frameIntArray.length,p=this._frameFloatArray.length,d=this._timelineArray.length;switch(null===u&&(u=t.BaseObject.borrowObject(t.TimelineData)),u.type=s,u.offset=d,this._frameValueType=o,this._timeline=u,this._timelineArray.length+=5+c,null!==e?(this._timelineArray[d+0]=Math.round(100*r._getNumber(e,t.DataParser.SCALE,1)),this._timelineArray[d+1]=Math.round(100*r._getNumber(e,t.DataParser.OFFSET,0))):(this._timelineArray[d+0]=100,this._timelineArray[d+1]=0),this._timelineArray[d+2]=c,this._timelineArray[d+3]=h,this._frameValueType){case 0:this._timelineArray[d+4]=0;break;case 1:this._timelineArray[d+4]=f-this._animation.frameIntOffset;break;case 2:this._timelineArray[d+4]=p-this._animation.frameFloatOffset}if(1===c)u.frameIndicesOffset=-1,this._timelineArray[d+5+0]=l.call(this,n[0],0,0)-this._animation.frameOffset;else{var _=this._animation.frameCount+1,m=this._data.frameIndices,y=m.length;m.length+=_,u.frameIndicesOffset=y;for(var g=0,v=0,b=0,T=0;g<_;++g){if(b+T<=g&&v<c){var x=n[v];b=g,T=v===c-1?this._animation.frameCount-b:x instanceof i?this._actionFrames[v+1].frameStart-b:r._getNumber(x,t.DataParser.DURATION,1),this._timelineArray[d+5+v]=l.call(this,x,b,T)-this._animation.frameOffset,v++}m[y+g]=v-1}}return this._timeline=null,u},r.prototype._parseBoneTimeline=function(e){var i,n=this._armature.getBone(r._getString(e,t.DataParser.NAME,""));null!==n&&(this._bone=n,this._slot=this._armature.getSlot(this._bone.name),t.DataParser.TRANSLATE_FRAME in e&&(this._frameDefaultValue=0,this._frameValueScale=1,null!==(i=this._parseTimeline(e,null,t.DataParser.TRANSLATE_FRAME,11,2,2,this._parseDoubleValueFrame))&&this._animation.addBoneTimeline(n.name,i)),t.DataParser.ROTATE_FRAME in e&&(this._frameDefaultValue=0,this._frameValueScale=1,null!==(i=this._parseTimeline(e,null,t.DataParser.ROTATE_FRAME,12,2,2,this._parseBoneRotateFrame))&&this._animation.addBoneTimeline(n.name,i)),t.DataParser.SCALE_FRAME in e&&(this._frameDefaultValue=1,this._frameValueScale=1,null!==(i=this._parseTimeline(e,null,t.DataParser.SCALE_FRAME,13,2,2,this._parseBoneScaleFrame))&&this._animation.addBoneTimeline(n.name,i)),t.DataParser.FRAME in e&&null!==(i=this._parseTimeline(e,null,t.DataParser.FRAME,10,2,6,this._parseBoneAllFrame))&&this._animation.addBoneTimeline(n.name,i),this._bone=null,this._slot=null)},r.prototype._parseSlotTimeline=function(e){var i=this._armature.getSlot(r._getString(e,t.DataParser.NAME,""));if(null!==i){var n,a;this._slot=i,n=t.DataParser.DISPLAY_FRAME in e?this._parseTimeline(e,null,t.DataParser.DISPLAY_FRAME,20,0,0,this._parseSlotDisplayFrame):this._parseTimeline(e,null,t.DataParser.FRAME,20,0,0,this._parseSlotDisplayFrame),a=t.DataParser.COLOR_FRAME in e?this._parseTimeline(e,null,t.DataParser.COLOR_FRAME,21,1,1,this._parseSlotColorFrame):this._parseTimeline(e,null,t.DataParser.FRAME,21,1,1,this._parseSlotColorFrame),null!==n&&this._animation.addSlotTimeline(i.name,n),null!==a&&this._animation.addSlotTimeline(i.name,a),this._slot=null}},r.prototype._parseFrame=function(t,e,i){var r=this._frameArray.length;return this._frameArray.length+=1,this._frameArray[r+0]=e,r},r.prototype._parseTweenFrame=function(e,i,n){var a=this._parseFrame(e,i,n);if(n>0)if(t.DataParser.CURVE in e){var s=n+1;this._helpArray.length=s;var o=this._samplingEasingCurve(e[t.DataParser.CURVE],this._helpArray);this._frameArray.length+=2+this._helpArray.length,this._frameArray[a+1]=2,this._frameArray[a+2]=o?s:-s;for(var h=0;h<s;++h)this._frameArray[a+3+h]=Math.round(1e4*this._helpArray[h])}else{var l=-2;t.DataParser.TWEEN_EASING in e&&(l=r._getNumber(e,t.DataParser.TWEEN_EASING,-2)),-2===l?(this._frameArray.length+=1,this._frameArray[a+1]=0):0===l?(this._frameArray.length+=1,this._frameArray[a+1]=1):l<0?(this._frameArray.length+=2,this._frameArray[a+1]=3,this._frameArray[a+2]=Math.round(100*-l)):l<=1?(this._frameArray.length+=2,this._frameArray[a+1]=4,this._frameArray[a+2]=Math.round(100*l)):(this._frameArray.length+=2,this._frameArray[a+1]=5,this._frameArray[a+2]=Math.round(100*l-100))}else this._frameArray.length+=1,this._frameArray[a+1]=0;return a},r.prototype._parseSingleValueFrame=function(e,i,n){var a=0;switch(this._frameValueType){case 0:a=this._parseFrame(e,i,n),this._frameArray.length+=1,this._frameArray[a+1]=r._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue);break;case 1:a=this._parseTweenFrame(e,i,n);var s=this._frameIntArray.length;this._frameIntArray.length+=1,this._frameIntArray[s]=Math.round(r._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale);break;case 2:a=this._parseTweenFrame(e,i,n),s=this._frameFloatArray.length,this._frameFloatArray.length+=1,this._frameFloatArray[s]=r._getNumber(e,t.DataParser.VALUE,this._frameDefaultValue)*this._frameValueScale}return a},r.prototype._parseDoubleValueFrame=function(e,i,n){var a=0;switch(this._frameValueType){case 0:a=this._parseFrame(e,i,n),this._frameArray.length+=2,this._frameArray[a+1]=r._getNumber(e,t.DataParser.X,this._frameDefaultValue),this._frameArray[a+2]=r._getNumber(e,t.DataParser.Y,this._frameDefaultValue);break;case 1:a=this._parseTweenFrame(e,i,n);var s=this._frameIntArray.length;this._frameIntArray.length+=2,this._frameIntArray[s]=Math.round(r._getNumber(e,t.DataParser.X,this._frameDefaultValue)*this._frameValueScale),this._frameIntArray[s+1]=Math.round(r._getNumber(e,t.DataParser.Y,this._frameDefaultValue)*this._frameValueScale);break;case 2:a=this._parseTweenFrame(e,i,n),s=this._frameFloatArray.length,this._frameFloatArray.length+=2,this._frameFloatArray[s]=r._getNumber(e,t.DataParser.X,this._frameDefaultValue)*this._frameValueScale,this._frameFloatArray[s+1]=r._getNumber(e,t.DataParser.Y,this._frameDefaultValue)*this._frameValueScale}return a},r.prototype._parseActionFrame=function(t,e,i){var r=this._frameArray.length,n=t.actions.length;this._frameArray.length+=2+n,this._frameArray[r+0]=e,this._frameArray[r+0+1]=n;for(var a=0;a<n;++a)this._frameArray[r+0+2+a]=t.actions[a];return r},r.prototype._parseZOrderFrame=function(e,i,r){var n=this._parseFrame(e,i,r);if(t.DataParser.Z_ORDER in e){var a=e[t.DataParser.Z_ORDER];if(a.length>0){for(var s=this._armature.sortedSlots.length,o=new Array(s-a.length/2),h=new Array(s),l=0;l<o.length;++l)o[l]=0;for(var u=0;u<s;++u)h[u]=-1;for(var c=0,f=0,p=0,d=a.length;p<d;p+=2){for(var _=a[p],m=a[p+1];c!==_;)o[f++]=c++;h[c+m]=c++}for(;c<s;)o[f++]=c++;this._frameArray.length+=1+s,this._frameArray[n+1]=s;for(var y=s;y--;)-1===h[y]?this._frameArray[n+2+y]=o[--f]||0:this._frameArray[n+2+y]=h[y]||0;return n}}return this._frameArray.length+=1,this._frameArray[n+1]=0,n},r.prototype._parseBoneAllFrame=function(e,i,n){this._helpTransform.identity(),t.DataParser.TRANSFORM in e&&this._parseTransform(e[t.DataParser.TRANSFORM],this._helpTransform,1);var a=this._helpTransform.rotation;0!==i&&(0===this._prevClockwise?a=this._prevRotation+t.Transform.normalizeRadian(a-this._prevRotation):((this._prevClockwise>0?a>=this._prevRotation:a<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),a=this._prevRotation+a-this._prevRotation+t.Transform.PI_D*this._prevClockwise)),this._prevClockwise=r._getNumber(e,t.DataParser.TWEEN_ROTATE,0),this._prevRotation=a;var s=this._parseTweenFrame(e,i,n),o=this._frameFloatArray.length;return this._frameFloatArray.length+=6,this._frameFloatArray[o++]=this._helpTransform.x,this._frameFloatArray[o++]=this._helpTransform.y,this._frameFloatArray[o++]=a,this._frameFloatArray[o++]=this._helpTransform.skew,this._frameFloatArray[o++]=this._helpTransform.scaleX,this._frameFloatArray[o++]=this._helpTransform.scaleY,this._parseActionDataInFrame(e,i,this._bone,this._slot),s},r.prototype._parseBoneTranslateFrame=function(e,i,n){var a=this._parseTweenFrame(e,i,n),s=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[s++]=r._getNumber(e,t.DataParser.X,0),this._frameFloatArray[s++]=r._getNumber(e,t.DataParser.Y,0),a},r.prototype._parseBoneRotateFrame=function(e,i,n){var a=r._getNumber(e,t.DataParser.ROTATE,0)*t.Transform.DEG_RAD;0!==i&&(0===this._prevClockwise?a=this._prevRotation+t.Transform.normalizeRadian(a-this._prevRotation):((this._prevClockwise>0?a>=this._prevRotation:a<=this._prevRotation)&&(this._prevClockwise=this._prevClockwise>0?this._prevClockwise-1:this._prevClockwise+1),a=this._prevRotation+a-this._prevRotation+t.Transform.PI_D*this._prevClockwise)),this._prevClockwise=r._getNumber(e,t.DataParser.CLOCK_WISE,0),this._prevRotation=a;var s=this._parseTweenFrame(e,i,n),o=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[o++]=a,this._frameFloatArray[o++]=r._getNumber(e,t.DataParser.SKEW,0)*t.Transform.DEG_RAD,s},r.prototype._parseBoneScaleFrame=function(e,i,n){var a=this._parseTweenFrame(e,i,n),s=this._frameFloatArray.length;return this._frameFloatArray.length+=2,this._frameFloatArray[s++]=r._getNumber(e,t.DataParser.X,1),this._frameFloatArray[s++]=r._getNumber(e,t.DataParser.Y,1),a},r.prototype._parseSlotDisplayFrame=function(e,i,n){var a=this._parseFrame(e,i,n);return this._frameArray.length+=1,t.DataParser.VALUE in e?this._frameArray[a+1]=r._getNumber(e,t.DataParser.VALUE,0):this._frameArray[a+1]=r._getNumber(e,t.DataParser.DISPLAY_INDEX,0),this._parseActionDataInFrame(e,i,this._slot.parent,this._slot),a},r.prototype._parseSlotColorFrame=function(e,i,r){var n=this._parseTweenFrame(e,i,r),a=-1;if(t.DataParser.VALUE in e||t.DataParser.COLOR in e){var s=t.DataParser.VALUE in e?e[t.DataParser.VALUE]:e[t.DataParser.COLOR];for(var o in s){this._parseColorTransform(s,this._helpColorTransform),a=this._colorArray.length,this._colorArray.length+=8,this._colorArray[a++]=Math.round(100*this._helpColorTransform.alphaMultiplier),this._colorArray[a++]=Math.round(100*this._helpColorTransform.redMultiplier),this._colorArray[a++]=Math.round(100*this._helpColorTransform.greenMultiplier),this._colorArray[a++]=Math.round(100*this._helpColorTransform.blueMultiplier),this._colorArray[a++]=Math.round(this._helpColorTransform.alphaOffset),this._colorArray[a++]=Math.round(this._helpColorTransform.redOffset),this._colorArray[a++]=Math.round(this._helpColorTransform.greenOffset),this._colorArray[a++]=Math.round(this._helpColorTransform.blueOffset),a-=8;break}}a<0&&(this._defaultColorOffset<0&&(this._defaultColorOffset=a=this._colorArray.length,this._colorArray.length+=8,this._colorArray[a++]=100,this._colorArray[a++]=100,this._colorArray[a++]=100,this._colorArray[a++]=100,this._colorArray[a++]=0,this._colorArray[a++]=0,this._colorArray[a++]=0,this._colorArray[a++]=0),a=this._defaultColorOffset);var h=this._frameIntArray.length;return this._frameIntArray.length+=1,this._frameIntArray[h]=a,n},r.prototype._parseSlotDeformFrame=function(e,i,n){var a=this._frameFloatArray.length,s=this._parseTweenFrame(e,i,n),o=t.DataParser.VERTICES in e?e[t.DataParser.VERTICES]:null,h=r._getNumber(e,t.DataParser.OFFSET,0),l=this._intArray[this._mesh.geometry.offset+0],u=this._mesh.parent.name+"_"+this._slot.name+"_"+this._mesh.name,c=this._mesh.geometry.weight,f=0,p=0,d=0,_=0;if(null!==c){var m=this._weightSlotPose[u];this._helpMatrixA.copyFromArray(m,0),this._frameFloatArray.length+=2*c.count,d=c.offset+2+c.bones.length}else this._frameFloatArray.length+=2*l;for(var y=0;y<2*l;y+=2)if(null===o?(f=0,p=0):(f=y<h||y-h>=o.length?0:o[y-h],p=y+1<h||y+1-h>=o.length?0:o[y+1-h]),null!==c){var g=this._weightBonePoses[u],v=this._intArray[d++];this._helpMatrixA.transformPoint(f,p,this._helpPoint,!0),f=this._helpPoint.x,p=this._helpPoint.y;for(var b=0;b<v;++b){var T=this._intArray[d++];this._helpMatrixB.copyFromArray(g,7*T+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(f,p,this._helpPoint,!0),this._frameFloatArray[a+_++]=this._helpPoint.x,this._frameFloatArray[a+_++]=this._helpPoint.y}}else this._frameFloatArray[a+y]=f,this._frameFloatArray[a+y+1]=p;if(0===i){var x=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[x+0]=this._mesh.geometry.offset,this._frameIntArray[x+1]=this._frameFloatArray.length-a,this._frameIntArray[x+2]=this._frameFloatArray.length-a,this._frameIntArray[x+3]=0,this._frameIntArray[x+4]=a-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=x-this._animation.frameIntOffset}return s},r.prototype._parseIKConstraintFrame=function(e,i,n){var a=this._parseTweenFrame(e,i,n),s=this._frameIntArray.length;return this._frameIntArray.length+=2,this._frameIntArray[s++]=r._getBoolean(e,t.DataParser.BEND_POSITIVE,!0)?1:0,this._frameIntArray[s++]=Math.round(100*r._getNumber(e,t.DataParser.WEIGHT,1)),a},r.prototype._parseActionData=function(e,i,n,a){var s=new Array;if("string"==typeof e)(u=t.BaseObject.borrowObject(t.ActionData)).type=i,u.name=e,u.bone=n,u.slot=a,s.push(u);else if(e instanceof Array)for(var o=0,h=e;o<h.length;o++){var l=h[o],u=t.BaseObject.borrowObject(t.ActionData);if(t.DataParser.GOTO_AND_PLAY in l?(u.type=0,u.name=r._getString(l,t.DataParser.GOTO_AND_PLAY,"")):(t.DataParser.TYPE in l&&"string"==typeof l[t.DataParser.TYPE]?u.type=t.DataParser._getActionType(l[t.DataParser.TYPE]):u.type=r._getNumber(l,t.DataParser.TYPE,i),u.name=r._getString(l,t.DataParser.NAME,"")),t.DataParser.BONE in l){var c=r._getString(l,t.DataParser.BONE,"");u.bone=this._armature.getBone(c)}else u.bone=n;if(t.DataParser.SLOT in l){var f=r._getString(l,t.DataParser.SLOT,"");u.slot=this._armature.getSlot(f)}else u.slot=a;var p=null;if(t.DataParser.INTS in l){null===p&&(p=t.BaseObject.borrowObject(t.UserData));for(var d=0,_=l[t.DataParser.INTS];d<_.length;d++){var m=_[d];p.addInt(m)}}if(t.DataParser.FLOATS in l){null===p&&(p=t.BaseObject.borrowObject(t.UserData));for(var y=0,g=l[t.DataParser.FLOATS];y<g.length;y++)m=g[y],p.addFloat(m)}if(t.DataParser.STRINGS in l){null===p&&(p=t.BaseObject.borrowObject(t.UserData));for(var v=0,b=l[t.DataParser.STRINGS];v<b.length;v++)m=b[v],p.addString(m)}u.data=p,s.push(u)}return s},r.prototype._parseDeformFrame=function(e,i,n){var a=this._frameFloatArray.length,s=this._parseTweenFrame(e,i,n),o=t.DataParser.VERTICES in e?e[t.DataParser.VERTICES]:t.DataParser.VALUE in e?e[t.DataParser.VALUE]:null,h=r._getNumber(e,t.DataParser.OFFSET,0),l=this._intArray[this._geometry.offset+0],u=0,c=0;if(null!==this._geometry.weight);else{this._frameFloatArray.length+=2*l;for(var f=0;f<2*l;f+=2)null!==o?(u=f<h||f-h>=o.length?0:o[f-h],c=f+1<h||f+1-h>=o.length?0:o[f+1-h]):(u=0,c=0),this._frameFloatArray[a+f]=u,this._frameFloatArray[a+f+1]=c}if(0===i){var p=this._frameIntArray.length;this._frameIntArray.length+=5,this._frameIntArray[p+0]=this._geometry.offset,this._frameIntArray[p+1]=this._frameFloatArray.length-a,this._frameIntArray[p+2]=this._frameFloatArray.length-a,this._frameIntArray[p+3]=0,this._frameIntArray[p+4]=a-this._animation.frameFloatOffset,this._timelineArray[this._timeline.offset+3]=p-this._animation.frameIntOffset}return s},r.prototype._parseTransform=function(e,i,n){i.x=r._getNumber(e,t.DataParser.X,0)*n,i.y=r._getNumber(e,t.DataParser.Y,0)*n,t.DataParser.ROTATE in e||t.DataParser.SKEW in e?(i.rotation=t.Transform.normalizeRadian(r._getNumber(e,t.DataParser.ROTATE,0)*t.Transform.DEG_RAD),i.skew=t.Transform.normalizeRadian(r._getNumber(e,t.DataParser.SKEW,0)*t.Transform.DEG_RAD)):(t.DataParser.SKEW_X in e||t.DataParser.SKEW_Y in e)&&(i.rotation=t.Transform.normalizeRadian(r._getNumber(e,t.DataParser.SKEW_Y,0)*t.Transform.DEG_RAD),i.skew=t.Transform.normalizeRadian(r._getNumber(e,t.DataParser.SKEW_X,0)*t.Transform.DEG_RAD)-i.rotation),i.scaleX=r._getNumber(e,t.DataParser.SCALE_X,1),i.scaleY=r._getNumber(e,t.DataParser.SCALE_Y,1)},r.prototype._parseColorTransform=function(e,i){i.alphaMultiplier=.01*r._getNumber(e,t.DataParser.ALPHA_MULTIPLIER,100),i.redMultiplier=.01*r._getNumber(e,t.DataParser.RED_MULTIPLIER,100),i.greenMultiplier=.01*r._getNumber(e,t.DataParser.GREEN_MULTIPLIER,100),i.blueMultiplier=.01*r._getNumber(e,t.DataParser.BLUE_MULTIPLIER,100),i.alphaOffset=r._getNumber(e,t.DataParser.ALPHA_OFFSET,0),i.redOffset=r._getNumber(e,t.DataParser.RED_OFFSET,0),i.greenOffset=r._getNumber(e,t.DataParser.GREEN_OFFSET,0),i.blueOffset=r._getNumber(e,t.DataParser.BLUE_OFFSET,0)},r.prototype._parseGeometry=function(e,i){var r=e[t.DataParser.VERTICES],n=Math.floor(r.length/2),a=0,s=this._intArray.length,o=this._floatArray.length;i.offset=s,i.data=this._data,this._intArray.length+=4,this._intArray[s+0]=n,this._intArray[s+2]=o,this._intArray[s+3]=-1,this._floatArray.length+=2*n;for(var h=0,l=2*n;h<l;++h)this._floatArray[o+h]=r[h];if(t.DataParser.TRIANGLES in e){var u=e[t.DataParser.TRIANGLES];for(a=Math.floor(u.length/3),this._intArray.length+=3*a,h=0,l=3*a;h<l;++h)this._intArray[s+4+h]=u[h]}if(this._intArray[s+1]=a,t.DataParser.UVS in e){var c=e[t.DataParser.UVS],f=o+2*n;for(this._floatArray.length+=2*n,h=0,l=2*n;h<l;++h)this._floatArray[f+h]=c[h]}if(t.DataParser.WEIGHTS in e){var p=e[t.DataParser.WEIGHTS],d=Math.floor(p.length-n)/2,_=this._intArray.length,m=this._floatArray.length,y=0,g=this._armature.sortedBones,v=t.BaseObject.borrowObject(t.WeightData);if(v.count=d,v.offset=_,this._intArray.length+=2+y+n+d,this._intArray[_+1]=m,t.DataParser.BONE_POSE in e){var b=e[t.DataParser.SLOT_POSE],T=e[t.DataParser.BONE_POSE],x=new Array;for(y=Math.floor(T.length/7),x.length=y,h=0;h<y;++h){var P=T[7*h],E=this._rawBones[P];v.addBone(E),x[h]=P,this._intArray[_+2+h]=g.indexOf(E)}this._floatArray.length+=3*d,this._helpMatrixA.copyFromArray(b,0),h=0;for(var A=0,S=_+2+y,w=m;h<n;++h){var D=2*h,O=this._intArray[S++]=p[A++],I=this._floatArray[o+D],M=this._floatArray[o+D+1];this._helpMatrixA.transformPoint(I,M,this._helpPoint),I=this._helpPoint.x,M=this._helpPoint.y;for(var C=0;C<O;++C){P=p[A++];var R=x.indexOf(P);this._helpMatrixB.copyFromArray(T,7*R+1),this._helpMatrixB.invert(),this._helpMatrixB.transformPoint(I,M,this._helpPoint),this._intArray[S++]=R,this._floatArray[w++]=p[A++],this._floatArray[w++]=this._helpPoint.x,this._floatArray[w++]=this._helpPoint.y}}}else{var F=e[t.DataParser.BONES];for(y=F.length,h=0;h<y;h++)P=F[h],E=this._rawBones[P],v.addBone(E),this._intArray[_+2+h]=g.indexOf(E);this._floatArray.length+=3*d,h=0,A=0,w=0,S=_+2+y;for(var B=m;h<d;h++)for(O=p[A++],this._intArray[S++]=O,C=0;C<O;C++){R=p[A++];var N=p[A++];I=r[w++],M=r[w++],this._intArray[S++]=F.indexOf(R),this._floatArray[B++]=N,this._floatArray[B++]=I,this._floatArray[B++]=M}}i.weight=v}},r.prototype._parseArray=function(t){this._intArray.length=0,this._floatArray.length=0,this._frameIntArray.length=0,this._frameFloatArray.length=0,this._frameArray.length=0,this._timelineArray.length=0,this._colorArray.length=0},r.prototype._modifyArray=function(){this._intArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._intArray.push(0),this._frameIntArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._frameIntArray.push(0),this._frameArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._frameArray.push(0),this._timelineArray.length%Uint16Array.BYTES_PER_ELEMENT!=0&&this._timelineArray.push(0),this._timelineArray.length%Int16Array.BYTES_PER_ELEMENT!=0&&this._colorArray.push(0);for(var t=this._intArray.length*Int16Array.BYTES_PER_ELEMENT,e=this._floatArray.length*Float32Array.BYTES_PER_ELEMENT,i=this._frameIntArray.length*Int16Array.BYTES_PER_ELEMENT,r=this._frameFloatArray.length*Float32Array.BYTES_PER_ELEMENT,n=this._frameArray.length*Int16Array.BYTES_PER_ELEMENT,a=this._timelineArray.length*Uint16Array.BYTES_PER_ELEMENT,s=this._colorArray.length*Int16Array.BYTES_PER_ELEMENT,o=new ArrayBuffer(t+e+i+r+n+a+s),h=new Int16Array(o,0,this._intArray.length),l=new Float32Array(o,t,this._floatArray.length),u=new Int16Array(o,t+e,this._frameIntArray.length),c=new Float32Array(o,t+e+i,this._frameFloatArray.length),f=new Int16Array(o,t+e+i+r,this._frameArray.length),p=new Uint16Array(o,t+e+i+r+n,this._timelineArray.length),d=new Int16Array(o,t+e+i+r+n+a,this._colorArray.length),_=0,m=this._intArray.length;_<m;++_)h[_]=this._intArray[_];for(_=0,m=this._floatArray.length;_<m;++_)l[_]=this._floatArray[_];for(_=0,m=this._frameIntArray.length;_<m;++_)u[_]=this._frameIntArray[_];for(_=0,m=this._frameFloatArray.length;_<m;++_)c[_]=this._frameFloatArray[_];for(_=0,m=this._frameArray.length;_<m;++_)f[_]=this._frameArray[_];for(_=0,m=this._timelineArray.length;_<m;++_)p[_]=this._timelineArray[_];for(_=0,m=this._colorArray.length;_<m;++_)d[_]=this._colorArray[_];this._data.binary=o,this._data.intArray=h,this._data.floatArray=l,this._data.frameIntArray=u,this._data.frameFloatArray=c,this._data.frameArray=f,this._data.timelineArray=p,this._data.colorArray=d,this._defaultColorOffset=-1},r.prototype.parseDragonBonesData=function(e,i){void 0===i&&(i=1),console.assert(null!=e,"Data error.");var n=r._getString(e,t.DataParser.VERSION,""),a=r._getString(e,t.DataParser.COMPATIBLE_VERSION,"");if(t.DataParser.DATA_VERSIONS.indexOf(n)>=0||t.DataParser.DATA_VERSIONS.indexOf(a)>=0){var s=t.BaseObject.borrowObject(t.DragonBonesData);if(s.version=n,s.name=r._getString(e,t.DataParser.NAME,""),s.frameRate=r._getNumber(e,t.DataParser.FRAME_RATE,24),0===s.frameRate&&(s.frameRate=24),t.DataParser.ARMATURE in e){this._data=s,this._parseArray(e);for(var o=0,h=e[t.DataParser.ARMATURE];o<h.length;o++){var l=h[o];s.addArmature(this._parseArmature(l,i))}this._data.binary||this._modifyArray(),t.DataParser.STAGE in e?s.stage=s.getArmature(r._getString(e,t.DataParser.STAGE,"")):s.armatureNames.length>0&&(s.stage=s.getArmature(s.armatureNames[0])),this._data=null}return t.DataParser.TEXTURE_ATLAS in e&&(this._rawTextureAtlases=e[t.DataParser.TEXTURE_ATLAS]),s}return console.assert(!1,"Nonsupport data version: "+n+"\nPlease convert DragonBones data to support version.\nRead more: https://github.com/DragonBones/Tools/"),null},r.prototype.parseTextureAtlasData=function(e,i,n){if(void 0===n&&(n=1),console.assert(void 0!==e),null===e){if(null===this._rawTextureAtlases||0===this._rawTextureAtlases.length)return!1;var a=this._rawTextureAtlases[this._rawTextureAtlasIndex++];return this.parseTextureAtlasData(a,i,n),this._rawTextureAtlasIndex>=this._rawTextureAtlases.length&&(this._rawTextureAtlasIndex=0,this._rawTextureAtlases=null),!0}if(i.width=r._getNumber(e,t.DataParser.WIDTH,0),i.height=r._getNumber(e,t.DataParser.HEIGHT,0),i.scale=1===n?1/r._getNumber(e,t.DataParser.SCALE,1):n,i.name=r._getString(e,t.DataParser.NAME,""),i.imagePath=r._getString(e,t.DataParser.IMAGE_PATH,""),t.DataParser.SUB_TEXTURE in e)for(var s=e[t.DataParser.SUB_TEXTURE],o=0,h=s.length;o<h;++o){var l=s[o],u=r._getNumber(l,t.DataParser.FRAME_WIDTH,-1),c=r._getNumber(l,t.DataParser.FRAME_HEIGHT,-1),f=i.createTexture();f.rotated=r._getBoolean(l,t.DataParser.ROTATED,!1),f.name=r._getString(l,t.DataParser.NAME,""),f.region.x=r._getNumber(l,t.DataParser.X,0),f.region.y=r._getNumber(l,t.DataParser.Y,0),f.region.width=r._getNumber(l,t.DataParser.WIDTH,0),f.region.height=r._getNumber(l,t.DataParser.HEIGHT,0),u>0&&c>0&&(f.frame=t.TextureData.createRectangle(),f.frame.x=r._getNumber(l,t.DataParser.FRAME_X,0),f.frame.y=r._getNumber(l,t.DataParser.FRAME_Y,0),f.frame.width=u,f.frame.height=c),i.addTexture(f)}return!0},r.getInstance=function(){return null===r._objectDataParserInstance&&(r._objectDataParserInstance=new r),r._objectDataParserInstance},r._objectDataParserInstance=null,r}(t.DataParser);t.ObjectDataParser=e;var i=function(){this.frameStart=0,this.actions=[]};t.ActionFrame=i}(Mt||(Mt={})),function(t){var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return Ct(i,e),i.prototype._inRange=function(t,e,i){return e<=t&&t<=i},i.prototype._decodeUTF8=function(t){for(var e,i=0,r="",n=0,a=0,s=0,o=0;t.length>i;){var h=t[i++];if(-1===h)e=0!==a?65533:-1;else if(0===a)this._inRange(h,0,127)?e=h:(this._inRange(h,194,223)?(a=1,o=128,n=h-192):this._inRange(h,224,239)?(a=2,o=2048,n=h-224):this._inRange(h,240,244)&&(a=3,o=65536,n=h-240),n*=Math.pow(64,a),e=null);else if(this._inRange(h,128,191))if(s+=1,n+=(h-128)*Math.pow(64,a-s),s!==a)e=null;else{var l=n,u=o;n=0,a=0,s=0,o=0,e=this._inRange(l,u,1114111)&&!this._inRange(l,55296,57343)?l:h}else n=0,a=0,s=0,o=0,i--,e=h;null!==e&&-1!==e&&(e<=65535?e>0&&(r+=String.fromCharCode(e)):(e-=65536,r+=String.fromCharCode(55296+(e>>10&1023)),r+=String.fromCharCode(56320+(1023&e))))}return r},i.prototype._parseBinaryTimeline=function(e,i,r){void 0===r&&(r=null);var n=null!==r?r:t.BaseObject.borrowObject(t.TimelineData);n.type=e,n.offset=i,this._timeline=n;var a=this._timelineArrayBuffer[n.offset+2];if(1===a)n.frameIndicesOffset=-1;else{var s,o=this._animation.frameCount+1,h=this._data.frameIndices;s=h.length,h.length+=o,n.frameIndicesOffset=s;for(var l=0,u=0,c=0,f=0;l<o;++l)c+f<=l&&u<a&&(c=this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[n.offset+5+u]],f=u===a-1?this._animation.frameCount-c:this._frameArrayBuffer[this._animation.frameOffset+this._timelineArrayBuffer[n.offset+5+u+1]]-c,u++),h[s+l]=u-1}return this._timeline=null,n},i.prototype._parseAnimation=function(e){var i=t.BaseObject.borrowObject(t.AnimationData);i.blendType=t.DataParser._getAnimationBlendType(t.ObjectDataParser._getString(e,t.DataParser.BLEND_TYPE,"")),i.frameCount=t.ObjectDataParser._getNumber(e,t.DataParser.DURATION,0),i.playTimes=t.ObjectDataParser._getNumber(e,t.DataParser.PLAY_TIMES,1),i.duration=i.frameCount/this._armature.frameRate,i.fadeInTime=t.ObjectDataParser._getNumber(e,t.DataParser.FADE_IN_TIME,0),i.scale=t.ObjectDataParser._getNumber(e,t.DataParser.SCALE,1),i.name=t.ObjectDataParser._getString(e,t.DataParser.NAME,t.DataParser.DEFAULT_NAME),0===i.name.length&&(i.name=t.DataParser.DEFAULT_NAME);var r=e[t.DataParser.OFFSET];if(i.frameIntOffset=r[0],i.frameFloatOffset=r[1],i.frameOffset=r[2],this._animation=i,t.DataParser.ACTION in e&&(i.actionTimeline=this._parseBinaryTimeline(0,e[t.DataParser.ACTION])),t.DataParser.Z_ORDER in e&&(i.zOrderTimeline=this._parseBinaryTimeline(1,e[t.DataParser.Z_ORDER])),t.DataParser.BONE in e){var n=e[t.DataParser.BONE];for(var a in n){var s=n[a],o=this._armature.getBone(a);if(null!==o)for(var h=0,l=s.length;h<l;h+=2){var u=s[h],c=s[h+1],f=this._parseBinaryTimeline(u,c);this._animation.addBoneTimeline(o.name,f)}}}if(t.DataParser.SLOT in e)for(var a in n=e[t.DataParser.SLOT]){s=n[a];var p=this._armature.getSlot(a);if(null!==p)for(h=0,l=s.length;h<l;h+=2)u=s[h],c=s[h+1],f=this._parseBinaryTimeline(u,c),this._animation.addSlotTimeline(p.name,f)}if(t.DataParser.CONSTRAINT in e)for(var a in n=e[t.DataParser.CONSTRAINT]){s=n[a];var d=this._armature.getConstraint(a);if(null!==d)for(h=0,l=s.length;h<l;h+=2)u=s[h],c=s[h+1],f=this._parseBinaryTimeline(u,c),this._animation.addConstraintTimeline(d.name,f)}if(t.DataParser.TIMELINE in e)for(var _=0,m=s=e[t.DataParser.TIMELINE];_<m.length;_++){var y=m[_];if((c=t.ObjectDataParser._getNumber(y,t.DataParser.OFFSET,0))>=0){u=t.ObjectDataParser._getNumber(y,t.DataParser.TYPE,0);var g=t.ObjectDataParser._getString(y,t.DataParser.NAME,"");if(f=null,40===u&&0!==i.blendType){var v=f=t.BaseObject.borrowObject(t.AnimationTimelineData);v.x=t.ObjectDataParser._getNumber(y,t.DataParser.X,0),v.y=t.ObjectDataParser._getNumber(y,t.DataParser.Y,0)}switch(f=this._parseBinaryTimeline(u,c,f),u){case 0:case 1:break;case 11:case 12:case 13:case 50:case 60:this._animation.addBoneTimeline(g,f);break;case 20:case 21:case 22:case 23:case 24:this._animation.addSlotTimeline(g,f);break;case 30:this._animation.addConstraintTimeline(g,f);break;case 40:case 41:case 42:this._animation.addAnimationTimeline(g,f)}}}return this._animation=null,i},i.prototype._parseGeometry=function(e,i){i.offset=e[t.DataParser.OFFSET],i.data=this._data;var r=this._intArrayBuffer[i.offset+3];if(r>=0){var n=t.BaseObject.borrowObject(t.WeightData),a=this._intArrayBuffer[i.offset+0],s=this._intArrayBuffer[r+0];n.offset=r;for(var o=0;o<s;++o){var h=this._intArrayBuffer[r+2+o];n.addBone(this._rawBones[h])}for(var l=r+2+s,u=0,c=(o=0,a);o<c;++o){var f=this._intArrayBuffer[l++];u+=f,l+=f}n.count=u,i.weight=n}},i.prototype._parseArray=function(e){var i=e[t.DataParser.OFFSET],r=i[1],n=i[3],a=i[5],s=i[7],o=i[9],h=i[11],l=i.length>12?i[13]:0,u=new Int16Array(this._binary,this._binaryOffset+i[0],r/Int16Array.BYTES_PER_ELEMENT),c=new Float32Array(this._binary,this._binaryOffset+i[2],n/Float32Array.BYTES_PER_ELEMENT),f=new Int16Array(this._binary,this._binaryOffset+i[4],a/Int16Array.BYTES_PER_ELEMENT),p=new Float32Array(this._binary,this._binaryOffset+i[6],s/Float32Array.BYTES_PER_ELEMENT),d=new Int16Array(this._binary,this._binaryOffset+i[8],o/Int16Array.BYTES_PER_ELEMENT),_=new Uint16Array(this._binary,this._binaryOffset+i[10],h/Uint16Array.BYTES_PER_ELEMENT),m=l>0?new Int16Array(this._binary,this._binaryOffset+i[12],l/Int16Array.BYTES_PER_ELEMENT):u;this._data.binary=this._binary,this._data.intArray=this._intArrayBuffer=u,this._data.floatArray=c,this._data.frameIntArray=f,this._data.frameFloatArray=p,this._data.frameArray=this._frameArrayBuffer=d,this._data.timelineArray=this._timelineArrayBuffer=_,this._data.colorArray=m},i.prototype.parseDragonBonesData=function(t,i){void 0===i&&(i=1),console.assert(null!=t&&t instanceof ArrayBuffer,"Data error.");var r=new Uint8Array(t,0,8);if(r[0]!=="D".charCodeAt(0)||r[1]!=="B".charCodeAt(0)||r[2]!=="D".charCodeAt(0)||r[3]!=="T".charCodeAt(0))return console.assert(!1,"Nonsupport data."),null;var n=new Uint32Array(t,8,1)[0],a=new Uint8Array(t,12,n),s=this._decodeUTF8(a),o=JSON.parse(s);return this._binaryOffset=12+n,this._binary=t,e.prototype.parseDragonBonesData.call(this,o,i)},i.getInstance=function(){return null===i._binaryDataParserInstance&&(i._binaryDataParserInstance=new i),i._binaryDataParserInstance},i._binaryDataParserInstance=null,i}(t.ObjectDataParser);t.BinaryDataParser=e}(Mt||(Mt={})),function(t){var e=function(){function e(i){void 0===i&&(i=null),this.autoSearch=!1,this._dragonBonesDataMap={},this._textureAtlasDataMap={},this._dragonBones=null,this._dataParser=null,null===e._objectParser&&(e._objectParser=new t.ObjectDataParser),null===e._binaryParser&&(e._binaryParser=new t.BinaryDataParser),this._dataParser=null!==i?i:e._objectParser}return e.prototype._isSupportMesh=function(){return!0},e.prototype._getTextureData=function(t,e){if(t in this._textureAtlasDataMap)for(var i=0,r=this._textureAtlasDataMap[t];i<r.length;i++)if(null!==(h=(o=r[i]).getTexture(e)))return h;if(this.autoSearch)for(var n in this._textureAtlasDataMap)for(var a=0,s=this._textureAtlasDataMap[n];a<s.length;a++){var o,h;if((o=s[a]).autoSearch&&null!==(h=o.getTexture(e)))return h}return null},e.prototype._fillBuildArmaturePackage=function(t,e,i,r,n){var a=null,s=null;if(e.length>0&&e in this._dragonBonesDataMap&&(s=(a=this._dragonBonesDataMap[e]).getArmature(i)),null===s&&(0===e.length||this.autoSearch))for(var o in this._dragonBonesDataMap)if(a=this._dragonBonesDataMap[o],(0===e.length||a.autoSearch)&&null!==(s=a.getArmature(i))){e=o;break}if(null!==s){if(t.dataName=e,t.textureAtlasName=n,t.data=a,t.armature=s,t.skin=null,r.length>0&&(t.skin=s.getSkin(r),null===t.skin&&this.autoSearch))for(var o in this._dragonBonesDataMap){var h=this._dragonBonesDataMap[o].getArmature(r);if(null!==h){t.skin=h.defaultSkin;break}}return null===t.skin&&(t.skin=s.defaultSkin),!0}return!1},e.prototype._buildBones=function(e,i){for(var r=0,n=e.armature.sortedBones;r<n.length;r++){var a=n[r];t.BaseObject.borrowObject(0===a.type?t.Bone:t.Surface).init(a,i)}},e.prototype._buildSlots=function(t,e){var i=t.skin,r=t.armature.defaultSkin;if(null!==i&&null!==r){var n={};for(var a in r.displays){var s=r.getDisplays(a);n[a]=s}if(i!==r)for(var a in i.displays)s=i.getDisplays(a),n[a]=s;for(var o=0,h=t.armature.sortedSlots;o<h.length;o++){var l=h[o],u=l.name in n?n[l.name]:null,c=this._buildSlot(t,l,e);if(null!==u){c.displayFrameCount=u.length;for(var f=0,p=c.displayFrameCount;f<p;++f){var d=u[f];if(c.replaceRawDisplayData(d,f),null!==d){if(t.textureAtlasName.length>0){var _=this._getTextureData(t.textureAtlasName,d.path);c.replaceTextureData(_,f)}var m=this._getSlotDisplay(t,d,c);c.replaceDisplay(m,f)}else c.replaceDisplay(null)}}c._setDisplayIndex(l.displayIndex,!0)}}},e.prototype._buildConstraints=function(e,i){var r=e.armature.constraints;for(var n in r){var a=r[n];switch(a.type){case 0:var s=t.BaseObject.borrowObject(t.IKConstraint);s.init(a,i),i._addConstraint(s);break;case 1:var o=t.BaseObject.borrowObject(t.PathConstraint);o.init(a,i),i._addConstraint(o);break;default:var h=t.BaseObject.borrowObject(t.IKConstraint);h.init(a,i),i._addConstraint(h)}}},e.prototype._buildChildArmature=function(t,e,i){return this.buildArmature(i.path,null!==t?t.dataName:"","",null!==t?t.textureAtlasName:"")},e.prototype._getSlotDisplay=function(e,i,r){var n=null!==e?e.dataName:i.parent.parent.parent.name,a=null;switch(i.type){case 0:var s=i;null===s.texture&&(s.texture=this._getTextureData(n,i.path)),a=r.rawDisplay;break;case 2:var o=i;null===o.texture&&(o.texture=this._getTextureData(n,o.path)),a=this._isSupportMesh()?r.meshDisplay:r.rawDisplay;break;case 1:var h=i,l=this._buildChildArmature(e,r,h);if(null!==l){if(l.inheritAnimation=h.inheritAnimation,!l.inheritAnimation){var u=h.actions.length>0?h.actions:l.armatureData.defaultActions;if(u.length>0)for(var c=0,f=u;c<f.length;c++){var p=f[c],d=t.BaseObject.borrowObject(t.EventObject);t.EventObject.actionDataToInstance(p,d,r.armature),d.slot=r,r.armature._bufferAction(d,!1)}else l.animation.play()}h.armature=l.armatureData}a=l}return a},e.prototype.parseDragonBonesData=function(t,i,r){void 0===i&&(i=null),void 0===r&&(r=1);for(var n=t instanceof ArrayBuffer?e._binaryParser:this._dataParser,a=n.parseDragonBonesData(t,r);;){var s=this._buildTextureAtlasData(null,null);if(!n.parseTextureAtlasData(null,s,r)){s.returnToPool();break}this.addTextureAtlasData(s,i)}return null!==a&&this.addDragonBonesData(a,i),a},e.prototype.parseTextureAtlasData=function(t,e,i,r){void 0===i&&(i=null),void 0===r&&(r=1);var n=this._buildTextureAtlasData(null,null);return this._dataParser.parseTextureAtlasData(t,n,r),this._buildTextureAtlasData(n,e||null),this.addTextureAtlasData(n,i),n},e.prototype.updateTextureAtlases=function(t,e){var i=this.getTextureAtlasData(e);if(null!==i)for(var r=0,n=i.length;r<n;++r)r<t.length&&this._buildTextureAtlasData(i[r],t[r])},e.prototype.getDragonBonesData=function(t){return t in this._dragonBonesDataMap?this._dragonBonesDataMap[t]:null},e.prototype.addDragonBonesData=function(t,e){if(void 0===e&&(e=null),(e=null!==e?e:t.name)in this._dragonBonesDataMap){if(this._dragonBonesDataMap[e]===t)return;console.warn("Can not add same name data: "+e)}else this._dragonBonesDataMap[e]=t},e.prototype.removeDragonBonesData=function(t,e){void 0===e&&(e=!0),t in this._dragonBonesDataMap&&(e&&this._dragonBones.bufferObject(this._dragonBonesDataMap[t]),delete this._dragonBonesDataMap[t])},e.prototype.getTextureAtlasData=function(t){return t in this._textureAtlasDataMap?this._textureAtlasDataMap[t]:null},e.prototype.addTextureAtlasData=function(t,e){void 0===e&&(e=null);var i=(e=null!==e?e:t.name)in this._textureAtlasDataMap?this._textureAtlasDataMap[e]:this._textureAtlasDataMap[e]=[];i.indexOf(t)<0&&i.push(t)},e.prototype.removeTextureAtlasData=function(t,e){if(void 0===e&&(e=!0),t in this._textureAtlasDataMap){var i=this._textureAtlasDataMap[t];if(e)for(var r=0,n=i;r<n.length;r++){var a=n[r];this._dragonBones.bufferObject(a)}delete this._textureAtlasDataMap[t]}},e.prototype.getArmatureData=function(t,e){void 0===e&&(e="");var r=new i;return this._fillBuildArmaturePackage(r,e,t,"","")?r.armature:null},e.prototype.clear=function(t){for(var e in void 0===t&&(t=!0),this._dragonBonesDataMap)t&&this._dragonBones.bufferObject(this._dragonBonesDataMap[e]),delete this._dragonBonesDataMap[e];for(var e in this._textureAtlasDataMap){if(t)for(var i=0,r=this._textureAtlasDataMap[e];i<r.length;i++){var n=r[i];this._dragonBones.bufferObject(n)}delete this._textureAtlasDataMap[e]}},e.prototype.buildArmature=function(t,e,r,n){void 0===e&&(e=""),void 0===r&&(r=""),void 0===n&&(n="");var a=new i;if(!this._fillBuildArmaturePackage(a,e||"",t,r||"",n||""))return console.warn("No armature data: "+t+", "+(null!==e?e:"")),null;var s=this._buildArmature(a);return this._buildBones(a,s),this._buildSlots(a,s),this._buildConstraints(a,s),s.invalidUpdate(null,!0),s.advanceTime(0),s},e.prototype.replaceDisplay=function(t,e,i){if(void 0===i&&(i=-1),i<0&&(i=t.displayIndex),i<0&&(i=0),t.replaceDisplayData(e,i),null!==e){var r=this._getSlotDisplay(null,e,t);if(0===e.type){var n=t.getDisplayFrameAt(i).rawDisplayData;null!==n&&2===n.type&&(r=t.meshDisplay)}t.replaceDisplay(r,i)}else t.replaceDisplay(null,i)},e.prototype.replaceSlotDisplay=function(t,e,i,r,n,a){void 0===a&&(a=-1);var s=this.getArmatureData(e,t||"");if(null===s||null===s.defaultSkin)return!1;var o=s.defaultSkin.getDisplay(i,r);return this.replaceDisplay(n,o,a),!0},e.prototype.replaceSlotDisplayList=function(t,e,i,r){var n=this.getArmatureData(e,t||"");if(!n||!n.defaultSkin)return!1;var a=n.defaultSkin.getDisplays(i);if(!a)return!1;r.displayFrameCount=a.length;for(var s=0,o=r.displayFrameCount;s<o;++s){var h=a[s];this.replaceDisplay(r,h,s)}return!0},e.prototype.replaceSkin=function(t,e,i,r){void 0===i&&(i=!1),void 0===r&&(r=null);for(var n=!1,a=e.parent.defaultSkin,s=0,o=t.getSlots();s<o.length;s++){var h=o[s];if(!(null!==r&&r.indexOf(h.name)>=0)){var l=e.getDisplays(h.name);if(null!==l||(null!==a&&e!==a&&(l=a.getDisplays(h.name)),null!==l)){h.displayFrameCount=l.length;for(var u=0,c=h.displayFrameCount;u<c;++u){var f=l[u];h.replaceRawDisplayData(f,u),null!==f?h.replaceDisplay(this._getSlotDisplay(null,f,h),u):h.replaceDisplay(null,u)}n=!0}else i&&(h.displayFrameCount=0)}}return n},e.prototype.replaceAnimation=function(e,i,r){void 0===r&&(r=!0);var n=i.defaultSkin;if(null===n)return!1;if(r)e.animation.animations=i.animations;else{var a=e.animation.animations,s={};for(var o in a)s[o]=a[o];for(var o in i.animations)s[o]=i.animations[o];e.animation.animations=s}for(var h=0,l=e.getSlots();h<l.length;h++)for(var u=l[h],c=0,f=0,p=u.displayList;f<p.length;f++){var d=p[f];if(d instanceof t.Armature){var _=n.getDisplays(u.name);if(null!==_&&c<_.length){var m=_[c];if(null!==m&&1===m.type){var y=this.getArmatureData(m.path,m.parent.parent.parent.name);y&&this.replaceAnimation(d,y,r)}}}c++}return!0},e.prototype.getAllDragonBonesData=function(){return this._dragonBonesDataMap},e.prototype.getAllTextureAtlasData=function(){return this._textureAtlasDataMap},Object.defineProperty(e.prototype,"clock",{get:function(){return this._dragonBones.clock},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragonBones",{get:function(){return this._dragonBones},enumerable:!0,configurable:!0}),e._objectParser=null,e._binaryParser=null,e}();t.BaseFactory=e;var i=function(){this.dataName="",this.textureAtlasName="",this.skin=null};t.BuildArmaturePackage=i}(Mt||(Mt={})),function(t){var i=function(i){function n(){var t=null!==i&&i.apply(this,arguments)||this;return t._renderTexture=null,t}return Ct(n,i),n.toString=function(){return"[class dragonBones.PixiTextureAtlasData]"},n.prototype._onClear=function(){i.prototype._onClear.call(this),this._renderTexture,this._renderTexture=null},n.prototype.createTexture=function(){return t.BaseObject.borrowObject(r)},Object.defineProperty(n.prototype,"renderTexture",{get:function(){return this._renderTexture},set:function(t){if(this._renderTexture!==t)if(this._renderTexture=t,null!==this._renderTexture)for(var i in this.textures)(r=this.textures[i]).renderTexture=new e.Texture(this._renderTexture,new e.Rectangle(r.region.x,r.region.y,r.region.width,r.region.height),new e.Rectangle(r.region.x,r.region.y,r.region.width,r.region.height),new e.Rectangle(0,0,r.region.width,r.region.height),r.rotated);else for(var i in this.textures){var r;(r=this.textures[i]).renderTexture=null}},enumerable:!0,configurable:!0}),n}(t.TextureAtlasData);t.PixiTextureAtlasData=i;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.renderTexture=null,e}return Ct(e,t),e.toString=function(){return"[class dragonBones.PixiTextureData]"},e.prototype._onClear=function(){t.prototype._onClear.call(this),null!==this.renderTexture&&this.renderTexture.destroy(!1),this.renderTexture=null},e}(t.TextureData);t.PixiTextureData=r}(Mt||(Mt={})),function(t){var i=function(i){function r(){var t=null!==i&&i.apply(this,arguments)||this;return t.debugDraw=!1,t._debugDraw=!1,t._armature=null,t._debugDrawer=null,t}return Ct(r,i),r.prototype.dbInit=function(t){this._armature=t},r.prototype.dbClear=function(){null!==this._debugDrawer&&this._debugDrawer.destroy({children:!0,texture:!0,baseTexture:!0}),this._armature=null,this._debugDrawer=null,i.prototype.destroy.call(this)},r.prototype.dbUpdate=function(){var i=t.DragonBones.debugDraw||this.debugDraw;if(i||this._debugDraw)if(this._debugDraw=i,this._debugDraw){if(null===this._debugDrawer){this._debugDrawer=new e.Sprite(e.Texture.EMPTY);var r=new e.Graphics;this._debugDrawer.addChild(r)}this.addChild(this._debugDrawer);var n=this._debugDrawer.getChildAt(0);n.clear();for(var a=this._armature.getBones(),s=0,o=a.length;s<o;++s){var h=a[s],l=h.boneData.length,u=h.globalTransformMatrix.tx,c=h.globalTransformMatrix.ty,f=u+h.globalTransformMatrix.a*l,p=c+h.globalTransformMatrix.b*l;n.lineStyle(2,65535,.7),n.moveTo(u,c),n.lineTo(f,p),n.lineStyle(0,0,0),n.beginFill(65535,.7),n.drawCircle(u,c,3),n.endFill()}var d=this._armature.getSlots();for(s=0,o=d.length;s<o;++s){var _=d[s],m=_.boundingBoxData;if(m){switch((P=this._debugDrawer.getChildByName(_.name))||((P=new e.Graphics).name=_.name,this._debugDrawer.addChild(P)),P.clear(),P.lineStyle(2,16711935,.7),m.type){case 0:P.drawRect(.5*-m.width,.5*-m.height,m.width,m.height);break;case 1:P.drawEllipse(.5*-m.width,.5*-m.height,m.width,m.height);break;case 2:for(var y=m.vertices,g=0,v=y.length;g<v;g+=2){var b=y[g],T=y[g+1];0===g?P.moveTo(b,T):P.lineTo(b,T)}P.lineTo(y[0],y[1])}P.endFill(),_.updateTransformAndMatrix(),_.updateGlobalTransform();var x=_.global;P.setTransform(x.x,x.y,x.scaleX,x.scaleY,x.rotation,x.skew,0,_._pivotX,_._pivotY)}else{var P;(P=this._debugDrawer.getChildByName(_.name))&&this._debugDrawer.removeChild(P)}}}else null!==this._debugDrawer&&this._debugDrawer.parent===this&&this.removeChild(this._debugDrawer)},r.prototype.dispose=function(t){void 0===t&&(t=!0),null!==this._armature&&(this._armature.dispose(),this._armature=null)},r.prototype.destroy=function(){this.dispose()},r.prototype.dispatchDBEvent=function(t,e){this.emit(t,e)},r.prototype.hasDBEventListener=function(t){return this.listenerCount(t)>0},r.prototype.addDBEventListener=function(t,e,i){this.addListener(t,e,i)},r.prototype.removeDBEventListener=function(t,e,i){this.removeListener(t,e,i)},Object.defineProperty(r.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"animation",{get:function(){return this._armature.animation},enumerable:!0,configurable:!0}),r}(e.Sprite);t.PixiArmatureDisplay=i}(Mt||(Mt={})),function(t){var i=function(i){function r(){return null!==i&&i.apply(this,arguments)||this}return Ct(r,i),r.toString=function(){return"[class dragonBones.PixiSlot]"},r.prototype._onClear=function(){i.prototype._onClear.call(this),this._textureScale=1,this._renderDisplay=null,this._updateTransform="3"===e.VERSION[0]?this._updateTransformV3:this._updateTransformV4},r.prototype._initDisplay=function(t,e){},r.prototype._disposeDisplay=function(t,e){e||t.destroy()},r.prototype._onUpdateDisplay=function(){this._renderDisplay=this._display?this._display:this._rawDisplay},r.prototype._addDisplay=function(){this._armature.display.addChild(this._renderDisplay)},r.prototype._replaceDisplay=function(t){var e=this._armature.display,i=t;e.addChild(this._renderDisplay),e.swapChildren(this._renderDisplay,i),e.removeChild(i),this._textureScale=1},r.prototype._removeDisplay=function(){this._renderDisplay.parent.removeChild(this._renderDisplay)},r.prototype._updateZOrder=function(){var t=this._armature.display;t.getChildIndex(this._renderDisplay)!==this._zOrder&&t.addChildAt(this._renderDisplay,this._zOrder)},r.prototype._updateVisible=function(){this._renderDisplay.visible=this._parent.visible&&this._visible},r.prototype._updateBlendMode=function(){if(this._renderDisplay instanceof e.Sprite)switch(this._blendMode){case 0:this._renderDisplay.blendMode=e.BLEND_MODES.NORMAL;break;case 1:this._renderDisplay.blendMode=e.BLEND_MODES.ADD;break;case 3:this._renderDisplay.blendMode=e.BLEND_MODES.DARKEN;break;case 4:this._renderDisplay.blendMode=e.BLEND_MODES.DIFFERENCE;break;case 6:this._renderDisplay.blendMode=e.BLEND_MODES.HARD_LIGHT;break;case 9:this._renderDisplay.blendMode=e.BLEND_MODES.LIGHTEN;break;case 10:this._renderDisplay.blendMode=e.BLEND_MODES.MULTIPLY;break;case 11:this._renderDisplay.blendMode=e.BLEND_MODES.OVERLAY;break;case 12:this._renderDisplay.blendMode=e.BLEND_MODES.SCREEN}},r.prototype._updateColor=function(){var t=this._colorTransform.alphaMultiplier*this._globalAlpha;if(this._renderDisplay.alpha=t,this._renderDisplay instanceof e.Sprite||this._renderDisplay instanceof e.SimpleMesh){var i=(Math.round(255*this._colorTransform.redMultiplier)<<16)+(Math.round(255*this._colorTransform.greenMultiplier)<<8)+Math.round(255*this._colorTransform.blueMultiplier);this._renderDisplay.tint=i}},r.prototype._updateFrame=function(){var e=this._textureData;if(this._displayIndex>=0&&null!==this._display&&null!==e){var i=e.parent;null!==this._armature.replacedTexture&&(null===this._armature._replaceTextureAtlasData?((i=t.BaseObject.borrowObject(t.PixiTextureAtlasData)).copyFrom(e.parent),i.renderTexture=this._armature.replacedTexture,this._armature._replaceTextureAtlasData=i):i=this._armature._replaceTextureAtlasData,e=i.getTexture(e.name));var r=e.renderTexture;if(null!==r){if(null!==this._geometryData){var n=this._geometryData.data,a=n.intArray,s=n.floatArray,o=a[this._geometryData.offset+0],h=a[this._geometryData.offset+1],l=a[this._geometryData.offset+2];l<0&&(l+=65536);for(var u=l+2*o,c=this._armature._armatureData.scale,f=this._renderDisplay,p=new Float32Array(2*o),d=new Float32Array(2*o),_=new Uint16Array(3*h),m=0,y=2*o;m<y;++m)p[m]=s[l+m]*c;for(m=0;m<3*h;++m)_[m]=a[this._geometryData.offset+4+m];for(m=0,y=2*o;m<y;m+=2){var g=s[u+m],v=s[u+m+1];e.rotated?(d[m]=1-v,d[m+1]=g):(d[m]=g,d[m+1]=v)}this._textureScale=1,f.texture=r,f.vertices=p,f.uvBuffer.update(d),f.geometry.addIndex(_);var b=null!==this._geometryData.weight,T=0!==this._parent._boneData.type;(b||T)&&this._identityTransform()}else{var x;this._textureScale=e.parent.scale*this._armature._armatureData.scale,(x=this._renderDisplay).texture=r}return void(this._visibleDirty=!0)}}null!==this._geometryData?((f=this._renderDisplay).texture=null,f.x=0,f.y=0,f.visible=!1):((x=this._renderDisplay).texture=null,x.x=0,x.y=0,x.visible=!1)},r.prototype._updateMesh=function(){var t=this._armature._armatureData.scale,e=this._displayFrame.deformVertices,i=this._geometryBones,r=this._geometryData,n=r.weight,a=e.length>0&&r.inheritDeform,s=this._renderDisplay;if(null!==n){var o=(A=r.data).intArray,h=A.floatArray,l=o[r.offset+0],u=o[n.offset+1];u<0&&(u+=65536);for(var c=0,f=0,p=n.offset+2+i.length,d=u,_=0;c<l;++c){for(var m=o[p++],y=0,g=0,v=0;v<m;++v){var b=i[o[p++]];if(null!==b){var T=b.globalTransformMatrix,x=h[d++],P=h[d++]*t,E=h[d++]*t;a&&(P+=e[_++],E+=e[_++]),y+=(T.a*P+T.c*E+T.tx)*x,g+=(T.b*P+T.d*E+T.ty)*x}}s.vertices[f++]=y,s.vertices[f++]=g}}else{var A,S=0!==this._parent._boneData.type,w=(o=(A=r.data).intArray,h=A.floatArray,l=o[r.offset+0],o[r.offset+2]);w<0&&(w+=65536),c=0;for(var D=2*l;c<D;c+=2){var O=h[w+c]*t,I=h[w+c+1]*t;a&&(O+=e[c],I+=e[c+1]),S?(T=this._parent._getGlobalTransformMatrix(O,I),s.vertices[c]=T.a*O+T.c*I+T.tx,s.vertices[c+1]=T.b*O+T.d*I+T.ty):(s.vertices[c]=O,s.vertices[c+1]=I)}}},r.prototype._updateTransform=function(){throw new Error},r.prototype._updateTransformV3=function(){this.updateGlobalTransform();var t=this.global;if(this._renderDisplay===this._rawDisplay||this._renderDisplay===this._meshDisplay){var e=t.x-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),i=t.y-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);this._renderDisplay.setTransform(e,i,t.scaleX*this._textureScale,t.scaleY*this._textureScale,t.rotation,t.skew,0)}else this._renderDisplay.position.set(t.x,t.y),this._renderDisplay.rotation=t.rotation,this._renderDisplay.skew.set(t.skew,0),this._renderDisplay.scale.set(t.scaleX,t.scaleY)},r.prototype._updateTransformV4=function(){this.updateGlobalTransform();var t=this.global;if(this._renderDisplay===this._rawDisplay||this._renderDisplay===this._meshDisplay){var e=t.x-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),i=t.y-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);this._renderDisplay.setTransform(e,i,t.scaleX*this._textureScale,t.scaleY*this._textureScale,t.rotation,-t.skew,0)}else this._renderDisplay.position.set(t.x,t.y),this._renderDisplay.rotation=t.rotation,this._renderDisplay.skew.set(-t.skew,0),this._renderDisplay.scale.set(t.scaleX,t.scaleY)},r.prototype._identityTransform=function(){this._renderDisplay.setTransform(0,0,1,1,0,0,0)},r}(t.Slot);t.PixiSlot=i}(Mt||(Mt={})),function(t){var i=function(i){function r(n,a){void 0===n&&(n=null),void 0===a&&(a=!0);var s=i.call(this,n)||this;if(null===r._dragonBonesInstance){var o=new t.PixiArmatureDisplay(e.Texture.EMPTY);r._dragonBonesInstance=new t.DragonBones(o),a&&e.Ticker.shared.add(r._clockHandler,r)}return s._dragonBones=r._dragonBonesInstance,s}return Ct(r,i),r._clockHandler=function(t){this._dragonBonesInstance.advanceTime(t/e.settings.TARGET_FPMS*.001)},r.advanceTime=function(t){this._dragonBonesInstance.advanceTime(t)},Object.defineProperty(r,"factory",{get:function(){return null===r._factory&&(r._factory=new r(null,r.useSharedTicker)),r._factory},enumerable:!0,configurable:!0}),r.newInstance=function(t){return void 0===t&&(t=!0),null===r._factory&&(r._factory=new r(null,t)),r._factory},r.prototype._buildTextureAtlasData=function(e,i){return e?e.renderTexture=i:e=t.BaseObject.borrowObject(t.PixiTextureAtlasData),e},r.prototype._buildArmature=function(i){var r=t.BaseObject.borrowObject(t.Armature),n=new t.PixiArmatureDisplay(e.Texture.EMPTY);return r.init(i.armature,n,n,this._dragonBones),r},r.prototype._buildSlot=function(i,r,n){var a=t.BaseObject.borrowObject(t.PixiSlot);return a.init(r,n,new e.Sprite(e.Texture.EMPTY),new e.SimpleMesh),a},r.prototype.buildArmatureDisplay=function(t,e,i,r){void 0===e&&(e=""),void 0===i&&(i=""),void 0===r&&(r="");var n=this.buildArmature(t,e||"",i||"",r||"");return null!==n?(this._dragonBones.clock.add(n),n.display):null},r.prototype.getTextureDisplay=function(t,i){void 0===i&&(i=null);var r=this._getTextureData(null!==i?i:"",t);return null!==r&&null!==r.renderTexture?new e.Sprite(r.renderTexture):null},Object.defineProperty(r.prototype,"soundEventManager",{get:function(){return this._dragonBones.eventManager},enumerable:!0,configurable:!0}),r._dragonBonesInstance=null,r._factory=null,r.useSharedTicker=!0,r}(t.BaseFactory);t.PixiFactory=i}(Mt||(Mt={}));const Rt=Mt;var Ft=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const Bt=function(t){function e(e,i){var r=t.call(this,e,"cardContent",i)||this;return r.game=e,r.parent=i,r.race="",r.attribute="",r.sprite=null,r.indices=[0,0],r}return Ft(e,t),e.prototype.initial=function(){},e.prototype.onClick=function(){},e.prototype.setRole=function(t,e){var i=this.game.loader,r=Rt.PixiFactory.factory;r.parseDragonBonesData(i.resources[t+"Ske"].data),r.parseTextureAtlasData(i.resources[t+"Data"].data,PIXI.utils.TextureCache[t]);var n=r.buildArmatureDisplay(e);return this.addChild(n),n},e.prototype.setHealth=function(t){this.hp=t},e}(n);var Nt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const Lt=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.game=e,r.parent=i,r.attribute="npc",r.race="mobs",r.initial(),r}return Nt(e,t),e.prototype.initial=function(){this.sprite=this.game.add.sprite("mobs","mobs",[.5,.5]),this.sprite.scale.set(.5),this.addChild(this.sprite)},e.prototype.onClick=function(){console.log("mobs",this)},e}(Bt);var kt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Ut={don:function(t){function i(e,i){var r=t.call(this,e,i)||this;return r.game=e,r.parent=i,r.attribute="player",r.race="human",r.initial(),r}return kt(i,t),i.prototype.initial=function(){this.currentGlobal=new e.Point(0,0)},i.prototype.onClick=function(){},i.prototype.onMove=function(t,e){},i}(Bt),mobs:Lt},jt=function(t,e,i,r){return t.instance.to(e,.35,{x:i.x,y:i.y,ease:t.cubic.easeOut,onComplete:r})},Xt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Yt=function(t,e,i){if(i||2===arguments.length)for(var r,n=0,a=e.length;n<a;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))};const Gt=function(t){function e(e,i,r){var n=t.call(this,e,"cardWrap",i)||this;return n.parent=i,n.game=e,n.type=r,n.initialWrap(),n.setContent(),n.interaction(),n}return Xt(e,t),e.prototype.initialWrap=function(){this.wrap=this.game.add.image("cardWrap","cardWrap",this,[.5,.5])},e.prototype.setContent=function(){this.type&&(this.content=new Ut[this.type](this.game,this))},e.prototype.interaction=function(){var t=this;this.wrap.interactive=!0,this.wrap.on("pointerdown",(function(e){var i=t.wrap;if(t.isPlayerCard()){var r=t.content;r.currentGlobal=e.data.global.clone(),i.once("pointerup",(function(){i.off("pointerupoutside")})),i.once("pointerupoutside",(function(e){i.off("pointerup");var n=t.computedPlayerDirection(r.currentGlobal,e.data.global);n&&t.parent.updateCheckerBoard(t,n)}))}i.once("pointerup",(function(){i.off("pointerupoutside"),t.content.onClick()})),i.once("pointerupoutside",(function(){i.off("pointerup")}))}))},e.prototype.isPlayerCard=function(){return"player"===this.content.attribute},e.prototype.computedPlayerDirection=function(t,e){var i={up:Math.abs(e.y-t.y)>Math.abs(e.x-t.x)&&e.y-t.y<0,down:Math.abs(e.y-t.y)>Math.abs(e.x-t.x)&&e.y-t.y>0,left:Math.abs(e.x-t.x)>Math.abs(e.y-t.y)&&e.x-t.x<0,right:Math.abs(e.x-t.x)>Math.abs(e.y-t.y)&&e.x-t.x>0};return Object.keys(i).find((function(t){return i[t]}))},e.prototype.cardMoveLogic=function(t,e){var i=this,r=Yt([],this.content.indices,!0),n=Yt([],t.content.indices,!0),a=Yt([],e.content.indices,!0);this.content.indices=n,e.content.indices=r,t.content.indices=a,t.scale.set(0),t.visible=!1,jt(this.parent.tween,this,{x:n[0]*(this.wrap.width+2)+this.game.config.half_w,y:n[1]*this.wrap.height+this.game.config.half_h},(function(){var e,r;t.position.set(a[0]*(i.wrap.width+2)+i.game.config.half_w,a[1]*i.wrap.height+i.game.config.half_h),t.visible=!0,e=i.parent.tween,r=t,e.instance.to(r.scale,.35,{x:1,y:1,ease:e.back.easeOut,onComplete:undefined})})),jt(this.parent.tween,e,{x:r[0]*(this.wrap.width+2)+this.game.config.half_w,y:r[1]*this.wrap.height+this.game.config.half_h}),console.log(this.parent.visibleCheckerCards)},e}(n);var Vt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const Ht=function(t){function e(e){var i=t.call(this,e,"checkerLayout")||this;return i.compareSameIndices=function(t,e){return t[0]===e[0]&&t[1]===e[1]},i.game=e,i.tween=i.game.add.tween(),i.poolIndices=[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]],i.originIndices=[0,0],i.moveBehavior={left:[-1,0],right:[1,0],up:[0,-1],down:[0,1]},i.reverseBehavior={left:"right",right:"left",up:"down",down:"up"},i.initial(),i}return Vt(e,t),e.prototype.initial=function(){this.visibleCheckerCards=[],this.initialCardPlace()},e.prototype.initialCardPlace=function(){for(var t=0,e=this.poolIndices;t<e.length;t++){var i=e[t],r=new Gt(this.game,this,this.setOriginType(i));r.position.set(i[0]*(r.width+2)+this.game.config.half_w,i[1]*r.height+this.game.config.half_h),r.content.indices=i,this.visibleCheckerCards.push(r),console.log(this.visibleCheckerCards)}},e.prototype.setOriginType=function(t){return this.compareSameIndices(t,this.originIndices)?"don":"mobs"},e.prototype.updateCheckerBoard=function(t,e){var i,r=this,n=null===(i=t.content.indices)||void 0===i?void 0:i.map((function(t,i){return s.clamp(t+r.moveBehavior[e][i],-1,1)})),a=this.getCardByIndices(n)[1];if(console.log("target",n),a&&"player"!==a.content.attribute){var o=this.getFollowPlayerCard(t,e),h=this.getCardByIndices(o)[1];t.cardMoveLogic(a,h)}},e.prototype.getFollowPlayerCard=function(t,e){return this.searchBeyondBoundary(t.content.indices,e)},e.prototype.getCardByIndices=function(t){var e=this,i=this.visibleCheckerCards.findIndex((function(i){return e.compareSameIndices(i.content.indices,t)}));return[i,this.visibleCheckerCards[i]]},e.prototype.searchBeyondBoundary=function(t,e){var i=this.reverseBehavior[e],r=[0,0],n=this.changePositionIndices(t,this.moveBehavior[i]);if(n)console.log(i,n),r=n;else for(var a=0,s=Object.keys(this.moveBehavior);a<s.length;a++){var o=s[a];if(o!==e&&o!==i){var h=this.changePositionIndices(t,this.moveBehavior[o]);if(h){r=h;break}}}return r},e.prototype.changePositionIndices=function(t,e){var i=t.map((function(t,i){return t+e[i]}));return Math.abs(i[0])<2&&Math.abs(i[1])<2&&i},e}(n);var zt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),Wt={Card:function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.game=e,r.resources={bg:"assets/images/bg.png",cardWrap:"assets/images/cardWrap.png",font_a:"assets/fonts/font_a.fnt"},r}return zt(e,t),e.prototype.boot=function(){},e.prototype.create=function(){var t=this.game.add.background("bg","bg");this.layout=new Ht(this.game),this.addChild(t,this.layout);var e=this.game.add.bitmapText("id","123",{fontName:"font_a",fontSize:44});this.addChild(e)},e.prototype.update=function(){},e.prototype.reset=function(){this.children.length>1&&this.removeChildren(1,this.children.length)},e}(St)};var qt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();const Zt=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.game=e,r.resources={gameBg:"assets/images/gameBg.png"},r}return qt(e,t),e.prototype.boot=function(t,e){this.loading(t,e)},e.prototype.loading=function(t,e){var i=this;t&&t.resources?this.loadScene(t.resources).load((function(e){t.isCached=!0,t.loader=e,i.game.sceneManager.changeScene(i,t)})):this.game.sceneManager.changeScene(this,t)},e.prototype.create=function(){var t=this.game.add.text("","loading...",{fontFamily:"GrilledCheeseBTNToasted",fontSize:12},[.5,.5]);this.addChild(t),this.removeChild(t),this.position.set(this.game.config.half_w,this.game.config.half_h),this.bg=this.game.add.image("preloaderBg","gameBg",this),this.bg.width=this.game.config.width,this.bg.height=this.game.config.height,this.bg.anchor.set(.5),this.drawStage=this.game.add.graphics()},e.prototype.loadScene=function(t){for(var e=Object.keys(t),i=this.game.app.loader,r=0,n=e;r<n.length;r++){var a=n[r];i.resources[a]||i.add(a,t[a])}return i},e.prototype.generateSprite=function(){},e}(St);var Kt={float:function(t,e,i,r){i!==r&&(i.v=r,t.uniform1f(e,r))},vec2:function(t,e,i,r){i[0]===r[0]&&i[1]===r[1]||(i[0]=r[0],i[1]=r[1],t.uniform2f(e,r[0],r[1]))},vec3:function(t,e,i,r){i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]||(i[0]=r[0],i[1]=r[1],i[2]=r[2],t.uniform3f(e,r[0],r[1],r[2]))},int:function(t,e,i,r){t.uniform1i(e,r)},ivec2:function(t,e,i,r){t.uniform2i(e,r[0],r[1])},ivec3:function(t,e,i,r){t.uniform3i(e,r[0],r[1],r[2])},ivec4:function(t,e,i,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},bool:function(t,e,i,r){t.uniform1i(e,r)},bvec2:function(t,e,i,r){t.uniform2i(e,r[0],r[1])},bvec3:function(t,e,i,r){t.uniform3i(e,r[0],r[1],r[2])},bvec4:function(t,e,i,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},mat2:function(t,e,i,r){t.uniformMatrix2fv(e,!1,r)},mat3:function(t,e,i,r){t.uniformMatrix3fv(e,!1,r)},mat4:function(t,e,i,r){t.uniformMatrix4fv(e,!1,r)},sampler2D:function(t,e,i,r){t.uniform1i(e,r)},samplerCube:function(t,e,i,r){t.uniform1i(e,r)},sampler2DArray:function(t,e,i,r){t.uniform1i(e,r)}},Qt={float:function(t,e,i,r){t.uniform1fv(e,r)},vec2:function(t,e,i,r){t.uniform2fv(e,r)},vec3:function(t,e,i,r){t.uniform3fv(e,r)},vec4:function(t,e,i,r){t.uniform4fv(e,r)},int:function(t,e,i,r){t.uniform1iv(e,r)},ivec2:function(t,e,i,r){t.uniform2iv(e,r)},ivec3:function(t,e,i,r){t.uniform3iv(e,r)},ivec4:function(t,e,i,r){t.uniform4iv(e,r)},bool:function(t,e,i,r){t.uniform1iv(e,r)},bvec2:function(t,e,i,r){t.uniform2iv(e,r)},bvec3:function(t,e,i,r){t.uniform3iv(e,r)},bvec4:function(t,e,i,r){t.uniform4iv(e,r)},sampler2D:function(t,e,i,r){t.uniform1iv(e,r)},samplerCube:function(t,e,i,r){t.uniform1iv(e,r)},sampler2DArray:function(t,e,i,r){t.uniform1iv(e,r)}};new function(){var t=wx.getSystemInfoSync(),i=t.windowWidth,r=t.windowHeight;!function(t){var e;if(!(null===(e=null==t?void 0:t.systems)||void 0===e?void 0:e.ShaderSystem))throw new Error("Unable to patch ShaderSystem, class not found.");var i=t.systems.ShaderSystem,r=!1;try{i.prototype.systemCheck.call(null),r=!1}catch(t){r=!0}r&&Object.assign(i.prototype,{systemCheck:function(){},syncUniforms:function(t,e){var i=this.shader,r=this.renderer;!function(t,e,i,r,n){var a=0,s=null,o=null,h=n.gl;for(var l in t.uniforms){var u=e[l],c=r[l],f=i[l],p=t.uniforms[l];u?"float"===u.type&&1===u.size?c!==f.value&&(f.value=c,h.uniform1f(f.location,c)):"sampler2D"!==u.type&&"samplerCube"!==u.type&&"sampler2DArray"!==u.type||1!==u.size||u.isArray?"mat3"===u.type&&1===u.size?void 0!==p.a?h.uniformMatrix3fv(f.location,!1,c.toArray(!0)):h.uniformMatrix3fv(f.location,!1,c):"vec2"===u.type&&1===u.size?void 0!==p.x?(s=c,(o=f.value)[0]===s.x&&o[1]===s.y||(o[0]=s.x,o[1]=s.y,h.uniform2f(f.location,s.x,s.y))):(s=c,(o=f.value)[0]===s[0]&&o[1]===s[1]||(o[0]=s[0],o[1]=s[1],h.uniform2f(f.location,s[0],s[1]))):"vec4"===u.type&&1===u.size?void 0!==p.width?(s=c,(o=f.value)[0]===s.x&&o[1]===s.y&&o[2]===s.width&&o[3]===s.height||(o[0]=s.x,o[1]=s.y,o[2]=s.width,o[3]=s.height,h.uniform4f(f.location,s.x,s.y,s.width,s.height))):(s=c,(o=f.value)[0]===s[0]&&o[1]===s[1]&&o[2]===s[2]&&o[3]===s[3]||(o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],h.uniform4f(f.location,s[0],s[1],s[2],s[3]))):(1===u.size?Kt:Qt)[u.type].call(null,h,f.location,f.value,c):(n.texture.bind(c,a),f.value!==a&&(f.value=a,h.uniform1i(f.location,a)),a++):p.group&&n.shader.syncUniformGroup(c)}}(t,i.program.uniformData,e.uniformData,t.uniforms,r)}})}(e);var n=new xt({width:i,height:r,view:globalThis.canvas,isPureCanvas:!0}),a=function(t){var e={};for(var i in Wt)e[i]=t.sceneManager.addScene(i,Wt[i]);return e}(n);n.hive=a,n.entryHive=a.Card;var s=n.sceneManager.addScene("global_preloader",Zt);n.sceneManager.changeScene(null,s)}})(),r.default})()));
//# sourceMappingURL=main.min.js.map